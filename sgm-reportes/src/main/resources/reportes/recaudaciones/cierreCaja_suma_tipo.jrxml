<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="cierreCaja_suma_tipo" language="groovy" pageWidth="555" pageHeight="802" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="76fc8a06-265d-4779-9de1-cb3063ca5071">
	<property name="ireport.zoom" value="3.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="ID_LIQ" class="java.lang.Long"/>
	<parameter name="TIPO_PAGO" class="java.lang.Integer"/>
	<parameter name="FECHA" class="java.lang.String"/>
	<parameter name="ID_CAJA" class="java.lang.Long"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String"/>
	<queryString>
		<![CDATA[select sum(det.valor) as valor
from sgm_financiero.ren_pago as pa
left join sgm_financiero.ren_pago_detalle as det on (det.pago = pa.id)
where
(CASE WHEN $P{FECHA} IS NOT NULL THEN to_char(pa.fecha_pago, 'dd-mm-yyyy') = $P{FECHA} ELSE TRUE END)
AND (CASE WHEN $P{ID_CAJA} IS NOT NULL THEN pa.cajero = $P{ID_CAJA} ELSE TRUE END)
AND (CASE WHEN $P{ID_LIQ} IS NOT NULL THEN pa.id = $P{ID_LIQ} ELSE TRUE END)
AND (CASE WHEN $P{TIPO_PAGO} IS NOT NULL THEN det.tipo_pago = $P{TIPO_PAGO} ELSE TRUE END)]]>
	</queryString>
	<field name="valor" class="java.math.BigDecimal"/>
	<detail>
		<band height="12">
			<textField isBlankWhenNull="false">
				<reportElement uuid="d9a36250-0d63-4a07-8855-5ccc18da0c1a" x="0" y="0" width="50" height="12" isPrintWhenDetailOverflows="true"/>
				<box rightPadding="2"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{valor} == null ? new BigDecimal("0.00") : $F{valor}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
