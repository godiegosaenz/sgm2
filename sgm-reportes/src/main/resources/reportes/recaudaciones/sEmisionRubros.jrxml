<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="sEmisionRubros" language="groovy" pageWidth="825" pageHeight="555" orientation="Landscape" columnWidth="825" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="122f1c6c-1537-4230-a3d5-05ceecd922ef">
	<property name="ireport.zoom" value="3.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="ANIO" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT p.clave_cat, p.num_predio, l.id_liquidacion,
CASE WHEN e.id IS NULL THEN
	TRIM(l.nombre_comprador)
ELSE
	TRIM(COALESCE(e.apellidos,'')||' '||COALESCE(e.nombres,'')||' '||COALESCE(e.razon_social,''))
END AS contribuyente, c.nombre AS ciudadela,
p.area_solar, l.avaluo_solar,

(select round(sum(area_cons_censo), 2) from sgm_app.cat_predio_edificacion edf
 where edf.predio = p.id and estado ='A')
as area_total_cons,

 l.avaluo_construccion, l.avaluo_municipal,
r1.valor AS imp_predial,
r2.valor AS ser_administrativos,
r3.valor AS imp_solar_no_edificado,
r4.valor AS bomberos,
r7.valor AS cem_alcantarillados_vias,
r6.valor AS cem_parque_plazas,
l.total_pago
FROM sgm_app.cat_predio p
INNER JOIN sgm_financiero.ren_valor_inicial_liquidacion l ON (p.id=l.predio AND l.tipo_liquidacion=13)
LEFT OUTER JOIN sgm_app.cat_ente e ON (l.comprador=e.id)
LEFT OUTER JOIN sgm_app.cat_ciudadela c ON (p.ciudadela=c.id)
LEFT OUTER JOIN sgm_financiero.ren_valor_inicial_det_liquidacion r1 ON (l.id=r1.liquidacion AND r1.rubro=2)
LEFT OUTER JOIN sgm_financiero.ren_valor_inicial_det_liquidacion r2 ON (l.id=r2.liquidacion AND r2.rubro=3)
LEFT OUTER JOIN sgm_financiero.ren_valor_inicial_det_liquidacion r3 ON (l.id=r3.liquidacion AND r3.rubro=4)
LEFT OUTER JOIN sgm_financiero.ren_valor_inicial_det_liquidacion r4 ON (l.id=r4.liquidacion AND r4.rubro=7)
LEFT OUTER JOIN sgm_financiero.ren_valor_inicial_det_liquidacion r6 ON (l.id=r6.liquidacion AND r6.rubro=640)
LEFT OUTER JOIN sgm_financiero.ren_valor_inicial_det_liquidacion r7 ON (l.id=r7.liquidacion AND r7.rubro=641)
WHERE l.anio=$P{ANIO} AND l.estado_liquidacion IN (1,2)  AND p.estado = 'A'
ORDER BY num_predio]]>
	</queryString>
	<field name="clave_cat" class="java.lang.String"/>
	<field name="num_predio" class="java.lang.Long"/>
	<field name="id_liquidacion" class="java.lang.String"/>
	<field name="contribuyente" class="java.lang.String"/>
	<field name="ciudadela" class="java.lang.String"/>
	<field name="area_solar" class="java.math.BigDecimal"/>
	<field name="avaluo_solar" class="java.math.BigDecimal"/>
	<field name="area_total_cons" class="java.math.BigDecimal"/>
	<field name="avaluo_construccion" class="java.math.BigDecimal"/>
	<field name="avaluo_municipal" class="java.math.BigDecimal"/>
	<field name="imp_predial" class="java.math.BigDecimal"/>
	<field name="ser_administrativos" class="java.math.BigDecimal"/>
	<field name="imp_solar_no_edificado" class="java.math.BigDecimal"/>
	<field name="bomberos" class="java.math.BigDecimal"/>
	<field name="cem_alcantarillados_vias" class="java.math.BigDecimal"/>
	<field name="cem_parque_plazas" class="java.math.BigDecimal"/>
	<field name="total_pago" class="java.math.BigDecimal"/>
	<variable name="SUM_R1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{imp_predial}]]></variableExpression>
	</variable>
	<variable name="SUM_R2" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ser_administrativos}]]></variableExpression>
	</variable>
	<variable name="SUM_R3" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{imp_solar_no_edificado}]]></variableExpression>
	</variable>
	<variable name="SUM_R4" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{bomberos}]]></variableExpression>
	</variable>
	<variable name="SUM_R5" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{cem_parque_plazas}]]></variableExpression>
	</variable>
	<variable name="SUM_R6" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{cem_alcantarillados_vias}]]></variableExpression>
	</variable>
	<variable name="SUM_R7" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{total_pago}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<columnHeader>
		<band height="31" splitType="Stretch">
			<staticText>
				<reportElement x="694" y="3" width="40" height="26" uuid="6335f397-fe96-427b-a2b9-071fcd5b5c99"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Cem-Parques Y Plazas]]></text>
			</staticText>
			<staticText>
				<reportElement x="284" y="3" width="100" height="14" uuid="c08d17de-e4ad-4ecc-854a-b0467f5654e0"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Terreno]]></text>
			</staticText>
			<staticText>
				<reportElement x="734" y="3" width="40" height="26" uuid="b7b99d74-369d-41f6-ab48-da73cbd5ef16"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="5" isBold="true"/>
				</textElement>
				<text><![CDATA[Cem-Alcantarillados Y Vias]]></text>
			</staticText>
			<staticText>
				<reportElement x="132" y="15" width="152" height="14" uuid="f5fdd516-edcc-4d64-98ae-16f3a3f2a916"/>
				<textElement verticalAlignment="Bottom">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Direccion]]></text>
			</staticText>
			<staticText>
				<reportElement x="484" y="3" width="50" height="26" uuid="d0f4d433-c38b-4b0d-ae23-30b6b43a8744"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Avaluo Total]]></text>
			</staticText>
			<staticText>
				<reportElement x="614" y="3" width="40" height="26" uuid="5887fa31-c620-43f3-97b8-5055a29837fb"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Sl. no Edif.]]></text>
			</staticText>
			<staticText>
				<reportElement x="384" y="17" width="50" height="12" uuid="b6f3be5e-ad37-45ab-89ca-9c4d21bcb235"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Area]]></text>
			</staticText>
			<staticText>
				<reportElement x="2" y="3" width="130" height="12" uuid="2ded98e3-7d7b-4433-b2ce-73de5957c67b"/>
				<textElement verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Clave Catastral]]></text>
			</staticText>
			<staticText>
				<reportElement x="42" y="15" width="90" height="14" uuid="7b9c3e6c-2835-4378-bc35-628d3adc43f0"/>
				<textElement verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[# Emision]]></text>
			</staticText>
			<staticText>
				<reportElement x="574" y="3" width="40" height="26" uuid="fe0190fe-a353-4953-bb18-5414d43ee257"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Administrativo]]></text>
			</staticText>
			<staticText>
				<reportElement x="284" y="17" width="50" height="12" uuid="fc3361ea-406d-48bc-9c32-624188441755"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Area]]></text>
			</staticText>
			<staticText>
				<reportElement x="534" y="3" width="40" height="26" uuid="aeff07fd-7189-4035-b850-ae6d73c9dfb7"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Imp. Predial]]></text>
			</staticText>
			<staticText>
				<reportElement x="434" y="17" width="50" height="12" uuid="4cce60e1-13a4-4f6f-8cc4-a1d45eb2cd95"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Avaluo]]></text>
			</staticText>
			<staticText>
				<reportElement x="654" y="3" width="40" height="26" uuid="62448068-114d-4e3a-b6d1-b02c15ea8021"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Bombero]]></text>
			</staticText>
			<staticText>
				<reportElement x="334" y="17" width="50" height="12" uuid="24c4aed4-fc3a-425a-86a7-83ab35f0e9cb"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Avaluo]]></text>
			</staticText>
			<staticText>
				<reportElement x="774" y="3" width="40" height="26" uuid="9d33f283-1ed5-4de0-9dcc-04b464097c7c"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Valor Titulo]]></text>
			</staticText>
			<staticText>
				<reportElement x="132" y="3" width="152" height="12" uuid="bacf95ee-a961-49a2-adc9-f44bce5b3f5d"/>
				<textElement verticalAlignment="Bottom">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Propietario]]></text>
			</staticText>
			<staticText>
				<reportElement x="384" y="3" width="100" height="14" uuid="741a6447-9e77-49d2-b4a3-32ae9cc1c80c"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Construccion]]></text>
			</staticText>
			<staticText>
				<reportElement x="2" y="15" width="40" height="14" uuid="d240f1f8-f5f5-4a77-9afc-6079f490cf84"/>
				<textElement verticalAlignment="Bottom">
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Cod. Corto]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="23" splitType="Stretch">
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="614" y="1" width="40" height="20" uuid="e51f0a34-984f-478c-9598-523c219d1f47"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{imp_solar_no_edificado}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="434" y="1" width="50" height="20" uuid="a88600ec-2743-4e2b-b8b5-39dfe34e7af4"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{avaluo_construccion}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="734" y="1" width="40" height="20" uuid="a7bae646-c40d-4304-a340-6c65b8d0a1c4"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cem_alcantarillados_vias}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="774" y="1" width="40" height="20" uuid="7ba5770a-ecc7-4f68-a84f-d1887c31fa1f"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{total_pago}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="2" y="10" width="40" height="11" uuid="8455f4ed-a17d-4dbb-b002-c05873e87b11"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{num_predio}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="2" y="1" width="130" height="11" uuid="9cab344d-9063-4365-9ee0-5f398a62bd24"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{clave_cat}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="2" y="20" width="812" height="1" uuid="8f61ac74-0ada-43c9-814a-83b35d64d162"/>
				<graphicElement>
					<pen lineStyle="Dotted"/>
				</graphicElement>
			</line>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="484" y="1" width="50" height="20" uuid="7ff0327a-4972-4a64-bde8-66c1bab3e372"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{avaluo_municipal}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="694" y="1" width="40" height="20" uuid="596780d0-cb06-4129-9b5d-ceb139481c89"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cem_parque_plazas}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="42" y="10" width="90" height="11" uuid="fe00020f-3677-45bc-918e-6d6623817caf"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{id_liquidacion}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="132" y="10" width="152" height="11" uuid="9827694a-12de-4e1c-af29-17123e346526"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ciudadela}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="654" y="1" width="40" height="20" uuid="53cbeeb6-7af5-48c9-90c7-362ad9ead4bc"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{bomberos}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="384" y="1" width="50" height="20" uuid="15c27682-78d5-4c07-a461-c681bd004f36"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{area_total_cons}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="132" y="1" width="152" height="11" uuid="2199e5fd-8ea8-4347-980a-03fc86919ae7"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{contribuyente}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="574" y="1" width="40" height="20" uuid="5bb148b7-b478-4a81-9eaa-8d9bfd1192d7"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ser_administrativos}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="534" y="1" width="40" height="20" uuid="99348ae4-2b81-45cd-bd80-629ae5b97a3b"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{imp_predial}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="334" y="1" width="50" height="20" uuid="673de890-3f06-4dfe-b3d8-3f068a8cb629"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{avaluo_solar}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="284" y="1" width="50" height="20" uuid="cb758a27-5a18-4f6a-9be0-4fcded57ce36"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{area_solar}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="9" splitType="Stretch">
			<textField pattern="#,##0.00">
				<reportElement x="654" y="0" width="40" height="8" uuid="efb11897-3983-458f-9465-f581a11be20c"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{SUM_R4}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="734" y="0" width="40" height="8" uuid="b74fc4d1-7303-4919-ac3e-56885011ed4b"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{SUM_R6}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="774" y="0" width="40" height="8" uuid="72c83d7c-9fb4-474c-83e4-ca2374c3348e"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{SUM_R7}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="534" y="0" width="40" height="8" uuid="025a5da0-1671-4f6a-9c9e-db0523a7d83a"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{SUM_R1}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="694" y="0" width="40" height="8" uuid="5467b909-8295-4c62-89ff-688cd8a689b6"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{SUM_R5}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="614" y="0" width="40" height="8" uuid="9e74cba5-511e-4b0f-b472-5f16c9f49c10"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{SUM_R3}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="574" y="0" width="40" height="8" uuid="4523d3ba-1e7d-4fb5-836d-d9cf9dc0e850"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{SUM_R2}]]></textFieldExpression>
			</textField>
		</band>
	</columnFooter>
</jasperReport>
