<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="abono_predio" pageWidth="276" pageHeight="907" whenNoDataType="AllSectionsNoDetail" columnWidth="276" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="64add516-fd62-4ab2-abf7-0ad6df3868a0">
	<property name="ireport.zoom" value="3.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="id_liquidacion" class="java.lang.Long">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="num_comprobante" class="java.lang.Long"/>
	<queryString>
		<![CDATA[SELECT
     ren_pago."fecha_pago" AS ren_pago_fecha_pago,
     ren_pago."valor" AS ren_pago_valor,
     ren_pago."cajero" AS ren_pago_cajero,
     ren_pago."num_cajero" AS ren_pago_num_cajero,
     ren_liquidacion."total_pago" AS ren_liquidacion_total_pago,
     ren_liquidacion."total_adicionales" AS ren_liquidacion_total_adicionales,
     ren_pago."descuento" AS ren_pago_descuento,
     ren_pago."recargo" AS ren_pago_recargo,
     ren_pago."interes" AS ren_pago_interes,
     ren_pago.num_comprobante AS ren_pago_num_comprobante,
     ren_liquidacion."num_comprobante" AS ren_liquidacion_num_comprobante,
     ren_liquidacion."saldo" AS ren_liquidacion_saldo
FROM
     "financiero"."ren_liquidacion" ren_liquidacion LEFT OUTER JOIN "financiero"."ren_pago" ren_pago ON ren_liquidacion."id" = ren_pago."liquidacion"
WHERE
     ren_pago."estado" = true
 AND ren_pago."liquidacion" = $P{id_liquidacion}
ORDER BY ren_pago.num_comprobante ASC]]>
	</queryString>
	<field name="ren_pago_fecha_pago" class="java.sql.Timestamp"/>
	<field name="ren_pago_valor" class="java.math.BigDecimal"/>
	<field name="ren_pago_cajero" class="java.lang.Long"/>
	<field name="ren_pago_num_cajero" class="java.lang.String"/>
	<field name="ren_liquidacion_total_pago" class="java.math.BigDecimal"/>
	<field name="ren_liquidacion_total_adicionales" class="java.math.BigDecimal"/>
	<field name="ren_pago_descuento" class="java.math.BigDecimal"/>
	<field name="ren_pago_recargo" class="java.math.BigDecimal"/>
	<field name="ren_pago_interes" class="java.math.BigDecimal"/>
	<field name="ren_pago_num_comprobante" class="java.lang.Long"/>
	<field name="ren_liquidacion_num_comprobante" class="java.lang.Long"/>
	<field name="ren_liquidacion_saldo" class="java.math.BigDecimal"/>
	<variable name="ren_pago_num_comprobante_1" class="java.lang.Integer" resetType="Column" calculation="Count">
		<variableExpression><![CDATA[$F{ren_pago_num_comprobante}]]></variableExpression>
	</variable>
	<variable name="adicional" class="java.math.BigDecimal" resetType="Column">
		<variableExpression><![CDATA[( $V{ren_pago_num_comprobante_1} == 1?
$F{ren_liquidacion_total_pago}
:
$V{saldo_actual})]]></variableExpression>
		<initialValueExpression><![CDATA[java.math.BigDecimal.ZERO]]></initialValueExpression>
	</variable>
	<variable name="total" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$V{adicional}.add(($F{ren_pago_interes} == null? java.math.BigDecimal.ZERO : $F{ren_pago_interes})).add(($F{ren_pago_recargo} == null? java.math.BigDecimal.ZERO : $F{ren_pago_recargo})).subtract(($F{ren_pago_descuento} == null? java.math.BigDecimal.ZERO : $F{ren_pago_descuento}))]]></variableExpression>
		<initialValueExpression><![CDATA[java.math.BigDecimal.ZERO]]></initialValueExpression>
	</variable>
	<variable name="saldo_actual" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$V{total}.subtract(($F{ren_pago_valor} == null? java.math.BigDecimal.ZERO : $F{ren_pago_valor}))]]></variableExpression>
		<initialValueExpression><![CDATA[java.math.BigDecimal.ZERO]]></initialValueExpression>
	</variable>
	<variable name="ren_pago_valor_1" class="java.math.BigDecimal" resetType="Column" calculation="Sum">
		<variableExpression><![CDATA[$F{ren_pago_valor}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<columnHeader>
		<band height="9">
			<staticText>
				<reportElement x="76" y="0" width="29" height="9" uuid="ef81e14e-6953-4cc4-8c38-dbaf88b9371f"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Adicional]]></text>
			</staticText>
			<staticText>
				<reportElement x="106" y="0" width="23" height="9" uuid="d79270b5-cafa-4fbb-82ce-15a6b703eba0"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Interes]]></text>
			</staticText>
			<staticText>
				<reportElement x="131" y="0" width="22" height="9" uuid="7ace74bf-f5e4-484c-8531-26cb7302a140"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Descto]]></text>
			</staticText>
			<staticText>
				<reportElement x="155" y="0" width="26" height="9" uuid="d5abf470-e3fa-4a16-8107-4fd6fe6ef1b2"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Recargo]]></text>
			</staticText>
			<staticText>
				<reportElement x="235" y="0" width="41" height="9" uuid="53387e9f-e9f6-40fe-838c-27f8013a6412"/>
				<textElement textAlignment="Right" verticalAlignment="Top">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Saldo Actual		]]></text>
			</staticText>
			<staticText>
				<reportElement x="183" y="0" width="24" height="9" uuid="59253cc8-3eb0-4fdc-9122-2943216280d6"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Total]]></text>
			</staticText>
			<staticText>
				<reportElement x="209" y="0" width="24" height="9" uuid="bda94cff-0e5a-45d2-bbc6-3c28e911c263"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Abono]]></text>
			</staticText>
			<staticText>
				<reportElement x="42" y="0" width="32" height="9" uuid="f9a5ee52-ff15-42d9-9320-ae732180f5e7"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha Pago]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="0" width="40" height="9" uuid="b5205d2b-e23e-43ee-b10f-dce5dc0916bf"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[C. Ing.]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="9">
			<textField pattern="dd/MM/yyyy">
				<reportElement x="42" y="0" width="32" height="9" uuid="11a2b07d-dfb4-4fd9-ab4b-73b5705ce9f1"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ren_pago_fecha_pago}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="106" y="0" width="23" height="9" uuid="2a481230-7ded-4f77-b651-afaa90a42530"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ren_pago_interes}==null?"0.00":$F{ren_pago_interes}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="155" y="0" width="26" height="9" uuid="aeb1dd92-c99d-4d73-b8ee-3dd541ccb40e"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{ren_pago_recargo} == null)? "0.00" : $F{ren_pago_recargo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="76" y="0" width="29" height="9" uuid="ccba4f08-6842-4002-bbd3-5ea70e360c87"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{adicional}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="131" y="0" width="22" height="9" uuid="dac9bfb1-1f76-420d-89fc-e4aff6493ae8"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ren_pago_descuento}==null?"0.00":$F{ren_pago_descuento}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="235" y="0" width="41" height="9" uuid="f74184d0-d11e-4a2c-a0f3-891bb9db11f0"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{saldo_actual}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="183" y="0" width="24" height="9" uuid="c1930e30-f89e-4c29-8e48-d04097a3413d"/>
				<textElement textAlignment="Right" verticalAlignment="Top">
					<font size="6" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{total}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="209" y="0" width="24" height="9" uuid="4b893dcf-f6f9-4cc1-ac25-009f7e22d92a"/>
				<textElement textAlignment="Right">
					<font size="6" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ren_pago_valor}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1" y="0" width="14" height="9" uuid="cf0ab6e5-444e-4052-8bfa-7258fdd49f23"/>
				<textElement>
					<font size="6" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{ren_pago_num_comprobante_1}]]></textFieldExpression>
			</textField>
			<textField pattern="###0.00">
				<reportElement x="15" y="0" width="25" height="9" uuid="eef41bdc-6732-4e85-ab11-fd4f1825a0dc"/>
				<textElement>
					<font size="6" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ren_pago_num_comprobante}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
