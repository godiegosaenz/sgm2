<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="carteraVencidaRural" language="groovy" pageWidth="1600" pageHeight="842" columnWidth="1560" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="a5ef91e0-182e-4fd7-ac74-e7459f6e83fa">
	<property name="ireport.zoom" value="0.75"/>
	<property name="ireport.x" value="303"/>
	<property name="ireport.y" value="0"/>
	<parameter name="REG_CATASTRAL" class="java.lang.String"/>
	<parameter name="ID_PREDIAL" class="java.lang.Integer"/>
	<parameter name="PARROQUIA" class="java.lang.Long"/>
	<queryString>
		<![CDATA[SELECT p.num_predio_rustico,l.anio,p.reg_catastral, p.id_predial,pa.descripcion as parroquia, CASE WHEN l.comprador IS NULL THEN l.nombre_comprador ELSE upper(CASE e.es_persona WHEN TRUE THEN TRIM(COALESCE(e.nombres, '') || ' ' || COALESCE(e.apellidos, '')) ELSE TRIM(e.razon_social) END) END as contribuyente, dl1.valor - dl1.valor_recaudado as predial,
COALESCE(dl2.valor - dl2.valor_recaudado, 0.00) as salud,
COALESCE(dl3.valor - dl3.valor_recaudado, 0.00) as municipal,
COALESCE(dl4.valor - dl4.valor_recaudado, 0.00) as cantonal,
dl5.valor - dl5.valor_recaudado as bombero,l.fecha_ingreso,l.num_liquidacion,l.avaluo_municipal, p.sitio
FROM sgm_financiero.ren_liquidacion l
INNER JOIN sgm_app.cat_predio_rustico p ON (l.predio_rustico=p.id)
INNER JOIN sgm_app.cat_parroquia pa ON (p.parroquia=pa.id)
LEFT OUTER JOIN sgm_app.cat_ente e ON (l.comprador=e.id)
LEFT OUTER JOIN sgm_financiero.ren_det_liquidacion  dl1 ON (dl1.liquidacion=l.id AND dl1.rubro=18)
LEFT OUTER JOIN sgm_financiero.ren_det_liquidacion  dl2 ON (dl2.liquidacion=l.id AND dl2.rubro=19)
LEFT OUTER JOIN sgm_financiero.ren_det_liquidacion  dl3 ON (dl3.liquidacion=l.id AND dl3.rubro=20)
LEFT OUTER JOIN sgm_financiero.ren_det_liquidacion  dl4 ON (dl4.liquidacion=l.id AND dl4.rubro=22)
LEFT OUTER JOIN sgm_financiero.ren_det_liquidacion  dl5 ON (dl5.liquidacion=l.id AND dl5.rubro=21)
WHERE l.tipo_liquidacion=7 AND l.estado_liquidacion=2
AND (CASE WHEN $P{PARROQUIA} IS NOT NULL THEN p.parroquia= $P{PARROQUIA} ELSE TRUE END)
AND (CASE WHEN $P{REG_CATASTRAL} IS NOT NULL THEN p.reg_catastral ILIKE $P{REG_CATASTRAL} ELSE TRUE END)
AND (CASE WHEN $P{ID_PREDIAL} IS NOT NULL THEN p.id_predial = $P{ID_PREDIAL} ELSE TRUE END)
ORDER BY p.num_predio_rustico, l.anio]]>
	</queryString>
	<field name="num_predio_rustico" class="java.lang.Long"/>
	<field name="anio" class="java.lang.Integer"/>
	<field name="reg_catastral" class="java.lang.String"/>
	<field name="id_predial" class="java.lang.Long"/>
	<field name="parroquia" class="java.lang.String"/>
	<field name="contribuyente" class="java.lang.String"/>
	<field name="predial" class="java.math.BigDecimal"/>
	<field name="salud" class="java.math.BigDecimal"/>
	<field name="municipal" class="java.math.BigDecimal"/>
	<field name="cantonal" class="java.math.BigDecimal"/>
	<field name="bombero" class="java.math.BigDecimal"/>
	<field name="fecha_ingreso" class="java.sql.Timestamp"/>
	<field name="num_liquidacion" class="java.lang.Long"/>
	<field name="avaluo_municipal" class="java.math.BigDecimal"/>
	<field name="sitio" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="20" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="97" height="20" uuid="cbefbb99-9631-479b-acf3-5ce47b27fb60"/>
				<text><![CDATA[CODIGO PREDIO]]></text>
			</staticText>
			<staticText>
				<reportElement x="97" y="0" width="49" height="20" uuid="3b8fe8e0-d38f-431f-9436-9ba424608b8b"/>
				<text><![CDATA[AÃ‘O]]></text>
			</staticText>
			<staticText>
				<reportElement x="146" y="0" width="131" height="20" uuid="7b477d83-b8ab-436e-9ecc-845339688b27"/>
				<text><![CDATA[REGISTRO CATASTRAL]]></text>
			</staticText>
			<staticText>
				<reportElement x="277" y="0" width="74" height="20" uuid="d2ddcb2c-bd09-4030-b1e0-4d2b81ebd24f"/>
				<text><![CDATA[ID PREDIAL]]></text>
			</staticText>
			<staticText>
				<reportElement x="351" y="0" width="159" height="20" uuid="3f696bf1-cfea-40e0-ab0f-79854140b577"/>
				<text><![CDATA[PARROQUIA]]></text>
			</staticText>
			<staticText>
				<reportElement x="510" y="0" width="142" height="20" uuid="a51f4698-27f7-43e5-832c-4d0a4309292e"/>
				<text><![CDATA[CONTRIBUYENTE]]></text>
			</staticText>
			<staticText>
				<reportElement x="652" y="0" width="80" height="20" uuid="6fb0d158-47a2-4fbf-be9a-4f413f2e963d"/>
				<text><![CDATA[IMP PREDIAL]]></text>
			</staticText>
			<staticText>
				<reportElement x="732" y="0" width="80" height="20" uuid="13b76276-aa9c-433a-9ecd-95cf754fdffd"/>
				<text><![CDATA[SALUD]]></text>
			</staticText>
			<staticText>
				<reportElement x="812" y="0" width="80" height="20" uuid="552b16d6-27ce-4028-9641-681531895502"/>
				<text><![CDATA[IMP MUNICIPAL]]></text>
			</staticText>
			<staticText>
				<reportElement x="892" y="0" width="80" height="20" uuid="6cf9beda-30d8-42fc-b886-50584153b73f"/>
				<text><![CDATA[CANTONAL]]></text>
			</staticText>
			<staticText>
				<reportElement x="972" y="0" width="80" height="20" uuid="e82bbe85-79ee-43e3-887b-24ab7bb727fa"/>
				<text><![CDATA[BOMBEROS]]></text>
			</staticText>
			<staticText>
				<reportElement x="1052" y="0" width="80" height="20" uuid="ce84c22b-c6a7-41ba-8710-aec12e70b5de"/>
				<text><![CDATA[FECHA]]></text>
			</staticText>
			<staticText>
				<reportElement x="1132" y="0" width="80" height="20" uuid="bda7c738-e0c8-4dc9-9651-9303f6885d03"/>
				<text><![CDATA[TITULO]]></text>
			</staticText>
			<staticText>
				<reportElement x="1212" y="0" width="100" height="20" uuid="a9c4ba17-0af1-446c-8ec1-154ed1da82dc"/>
				<text><![CDATA[AVALUO]]></text>
			</staticText>
			<staticText>
				<reportElement x="1312" y="0" width="248" height="20" uuid="fb11a89f-84f7-46bd-abe9-68a41d195462"/>
				<text><![CDATA[SITIO]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="35" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="20" splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="17" splitType="Stretch">
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="0" width="97" height="15" uuid="78788ce5-6828-4f54-a648-fb3438b5873c"/>
				<textFieldExpression><![CDATA[$F{num_predio_rustico}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="97" y="0" width="49" height="15" uuid="42a95736-edd7-4a15-b631-a13f1d082fa5"/>
				<textFieldExpression><![CDATA[$F{anio}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="146" y="0" width="131" height="15" uuid="2804e415-3223-4c7a-9f94-a43aba110ee8"/>
				<textFieldExpression><![CDATA[$F{reg_catastral}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="277" y="0" width="74" height="15" uuid="f7c5e84f-6e9c-4a45-9840-350ce642553b"/>
				<textFieldExpression><![CDATA[$F{id_predial}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="351" y="0" width="159" height="15" uuid="7b34d3ce-6267-4f10-bb71-feb149137d7f"/>
				<textFieldExpression><![CDATA[$F{parroquia}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="510" y="0" width="142" height="15" uuid="a88a4085-b8b9-4a7a-9d82-22012bbf8f53"/>
				<textFieldExpression><![CDATA[$F{contribuyente}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="652" y="0" width="80" height="15" uuid="3468014f-6b4a-4efa-9f4a-b34fdbb9b4a8"/>
				<textFieldExpression><![CDATA[$F{predial}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="732" y="0" width="80" height="15" uuid="caf0d173-6bb9-499b-95ed-0e8acec26ad8"/>
				<textFieldExpression><![CDATA[$F{salud}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="812" y="0" width="80" height="15" uuid="46777d2b-ae5b-4af2-bc69-73056f05da18"/>
				<textFieldExpression><![CDATA[$F{municipal}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="892" y="0" width="80" height="15" uuid="f6769c1e-07b0-4807-bffd-fa9bffc59a91"/>
				<textFieldExpression><![CDATA[$F{cantonal}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="972" y="0" width="80" height="15" uuid="6d6a2e6e-3455-4058-a042-6f2ae96a3231"/>
				<textFieldExpression><![CDATA[$F{bombero}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="1052" y="0" width="80" height="15" uuid="4f75051c-2821-42ec-867c-94648535be4f"/>
				<textFieldExpression><![CDATA[$F{fecha_ingreso}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="1132" y="0" width="80" height="15" uuid="6bf4cbab-fa62-4d29-89c2-407b1fd309a6"/>
				<textFieldExpression><![CDATA[$F{num_liquidacion}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="1212" y="0" width="100" height="15" uuid="f96269cf-ba75-444e-ab85-91657f1d1865"/>
				<textFieldExpression><![CDATA[$F{avaluo_municipal}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="1312" y="0" width="248" height="15" uuid="381aa887-ff70-45c6-8fa6-c811b338e5dd"/>
				<textFieldExpression><![CDATA[$F{sitio}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
