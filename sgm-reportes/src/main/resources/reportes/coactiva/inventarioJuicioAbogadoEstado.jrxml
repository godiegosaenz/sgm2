<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="inventarioJuicioAbogadoEstado" language="groovy" pageWidth="842" pageHeight="595" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="10" uuid="1ec8bf16-f2b4-4f93-91cd-14dc2a0b5e47">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="LOGO" class="java.lang.String"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\origami-idea\\Documents\\NetBeansProjects\\SGM_ULTIMATE\\src\\main\\webapp\\reportes\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="USUARIO" class="java.lang.String"/>
	<parameter name="LOGO_FOOTER" class="java.lang.String"/>
	<parameter name="DESDE" class="java.util.Date"/>
	<parameter name="HASTA" class="java.util.Date"/>
	<parameter name="ABOGADOS" class="java.util.Collection"/>
	<parameter name="ES_PDF" class="java.lang.Boolean"/>
	<queryString>
		<![CDATA[SELECT a.detalle as abogado, j.numero_juicio||'-'||j.anio_juicio AS juicio, j.fecha_juicio, p.num_predio,
p.clave_cat as cod_predial,l.anio,
CASE WHEN l.comprador IS NULL THEN l.nombre_comprador ELSE upper(CASE e.es_persona WHEN TRUE THEN
TRIM(COALESCE(e.nombres,'')||' '||COALESCE(e.apellidos,''))ELSE TRIM(e.razon_social)END)END as contribuyente,
a.abreviatura,c.nombre,p.urb_mz||' ; '||p.urb_solarnew as direccion,l.total_pago,ej.descripcion,j.numero_juicio, j.anio_juicio
FROM sgm_financiero.coa_juicio j
INNER JOIN sgm_financiero.coa_estado_juicio ej ON (j.estado_juicio=ej.id)
INNER JOIN sgm_financiero.coa_juicio_predio jp ON (j.id=jp.juicio)
INNER JOIN sgm_financiero.coa_abogado a ON (jp.abogado_juicio=a.id)
INNER JOIN sgm_financiero.ren_liquidacion l ON (jp.liquidacion=l.id)
INNER JOIN sgm_app.cat_predio p ON (l.predio=p.id)
LEFT OUTER JOIN sgm_app.cat_ente e ON (l.comprador=e.id)
LEFT OUTER JOIN sgm_app.cat_ciudadela c ON (p.ciudadela=c.id)
WHERE j.estado=TRUE AND (j.fecha_ingreso::DATE BETWEEN $P{DESDE} AND $P{HASTA})
AND jp.estado=TRUE  AND $X{IN,jp.abogado_juicio,ABOGADOS}
ORDER BY a.detalle, j.numero_juicio ASC, j.anio_juicio ASC, p.num_predio ASC, l.anio ASC]]>
	</queryString>
	<field name="abogado" class="java.lang.String"/>
	<field name="juicio" class="java.lang.String"/>
	<field name="fecha_juicio" class="java.sql.Timestamp"/>
	<field name="num_predio" class="java.lang.Long"/>
	<field name="cod_predial" class="java.lang.String"/>
	<field name="anio" class="java.lang.Integer"/>
	<field name="contribuyente" class="java.lang.String"/>
	<field name="abreviatura" class="java.lang.String"/>
	<field name="nombre" class="java.lang.String"/>
	<field name="direccion" class="java.lang.String"/>
	<field name="total_pago" class="java.math.BigDecimal"/>
	<field name="descripcion" class="java.lang.String"/>
	<field name="numero_juicio" class="java.lang.Integer"/>
	<field name="anio_juicio" class="java.lang.Integer"/>
	<variable name="TOTAL_JUICIO" class="java.math.BigDecimal" resetType="Group" resetGroup="juicio" calculation="Sum">
		<variableExpression><![CDATA[$F{total_pago}]]></variableExpression>
	</variable>
	<variable name="CANT_JUICIOS" class="java.lang.Integer" calculation="DistinctCount">
		<variableExpression><![CDATA[$F{juicio}]]></variableExpression>
	</variable>
	<group name="abogado">
		<groupExpression><![CDATA[$F{abogado}]]></groupExpression>
		<groupHeader>
			<band height="20">
				<textField>
					<reportElement x="0" y="0" width="451" height="20" uuid="c242fe5e-da9d-4139-a7cb-ca267b117c52"/>
					<textElement>
						<font size="14" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{abogado}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="11"/>
		</groupFooter>
	</group>
	<group name="juicio">
		<groupExpression><![CDATA[$F{juicio}]]></groupExpression>
		<groupHeader>
			<band/>
		</groupHeader>
		<groupFooter>
			<band height="16">
				<textField pattern="¤ #,##0.00">
					<reportElement x="661" y="0" width="50" height="14" uuid="43f4f1bc-b9ee-4ca2-baba-a72d59da85cc"/>
					<textElement textAlignment="Right">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{TOTAL_JUICIO}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="561" y="0" width="100" height="14" uuid="8c47bc48-7c92-4df4-b3a1-1bb16970817f"/>
					<textElement textAlignment="Right">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[TOTAL>>]]></text>
				</staticText>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="70" splitType="Stretch">
			<subreport>
				<reportElement x="101" y="0" width="601" height="70" uuid="2f8437f7-a586-46e9-991a-6dce422dcebf"/>
				<subreportParameter name="LOGO">
					<subreportParameterExpression><![CDATA[$P{LOGO}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "titleReporte.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</title>
	<pageHeader>
		<band height="40" splitType="Stretch">
			<printWhenExpression><![CDATA[!$P{ES_PDF} ? $V{PAGE_NUMBER} == 1 ? true : false : true]]></printWhenExpression>
			<textField>
				<reportElement x="176" y="20" width="450" height="20" uuid="e873f3a1-c680-4b74-ad8d-f15602cb5e8c"/>
				<textElement textAlignment="Center">
					<font size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["DESDE:"+new SimpleDateFormat("dd/MM/yyyy").format($P{DESDE})+"       HASTA:"+new SimpleDateFormat("dd/MM/yyyy").format($P{HASTA})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="176" y="0" width="450" height="20" uuid="f35262b4-b3d1-4a2a-b296-b14081f66355"/>
				<textElement textAlignment="Center">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[INVENTARIO DE JUICIOS POR ABOGADO]]></text>
			</staticText>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="25" splitType="Stretch">
			<staticText>
				<reportElement x="1" y="0" width="50" height="25" uuid="231bd83a-58ff-4b9c-b47f-d4ec98a0dbaa"/>
				<textElement verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[NUMERO JUICIO]]></text>
			</staticText>
			<staticText>
				<reportElement x="51" y="0" width="50" height="25" uuid="58c89f96-0f40-411c-bfe9-acfaf821c12d"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[FECHA JUICIO]]></text>
			</staticText>
			<staticText>
				<reportElement x="101" y="0" width="40" height="25" uuid="4d2d599e-e164-40d0-a41b-e53cef936077"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[MAT. INMB.]]></text>
			</staticText>
			<staticText>
				<reportElement x="141" y="0" width="120" height="25" uuid="3e10c954-4217-41d5-b28d-12a0c668814a"/>
				<textElement verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[CODIGO PREDIAL]]></text>
			</staticText>
			<staticText>
				<reportElement x="261" y="0" width="40" height="25" uuid="10e59f5e-d91c-4dab-9aef-a70a23ffbed7"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[AÑO DEUDA]]></text>
			</staticText>
			<staticText>
				<reportElement x="301" y="0" width="160" height="25" uuid="40acc2f7-084e-4391-8f4f-f84550547661"/>
				<textElement verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[PROPIETARIO]]></text>
			</staticText>
			<staticText>
				<reportElement x="461" y="0" width="50" height="25" uuid="3fb0c1d3-9d57-4586-92a4-d8f77d06df59"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[AB.]]></text>
			</staticText>
			<staticText>
				<reportElement x="511" y="13" width="100" height="12" uuid="c67625a8-c2c0-487e-8da6-158642ae1ac5"/>
				<textElement verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[CIUDADELA]]></text>
			</staticText>
			<staticText>
				<reportElement x="611" y="13" width="50" height="12" uuid="0a4967a6-4e87-4dba-ba00-31670c53337a"/>
				<textElement verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Mz ; Sl]]></text>
			</staticText>
			<staticText>
				<reportElement x="661" y="0" width="50" height="25" uuid="c8d367a8-5fd0-4e76-a07e-0d7faad4c801"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[VALOR DEUDA]]></text>
			</staticText>
			<staticText>
				<reportElement x="716" y="0" width="86" height="25" uuid="809c7722-bf3a-4272-8fbb-013fc0eb6a82"/>
				<textElement verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[ESTADO]]></text>
			</staticText>
			<staticText>
				<reportElement x="511" y="0" width="150" height="13" uuid="85f70312-60ed-4e8e-8186-9186efd251fb"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[DIRECCION]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="12" splitType="Stretch">
			<textField>
				<reportElement x="1" y="0" width="27" height="12" uuid="fed7b8ee-c3d6-4726-85d1-155bc1077182"/>
				<textElement verticalAlignment="Bottom">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{numero_juicio}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="51" y="0" width="50" height="12" uuid="0859535e-86b6-42c9-bdfa-61d1f68cb6c7"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_juicio}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="101" y="0" width="40" height="12" uuid="5671571e-221a-4ae5-aad0-ebc383554b44"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{num_predio}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="141" y="0" width="120" height="12" uuid="8231a76a-84eb-428a-84fb-3ef6f9249997"/>
				<textElement verticalAlignment="Bottom">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cod_predial}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="261" y="0" width="30" height="12" uuid="50629b6a-493c-4258-9bb1-a585bbe80ef9"/>
				<textElement verticalAlignment="Bottom">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{anio}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="291" y="0" width="170" height="12" uuid="1b512000-eed1-495f-915f-a39aa80e57a4"/>
				<textElement verticalAlignment="Bottom">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{contribuyente}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="461" y="0" width="50" height="12" uuid="bf09dae8-d7aa-400e-a294-c1ab55411e60"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{abreviatura}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="511" y="0" width="100" height="12" uuid="9051c346-cf5e-4967-88ed-703b2ef79bb3"/>
				<textElement verticalAlignment="Bottom">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombre}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="611" y="0" width="50" height="12" uuid="54f65e41-a941-424a-915d-539d81a9f850"/>
				<textElement verticalAlignment="Bottom">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{direccion}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00">
				<reportElement x="661" y="0" width="50" height="12" uuid="2eed9bc6-cd2c-452d-abec-70fa0b588043"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{total_pago}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="716" y="0" width="86" height="12" uuid="60ae48e8-5ede-4b77-b3e7-640c6906a0a1"/>
				<textElement verticalAlignment="Bottom">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{descripcion}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="28" y="0" width="23" height="12" uuid="5b1c10f6-a257-4dc7-bc5b-cfb4e19c23ee"/>
				<textElement verticalAlignment="Bottom">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{anio_juicio}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="41" splitType="Stretch">
			<printWhenExpression><![CDATA[$P{ES_PDF}]]></printWhenExpression>
			<line>
				<reportElement x="0" y="0" width="802" height="1" uuid="5d6e2281-f2ef-4432-aed7-af2f98e5d41d"/>
			</line>
			<image>
				<reportElement x="0" y="1" width="100" height="40" uuid="0daae24a-ce01-42d4-870c-a749abcfbd54"/>
				<imageExpression><![CDATA[$P{LOGO_FOOTER}]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="100" y="1" width="75" height="20" uuid="c1b0b362-6432-46cc-ae6c-e5c2b17d7069"/>
				<textElement textAlignment="Right">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[USUARIO:]]></text>
			</staticText>
			<textField>
				<reportElement x="179" y="1" width="100" height="20" uuid="bcbb59a5-5686-4680-b483-7e169907232d"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{USUARIO}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy HH:mm">
				<reportElement x="351" y="1" width="160" height="20" uuid="8fd3baee-6320-463d-906a-6578ec92207a"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="682" y="1" width="80" height="20" uuid="60b4b463-e18e-4aaa-9255-30e38f59cd85"/>
				<textElement textAlignment="Right">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Pag. "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="762" y="1" width="40" height="20" uuid="6747b903-e60a-4c71-bb5f-65cf6fa1dc87"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="561" y="0" width="150" height="20" uuid="21cb1770-d3db-412d-a1f0-79bec44f199f"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Total Nº de Juicios: "+$V{CANT_JUICIOS}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
