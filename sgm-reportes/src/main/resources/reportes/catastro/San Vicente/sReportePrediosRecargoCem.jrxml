<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="sReportePrediosRecargoCem" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="20e56fe9-e9d4-40e2-abb3-ef7cd1a78bf6">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="227"/>
	<property name="ireport.y" value="0"/>
	<parameter name="LOGO" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="USUARIO" class="java.lang.String"/>
	<parameter name="ANIO" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
	cp.clave_cat clave_catastral, cp.num_predio matricula_inmobiliaria, trim(sgm_app.propietarios_por_predio(cp.id)) propietarios,
	barrio.nombre barrio,  (cp.calle || ' ' || cp.calle_s) calles,
	(	select
			case when count(*) = 0 then 'NO' else 'SI' end
		from sgm_financiero.ren_det_liquidacion det
		inner join sgm_financiero.ren_liquidacion liq on det.liquidacion = liq.id
		where
	 		anio = $P{ANIO} and
	 		liq.predio = cp.id and det.rubro = 641) alcantarillado,

	(	select
			case when count(*) = 0 then 'NO' else 'SI' end
		from sgm_financiero.ren_det_liquidacion det
		inner join sgm_financiero.ren_liquidacion liq on det.liquidacion = liq.id
		where
	 		anio = $P{ANIO} and
	 		liq.predio = cp.id and det.rubro = 640) parques_plaza,

	(	select
			case when count(*) = 0 then 'NO' else 'SI' end
		from sgm_financiero.ren_det_liquidacion det
		inner join sgm_financiero.ren_liquidacion liq on det.liquidacion = liq.id
		where
	 		anio = $P{ANIO} and
	 		liq.predio = cp.id and det.rubro = 706) mercado,

	(	select
			case when count(*) = 0 then 'NO' else 'SI' end
		from sgm_financiero.ren_det_liquidacion det
		inner join sgm_financiero.ren_liquidacion liq on det.liquidacion = liq.id
		where
	 		anio = $P{ANIO} and
	 		liq.predio = cp.id and det.rubro = 707) alc_sta_marta,

	(	select
			case when count(*) = 0 then 'NO' else 'SI' end
		from sgm_financiero.ren_det_liquidacion det
		inner join sgm_financiero.ren_liquidacion liq on det.liquidacion = liq.id
		where
	 		anio = $P{ANIO} and
	 		liq.predio = cp.id and det.rubro = 705) areas_recreacional,

	(	select
			case when count(*) = 0 then 'NO' else 'SI' end
		from sgm_financiero.ren_det_liquidacion det
		inner join sgm_financiero.ren_liquidacion liq on det.liquidacion = liq.id
		where
	 		anio = $P{ANIO} and
	 		liq.predio = cp.id and det.rubro = 708) desmonte,

	(	select
			case when count(*) = 0 then 'NO' else 'SI' end
		from sgm_financiero.ren_det_liquidacion det
		inner join sgm_financiero.ren_liquidacion liq on det.liquidacion = liq.id
		where
	 		anio = $P{ANIO} and
	 		liq.predio = cp.id and det.rubro = 4) no_edificado



FROM sgm_app.cat_predio cp
LEFT OUTER JOIN sgm_app.cat_ciudadela barrio ON barrio.id = cp.ciudadela
LEFT OUTER JOIN sgm_app.cat_propiedad_item tenencia ON tenencia.id = cp.propiedad
WHERE cp.estado = 'A']]>
	</queryString>
	<field name="clave_catastral" class="java.lang.String"/>
	<field name="matricula_inmobiliaria" class="java.lang.Long"/>
	<field name="propietarios" class="java.lang.String"/>
	<field name="barrio" class="java.lang.String"/>
	<field name="calles" class="java.lang.String"/>
	<field name="alcantarillado" class="java.lang.String"/>
	<field name="parques_plaza" class="java.lang.String"/>
	<field name="mercado" class="java.lang.String"/>
	<field name="alc_sta_marta" class="java.lang.String"/>
	<field name="areas_recreacional" class="java.lang.String"/>
	<field name="desmonte" class="java.lang.String"/>
	<field name="no_edificado" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="121" splitType="Immediate">
			<image hAlign="Center">
				<reportElement x="2" y="0" width="71" height="62" uuid="401de52c-11cf-4e14-a811-2488e4fcf26e"/>
				<imageExpression><![CDATA[$P{LOGO}]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="73" y="0" width="429" height="62" uuid="4ca6d95f-0982-4b63-aa62-b1dc0731e0cc"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="17" isBold="true"/>
				</textElement>
				<text><![CDATA[Gobierno Autónomo Descentralizado Municipal del Cantón San Vicente]]></text>
			</staticText>
			<textField>
				<reportElement x="73" y="62" width="429" height="18" uuid="f1d049f4-8235-4edb-ba10-3a2396c533c9"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["PREDIOS SEGÚN MEJORAS Y RECARGOS"]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy h:mm a">
				<reportElement x="301" y="80" width="150" height="15" uuid="252f27e9-a0f3-42ed-8de2-6589aaae79bc"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="170" y="80" width="131" height="15" uuid="5b71abe7-00a8-4a47-964b-52242b3f4304"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Usuario: "+$P{USUARIO}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="2" y="101" width="71" height="20" isPrintWhenDetailOverflows="true" uuid="3f970756-9d3e-4cd5-9fe0-a4f10d013587"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Clave Catastral]]></text>
			</staticText>
			<staticText>
				<reportElement x="73" y="101" width="53" height="20" isPrintWhenDetailOverflows="true" uuid="12ec72ff-1abb-4080-a033-c3f799f73cf3"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Matricula Inmobiliaria]]></text>
			</staticText>
			<staticText>
				<reportElement x="126" y="101" width="120" height="20" isPrintWhenDetailOverflows="true" uuid="431aa7f1-65b5-4791-88d1-66e815de7fd3"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Propietarios]]></text>
			</staticText>
			<staticText>
				<reportElement x="246" y="101" width="44" height="20" isPrintWhenDetailOverflows="true" uuid="cb4b4ee9-619b-4794-879c-7f4cacab16ac"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="5" isBold="true"/>
				</textElement>
				<text><![CDATA[Solar no Edificado]]></text>
			</staticText>
			<staticText>
				<reportElement x="511" y="101" width="44" height="20" isPrintWhenDetailOverflows="true" uuid="ec9aa6cd-2962-46a1-91b6-502c3917b682"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="5" isBold="true"/>
				</textElement>
				<text><![CDATA[Area Recreativa]]></text>
			</staticText>
			<staticText>
				<reportElement x="379" y="101" width="44" height="20" isPrintWhenDetailOverflows="true" uuid="682d0803-55b7-404e-a4ba-35d142bbaab7"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="5" isBold="true"/>
				</textElement>
				<text><![CDATA[Desmonte]]></text>
			</staticText>
			<staticText>
				<reportElement x="290" y="101" width="44" height="20" isPrintWhenDetailOverflows="true" uuid="2e42b488-69e0-4300-b99e-5beddeb75168"/>
				<box topPadding="3" leftPadding="3" bottomPadding="3" rightPadding="3">
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="5" isBold="true"/>
				</textElement>
				<text><![CDATA[Alcantarillado]]></text>
			</staticText>
			<staticText>
				<reportElement x="335" y="101" width="44" height="20" isPrintWhenDetailOverflows="true" uuid="616ec5a2-cfed-420d-a171-91b1275aba2d"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="5" isBold="true"/>
				</textElement>
				<text><![CDATA[Parques/ Plazas]]></text>
			</staticText>
			<staticText>
				<reportElement x="423" y="101" width="44" height="20" isPrintWhenDetailOverflows="true" uuid="c7061231-630e-4061-84a9-57aabd6552e4"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="5" isBold="true"/>
				</textElement>
				<text><![CDATA[Mercado]]></text>
			</staticText>
			<staticText>
				<reportElement x="467" y="101" width="44" height="20" isPrintWhenDetailOverflows="true" uuid="56c02c33-7427-46ee-acf3-a1253065887a"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="5" isBold="true"/>
				</textElement>
				<text><![CDATA[Alc.Sta. Marta ]]></text>
			</staticText>
		</band>
	</title>
	<detail>
		<band height="20">
			<textField>
				<reportElement x="2" y="0" width="71" height="20" isPrintWhenDetailOverflows="true" uuid="a8860981-248d-48ec-9629-23e3f372f87c"/>
				<box>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{clave_catastral}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="73" y="0" width="53" height="20" isPrintWhenDetailOverflows="true" uuid="3237a75d-778a-4f2a-9350-664e6bd5fec5"/>
				<box>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{matricula_inmobiliaria}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="126" y="0" width="120" height="20" isPrintWhenDetailOverflows="true" uuid="122d023f-f503-4618-89f5-420b3c047728"/>
				<box topPadding="2" leftPadding="2" bottomPadding="2" rightPadding="2">
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Justified" verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{propietarios}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="246" y="0" width="44" height="20" isPrintWhenDetailOverflows="true" uuid="e0278db5-cb49-4559-931b-43f3e92d0841"/>
				<box>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{no_edificado}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="511" y="0" width="44" height="20" isPrintWhenDetailOverflows="true" uuid="f1c949a2-037a-4d3f-a1af-d0f0d297043d"/>
				<box>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{areas_recreacional}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="379" y="0" width="44" height="20" isPrintWhenDetailOverflows="true" uuid="d007ea50-7404-4ae6-baca-567c27060381"/>
				<box>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{desmonte}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="290" y="0" width="44" height="20" isPrintWhenDetailOverflows="true" uuid="2e3a51a8-a628-4d8f-abed-2c4a69aa608f"/>
				<box>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{alcantarillado}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="335" y="0" width="44" height="20" isPrintWhenDetailOverflows="true" uuid="d7f83f62-e2ae-48fc-8a7f-98fef5e9828f"/>
				<box>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{parques_plaza}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="423" y="0" width="44" height="20" isPrintWhenDetailOverflows="true" uuid="d3225b48-1610-4e89-89dc-f072fe5da239"/>
				<box>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{mercado}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="467" y="0" width="44" height="20" isPrintWhenDetailOverflows="true" uuid="568ff80b-f9d7-4fca-a3a5-5711be535567"/>
				<box>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{alc_sta_marta}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
