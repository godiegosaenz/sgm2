<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Reporte_Recaudacion_Especies_V" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="d7c4eb53-42df-4fd3-a262-76606e67640c">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="DESDE" class="java.lang.String"/>
	<parameter name="HASTA" class="java.lang.String"/>
	<parameter name="LOGO" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\supergold\\Documents\\NetBeansProjects\\sgm\\src\\main\\webapp\\css\\homeIconsImages\\logo.jpg"]]></defaultValueExpression>
	</parameter>
	<parameter name="Usuario" class="java.lang.String"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\supergold\\Documents\\NetBeansProjects\\sgm\\src\\main\\webapp\\reportes\\Emision\\"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
     ren_pago.num_comprobante AS ren_pago_num_comprobante,
     to_char(ren_pago.fecha_pago,'DD/MM/YYYY') AS ren_pago_fecha_pago,
     ren_pago.valor AS ren_pago_valor,
     ren_liquidacion.comprador AS ren_liquidacion_comprador,
     cat_ente."ci_ruc" AS cat_ente_ci_ruc,
     cat_ente."nombres" AS cat_ente_nombres,
     cat_ente."apellidos" AS cat_ente_apellidos,
     cat_ente."es_persona" AS cat_ente_es_persona,
     cat_ente."razon_social" AS cat_ente_razon_social,
     acl_user.usuario AS acl_user_usuario,
     ren_tipo_liquidacion.nombre_titulo AS ren_tipo_liquidacion_nombre_titulo,
     ren_det_liquidacion."valor" AS ren_det_liquidacion_valor,
     ren_det_liquidacion.cantidad AS ren_det_liquidacion_cantidad,
     ren_det_liquidacion.desde AS ren_det_liquidacion_desde,
     ren_det_liquidacion.hasta AS ren_det_liquidacion_hasta,
     ren_rubros_liquidacion.descripcion AS ren_rubros_liquidacion_descripcion,
    (SELECT razon_social from sgm_application.empresa) AS nombre_empresa

FROM
sgm_financiero."ren_tipo_liquidacion" ren_tipo_liquidacion RIGHT OUTER JOIN sgm_financiero."ren_liquidacion" ren_liquidacion ON ren_tipo_liquidacion."id" = ren_liquidacion."tipo_liquidacion"
LEFT OUTER JOIN sgm_financiero."ren_pago" ren_pago ON ren_pago.liquidacion = ren_liquidacion."id"
  LEFT OUTER JOIN sgm_app."cat_ente" cat_ente ON ren_liquidacion."comprador" = cat_ente."id"
  LEFT OUTER JOIN sgm_app.acl_user acl_user ON ren_pago.cajero = acl_user.id
  LEFT OUTER JOIN sgm_financiero."ren_det_liquidacion" ren_det_liquidacion ON ren_liquidacion."id" = ren_det_liquidacion."rubro"
LEFT OUTER JOIN sgm_financiero."ren_rubros_liquidacion" ren_rubros_liquidacion ON ren_rubros_liquidacion."id" = ren_det_liquidacion."rubro"
 WHERE
      ren_liquidacion."estado_liquidacion" = 3
 AND to_char(ren_pago.fecha_pago,'DD/MM/YYYY') BETWEEN $P{DESDE} AND $P{HASTA}
 AND ren_tipo_liquidacion.codigo_titulo_reporte = 192
 OR  ren_tipo_liquidacion.codigo_titulo_reporte = 182
 OR  ren_tipo_liquidacion.codigo_titulo_reporte = 183
 OR  ren_tipo_liquidacion.codigo_titulo_reporte = 125
 OR  ren_tipo_liquidacion.codigo_titulo_reporte = 200
order by
to_char(ren_pago.fecha_pago,'DD/MM/YYYY')desc]]>
	</queryString>
	<field name="ren_pago_num_comprobante" class="java.lang.Long"/>
	<field name="ren_pago_fecha_pago" class="java.lang.String"/>
	<field name="ren_pago_valor" class="java.math.BigDecimal"/>
	<field name="ren_liquidacion_comprador" class="java.lang.Long"/>
	<field name="cat_ente_ci_ruc" class="java.lang.String"/>
	<field name="cat_ente_nombres" class="java.lang.String"/>
	<field name="cat_ente_apellidos" class="java.lang.String"/>
	<field name="cat_ente_es_persona" class="java.lang.Boolean"/>
	<field name="cat_ente_razon_social" class="java.lang.String"/>
	<field name="acl_user_usuario" class="java.lang.String"/>
	<field name="ren_tipo_liquidacion_nombre_titulo" class="java.lang.String"/>
	<field name="ren_det_liquidacion_valor" class="java.math.BigDecimal"/>
	<field name="ren_det_liquidacion_cantidad" class="java.lang.Integer"/>
	<field name="ren_det_liquidacion_desde" class="java.lang.Long"/>
	<field name="ren_det_liquidacion_hasta" class="java.lang.Long"/>
	<field name="ren_rubros_liquidacion_descripcion" class="java.lang.String"/>
	<field name="nombre_empresa" class="java.lang.String"/>
	<variable name="ren_det_liquidacion_valor_1" class="java.math.BigDecimal" resetType="Group" resetGroup="CAJERO" calculation="Sum">
		<variableExpression><![CDATA[$F{ren_det_liquidacion_valor}]]></variableExpression>
	</variable>
	<variable name="ren_det_liquidacion_valor_2" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ren_det_liquidacion_valor}]]></variableExpression>
	</variable>
	<group name="CAJERO">
		<groupExpression><![CDATA[$F{acl_user_usuario}]]></groupExpression>
		<groupHeader>
			<band height="12">
				<staticText>
					<reportElement x="1" y="0" width="65" height="12" uuid="d1d7ad43-f2cd-4c8f-b330-60c8d8f4195f"/>
					<textElement>
						<font size="9" isBold="true"/>
					</textElement>
					<text><![CDATA[CAJERO (a):]]></text>
				</staticText>
				<textField isBlankWhenNull="true">
					<reportElement x="66" y="0" width="112" height="12" uuid="a2395106-4d49-470a-8a8c-6f89fd9a5c33"/>
					<textElement>
						<font size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{acl_user_usuario}==null?"":$F{acl_user_usuario}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="51">
				<textField>
					<reportElement x="495" y="18" width="50" height="15" uuid="05f59bff-9f8b-403e-a5b5-282282c084e9"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{ren_det_liquidacion_valor_1}==null?"0.00":$V{ren_det_liquidacion_valor_1}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="391" y="18" width="100" height="15" uuid="0b72f22f-715b-4797-97e2-399c5e7dadb4"/>
					<textElement>
						<font size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{acl_user_usuario}==null?"":$F{acl_user_usuario}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="292" y="18" width="99" height="15" uuid="6aae8cbb-7f1c-46d3-8264-7367d5926fb9"/>
					<textElement>
						<font size="9" isBold="true"/>
					</textElement>
					<text><![CDATA[Total Cobrado por :]]></text>
				</staticText>
			</band>
		</groupFooter>
	</group>
	<group name="Descripcion">
		<groupExpression><![CDATA[$F{ren_rubros_liquidacion_descripcion}]]></groupExpression>
		<groupHeader>
			<band height="21">
				<textField isBlankWhenNull="true">
					<reportElement x="1" y="5" width="196" height="15" uuid="cd73b9a4-e3c9-4599-acbc-493156eb4185"/>
					<textElement>
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{ren_rubros_liquidacion_descripcion}==null?"":$F{ren_rubros_liquidacion_descripcion}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="266" y="5" width="55" height="15" uuid="02bc88e8-f644-4b0f-813d-cf90835b9aa4"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["# DESDE"]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="341" y="6" width="55" height="15" uuid="ca57aa67-fdaa-4db9-96ca-1ad645a09826"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["# HASTA"]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="417" y="5" width="55" height="15" uuid="2b2f0654-06d4-4858-80ac-9d486480d036"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Arial" size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["CANTIDAD"]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="495" y="5" width="50" height="15" uuid="9bbbdd4e-3337-4d2c-b8cd-6d580dc3f54f"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["TOTAL"]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="103" splitType="Stretch">
			<staticText>
				<reportElement x="138" y="52" width="363" height="20" uuid="e100b2cc-ddfb-4980-8e88-f6d690a5ea4a"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[RESUMEN DE RECAUDACION DE ESPECIES VALORADAS]]></text>
			</staticText>
			<image>
				<reportElement x="11" y="0" width="82" height="93" uuid="8f9ea5a3-11f6-4642-92cf-8113cb00fa69"/>
				<imageExpression><![CDATA[$P{LOGO}]]></imageExpression>
			</image>
			<textField isBlankWhenNull="true">
				<reportElement x="311" y="78" width="100" height="15" uuid="957b31a5-adde-42c6-bcba-b9f5fd388d74"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["HASTA: "+$P{HASTA}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="121" y="78" width="100" height="15" uuid="b343f5ad-dd11-4e01-9faa-f428035c9820"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["DESDE:"+ $P{DESDE}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement x="95" y="8" width="454" height="34" uuid="391c4f59-5ea0-4dac-9f59-5bdc1faf8ce3"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombre_empresa}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="12" splitType="Stretch">
			<textField isBlankWhenNull="true">
				<reportElement x="341" y="1" width="50" height="11" uuid="f76f9288-9047-43ac-9770-76fde479dada"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ren_det_liquidacion_hasta}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="267" y="1" width="50" height="11" uuid="88bd6a03-13aa-42da-8ea6-fbcf196c7727"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ren_det_liquidacion_desde}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="417" y="1" width="55" height="11" uuid="ed0007be-051f-4d89-838c-eecba6b82271"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ren_det_liquidacion_cantidad}==null?"0":$F{ren_det_liquidacion_cantidad}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="495" y="1" width="50" height="11" uuid="2d47a093-b3d8-4dea-8319-7d0128627848"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ren_det_liquidacion_valor}==null?"0.00":$F{ren_det_liquidacion_valor}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="1" y="1" width="42" height="11" uuid="cca8329f-81cc-486a-ac28-5cc5286697df"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ren_pago_num_comprobante}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="42" y="1" width="58" height="11" uuid="e95b29d3-6b5a-4b04-8821-f22fefd55f07"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ren_pago_fecha_pago}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="104" y="1" width="163" height="11" uuid="918d0cdd-0e95-4bc2-ba31-b961635d5c58"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cat_ente_es_persona}? ($F{cat_ente_apellidos} == null? "" : $F{cat_ente_apellidos}) + " " + ($F{cat_ente_nombres} == null? "" : $F{cat_ente_nombres}): ($F{cat_ente_razon_social} == null? "" : $F{cat_ente_razon_social})]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="50" splitType="Stretch">
			<textField isBlankWhenNull="true">
				<reportElement x="42" y="25" width="75" height="15" uuid="d6cfdc11-6de3-49c6-bfd9-486290c67a7b"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{Usuario}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="1" y="25" width="42" height="15" uuid="9bc1e882-1cb4-4506-a2af-5cf55537df2c"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Usuario:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="177" y="25" width="54" height="15" uuid="a24d7d68-dee4-47a4-9206-e7e83f06eade"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="143" y="25" width="35" height="15" uuid="86859e1b-da35-452b-879b-944a0775e0d3"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[FECHA:]]></text>
			</staticText>
			<textField>
				<reportElement x="241" y="25" width="80" height="15" uuid="99f8fc19-d21b-4f9e-85ff-fd5369ec4601"/>
				<textElement textAlignment="Right">
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Pagina "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report" isBlankWhenNull="true">
				<reportElement x="321" y="25" width="40" height="15" uuid="63fa1e86-4ab0-45cf-9497-d492e02f7982"/>
				<textElement textAlignment="Right">
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="HH:mm:ss" isBlankWhenNull="true">
				<reportElement x="472" y="25" width="64" height="15" uuid="66334cf2-e827-42b4-b7bd-0d22c8bbea32"/>
				<textElement textAlignment="Right">
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="435" y="25" width="37" height="15" uuid="5065b66a-574e-44e8-ad23-e00d788664a2"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[HORA:]]></text>
			</staticText>
		</band>
	</pageFooter>
	<summary>
		<band height="203" splitType="Stretch">
			<staticText>
				<reportElement x="4" y="31" width="100" height="12" uuid="e0bfc930-0365-43ca-a24b-adf1cb13222d"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Detalle Especies]]></text>
			</staticText>
			<staticText>
				<reportElement x="178" y="31" width="100" height="12" uuid="f72d88f4-2757-4ce3-b646-9f5c7fb52195"/>
				<textElement textAlignment="Right">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Valor Cobrado]]></text>
			</staticText>
			<rectangle>
				<reportElement x="0" y="43" width="292" height="108" uuid="a722cd3d-32b6-4191-9e6a-97eb31efbc5c"/>
			</rectangle>
			<subreport>
				<reportElement x="11" y="46" width="200" height="15" uuid="27c6809a-6a26-448b-9de7-0f2647e83472"/>
				<subreportParameter name="liquidacion">
					<subreportParameterExpression><![CDATA[$P{DESDE}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="titulo_reporte">
					<subreportParameterExpression><![CDATA[$P{HASTA}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "rubrosEspecies_Valoradas.jasper"]]></subreportExpression>
			</subreport>
			<textField isBlankWhenNull="true">
				<reportElement x="472" y="23" width="73" height="15" uuid="01016ceb-60e8-40e9-8dff-5373c0e9d485"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{ren_det_liquidacion_valor_2}==null?"0.00":$V{ren_det_liquidacion_valor_2}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="372" y="23" width="63" height="15" uuid="06c17019-efae-4ac7-9ffe-fa03901a86a5"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Total >>>>>]]></text>
			</staticText>
		</band>
	</summary>
</jasperReport>
