<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="recaudacionesTipoLiquidacion" pageWidth="595" pageHeight="842" whenNoDataType="BlankPage" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="04fa4764-7603-4b1f-9475-019901442085">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="333"/>
	<subDataset name="dataset1" uuid="db07926f-30db-48e8-9f70-dac0b12eddd9"/>
	<parameter name="LOGO" class="java.lang.String"/>
	<parameter name="OFICIO" class="java.lang.String"/>
	<parameter name="FECHA" class="java.util.Date"/>
	<parameter name="DIRECTOR" class="java.lang.String"/>
	<parameter name="TESORERA" class="java.lang.String"/>
	<parameter name="FECHA_HASTA" class="java.util.Date"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\origami\\Documents\\NetBeansProjects\\sgm\\src\\main\\webapp\\reportes\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="LOGO_FOOTER" class="java.lang.String"/>
	<parameter name="FECHA_CIERRE" class="java.util.Date">
		<defaultValueExpression><![CDATA[new Date()]]></defaultValueExpression>
	</parameter>
	<parameter name="MUNICIPIO" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT t.codigo_titulo_reporte,t.nombre_transaccion, SUM(p.valor) total_por_titulo,
    (SELECT razon_social from sgm_application.empresa) AS nombre_empresa
FROM sgm_financiero.ren_pago p
INNER JOIN sgm_financiero.ren_liquidacion l ON (p.liquidacion=l.id)
INNER JOIN sgm_financiero.ren_tipo_liquidacion t ON (l.tipo_liquidacion=t.id)
WHERE p.estado=TRUE AND (p.fecha_pago::DATE BETWEEN $P{FECHA} AND $P{FECHA_HASTA})
GROUP BY t.codigo_titulo_reporte,t.nombre_transaccion
ORDER BY t.codigo_titulo_reporte]]>
	</queryString>
	<field name="codigo_titulo_reporte" class="java.lang.Long"/>
	<field name="nombre_transaccion" class="java.lang.String"/>
	<field name="total_por_titulo" class="java.math.BigDecimal"/>
	<field name="nombre_empresa" class="java.lang.String"/>
	<variable name="total" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{total_por_titulo}]]></variableExpression>
		<initialValueExpression><![CDATA[0.00]]></initialValueExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="69" splitType="Stretch">
			<image hAlign="Center" vAlign="Middle">
				<reportElement x="45" y="11" width="74" height="55" uuid="93ea3f8c-a36b-48c2-acda-b31c0d862249"/>
				<imageExpression><![CDATA[$P{LOGO}]]></imageExpression>
			</image>
			<textField>
				<reportElement x="134" y="1" width="421" height="66" uuid="ea5f661c-d882-4cd9-850c-18eceeba5406"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombre_empresa}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="282" splitType="Stretch">
			<staticText>
				<reportElement x="189" y="24" width="106" height="15" isRemoveLineWhenBlank="true" uuid="7f1bcf61-404a-4102-8aa6-b9fd7b2dd84c">
					<printWhenExpression><![CDATA[$P{OFICIO}!=null]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Oficio Nº. TES-]]></text>
			</staticText>
			<staticText>
				<reportElement x="71" y="47" width="74" height="15" isRemoveLineWhenBlank="true" uuid="a6ba358f-04fa-4e93-b6cc-15de7fb2770f">
					<printWhenExpression><![CDATA[$P{OFICIO}!=null]]></printWhenExpression>
				</reportElement>
				<text><![CDATA[San Vicente,]]></text>
			</staticText>
			<staticText>
				<reportElement x="71" y="122" width="183" height="15" isRemoveLineWhenBlank="true" uuid="25fb0924-4bd1-4f7c-841c-a38103c9477a">
					<printWhenExpression><![CDATA[$P{OFICIO}!=null]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[En su despacho.]]></text>
			</staticText>
			<staticText>
				<reportElement x="71" y="143" width="183" height="15" isRemoveLineWhenBlank="true" uuid="fc85702b-9727-4c5f-aa86-a105d09cc35e">
					<printWhenExpression><![CDATA[$P{OFICIO}!=null]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[De mis consideraciones:]]></text>
			</staticText>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="71" y="167" width="447" height="52" isRemoveLineWhenBlank="true" uuid="d3cb92eb-4213-4739-ad10-638e201eed0d">
					<printWhenExpression><![CDATA[$P{OFICIO}!=null]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Justified" markup="styled">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA["En el cumplimiento a la disposición de la Alcaldesa, informo a usted sobre las RECAUDACIONES efectuadas por la <style isBold='true'>TESORERÍA MUNICIPAL</style> durante el "+"<style isBold='true'>"+new SimpleDateFormat("dd 'de' MMMMM 'del' yyyy").format($P{FECHA})+":</style>"]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="299" y="24" width="219" height="15" isRemoveLineWhenBlank="true" uuid="604f1690-1c25-4782-b7ba-9b6954912649">
					<printWhenExpression><![CDATA[$P{OFICIO}!=null]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{OFICIO}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="71" y="92" width="234" height="15" isRemoveLineWhenBlank="true" uuid="5920ea97-73eb-43f1-9fd0-544fbe4f6677">
					<printWhenExpression><![CDATA[$P{OFICIO}!=null]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{DIRECTOR}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="71" y="107" width="183" height="15" isRemoveLineWhenBlank="true" uuid="e5939d52-e665-41f8-a1a2-e158dcb2b30b">
					<printWhenExpression><![CDATA[$P{OFICIO}!=null]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[DIRECTORA FINANCIERA]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="148" y="219" width="259" height="63" isRemoveLineWhenBlank="true" uuid="7a508389-3f98-44c9-bbb0-495fa5726f53">
					<printWhenExpression><![CDATA[$P{OFICIO}==null]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center" markup="styled">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["DIRECCION FINANCIERA<br/>"+
"TESORERIA MUNICIPAL<br/>"+
"INFORME GENERAL DE RECAUDACIONES<br/>"+
"DESDE:"+new SimpleDateFormat("dd/MM/yyyy").format($P{FECHA})+"       HASTA:"+new SimpleDateFormat("dd/MM/yyyy").format($P{FECHA_HASTA})]]></textFieldExpression>
			</textField>
			<textField pattern="EEEEE dd MMMMM yyyy" isBlankWhenNull="true">
				<reportElement x="145" y="47" width="197" height="15" uuid="cf063d3c-d536-4c44-9e68-ec71e3f56195"/>
				<textFieldExpression><![CDATA[$P{FECHA_CIERRE}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="9" splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="12" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="82" y="0" width="325" height="12" uuid="b2fdaa48-e03f-4fed-8c4f-3211aabbed44"/>
				<textElement verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombre_transaccion}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="420" y="0" width="60" height="12" uuid="c88f960d-9e56-4a6b-9599-148e3f7bfa8a"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{total_por_titulo}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="71" y="0" width="11" height="12" uuid="3c5dfde0-8436-44b4-8ee3-94900ce81ebe"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[»]]></text>
			</staticText>
			<staticText>
				<reportElement x="409" y="0" width="11" height="12" uuid="59e0c2c7-a47c-4c62-ac5b-b68b2bbafd06"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<text><![CDATA[$]]></text>
			</staticText>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="45" splitType="Stretch">
			<subreport>
				<reportElement x="28" y="0" width="527" height="45" uuid="e19f4562-1503-45df-8cac-ae726acfa3d8"/>
				<subreportParameter name="LOGO">
					<subreportParameterExpression><![CDATA[$P{LOGO_FOOTER}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "footerReporte.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</pageFooter>
	<summary>
		<band height="128" splitType="Stretch">
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="403" y="0" width="77" height="20" uuid="7534c2df-c115-4a4c-add7-37eaf1b94ec4"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{total}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="392" y="0" width="11" height="20" uuid="7aedce34-6ff3-4e66-83ef-eeff069bc1b8"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[$]]></text>
			</staticText>
			<staticText>
				<reportElement x="327" y="0" width="65" height="20" uuid="be4e4a06-bac1-4a4e-9b6b-f60de72da4db"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL]]></text>
			</staticText>
			<staticText>
				<reportElement x="71" y="34" width="438" height="15" isRemoveLineWhenBlank="true" uuid="c3ed779e-43cb-4704-82dc-c39990228d31">
					<printWhenExpression><![CDATA[$P{OFICIO}!=null]]></printWhenExpression>
				</reportElement>
				<text><![CDATA[Particular que comunico a usted para los fines legales consiguientes.]]></text>
			</staticText>
			<staticText>
				<reportElement x="189" y="99" width="176" height="14" isRemoveLineWhenBlank="true" uuid="ed04fc37-7d85-45fe-9f2c-ad630546cd33">
					<printWhenExpression><![CDATA[$P{OFICIO}!=null]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[TESORERA]]></text>
			</staticText>
			<textField>
				<reportElement x="189" y="83" width="176" height="16" isRemoveLineWhenBlank="true" uuid="ee86e9e7-0dcd-4f5a-b5ae-127709efb9f3">
					<printWhenExpression><![CDATA[$P{OFICIO}!=null]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{TESORERA}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="71" y="113" width="157" height="15" isRemoveLineWhenBlank="true" uuid="4becb7bd-b2f1-4ddc-b226-ce876f6526de">
					<printWhenExpression><![CDATA[$P{OFICIO}!=null]]></printWhenExpression>
				</reportElement>
				<text><![CDATA[CC: Alcaldía, Archivo.]]></text>
			</staticText>
		</band>
	</summary>
</jasperReport>
