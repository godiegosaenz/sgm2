<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    
    <cc:interface componentType="samdocUpload">
        <cc:attribute name="nombreLibro"  />
        <cc:attribute name="anioInscripcion" />
        <cc:attribute name="numeroTomo" />
        <cc:attribute name="numeroInscripcion" />
        <cc:attribute name="folioInicial" />
        <cc:attribute name="folioFinal"  />
        
        <cc:attribute name="respuesta" />
        
        <cc:attribute name="subidaListener" method-signature="void listener()" />
        
    </cc:interface>
    
    
    <cc:implementation>
        <h:outputScript library="samdoc" name="upload.js" target="head"  />
                
        <div id="#{cc.clientId}">
            
            <iframe src="#{samdocUploadCompUtil.formUploadUrl(cc.attrs.nombreLibro, cc.attrs.anioInscripcion, cc.attrs.numeroTomo, cc.attrs.numeroInscripcion, cc.attrs.folioInicial, cc.attrs.folioFinal, cc.clientId)}" 
                    width="800px" height="300px"/>
            
            <h:panelGroup id="respGrp">
                <h:form id="respForm"  >
                    <h:inputHidden id="resp" value="#{cc.attrs.respuesta}" />
                    
                    <h:commandButton id="postButton" actionListener="#{cc.uploadListener}" 
                                     style="visibility: hidden;" >
                        <f:ajax execute="@form" render=":#{cc.clientId}:respGrp" />
                    </h:commandButton>
                    
                </h:form>
            </h:panelGroup>
            
            
            
        </div>
    </cc:implementation>
    
    
</html>

