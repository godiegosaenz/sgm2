<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:h="http://java.sun.com/jsf/html">

    <!-- INTERFACE -->
    <cc:interface componentType="seccionesFicha" >
        <cc:attribute name="headerDialog"/>
        <cc:attribute name="predio" type="com.origami.sgm.entities.CatPredio" required="true"/>
        <cc:attribute name="predioant" type="com.origami.sgm.entities.CatPredio" required="true"/>
        <cc:attribute name="prestamoPredio" type="com.origami.sgm.entities.FinanPrestamoPredio" required="false"/>
        <cc:attribute name="prestamoPredioant" type="com.origami.sgm.entities.FinanPrestamoPredio" required="false"/>
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>

        <!--<h:form id="frmSeccion2">-->
        <!--<p:tab id="s2" title="2. Identificacion legal">-->
        <h:form id="frmTenencia">

            <p:fieldset legend="Tenencia" toggleable="true">
                <p:panelGrid columns="2" layout="grid" style="width: 100%">
                    <h:outputText value="Tenencia :" style="font-weight: bolder"/>
                    <p:inputText value="#{cc.attrs.predio.propiedad.nombre}" styleClass="#{cc.comparar(cc.attrs.predio.propiedad.nombre, cc.attrs.predioant.propiedad.nombre)}" style="width: 75%; " readonly="true" />

                    <h:outputText value="Forma de Adquisición o Tenencia:" style="font-weight: bolder"/>
                    <p:inputText value="#{cc.attrs.predio.formaAdquisicion.valor}" styleClass="#{cc.comparar(cc.attrs.predio.formaAdquisicion.valor, cc.attrs.predioant.formaAdquisicion.valor)}" style="width: 75%; " readonly="true" />

                </p:panelGrid>
            </p:fieldset>
            <p:fieldset legend="Financiamiento" toggleable="true">
                <p:panelGrid columns="4"  layout="grid" rendered="#{cc.attrs.prestamoPredio ne null and cc.attrs.prestamoPredioant}">

                    <h:outputText value="Código de prestamo :" style="font-weight: bolder"/>
                    <p:inputText value="#{cc.attrs.prestamoPredio.codigoPrestamo}" styleClass="#{cc.comparar(cc.attrs.prestamoPredio.codigoPrestamo, cc.attrs.prestamoPredioant.codigoPrestamo)}" style="width: 75%; " readonly="true" />
                    <h:outputText value="Institucion Prestamo :" style="font-weight: bolder"/>
                    <p:inputText value="#{cc.attrs.prestamoPredio.codFinanPrestamo.valor}" styleClass="#{cc.comparar(cc.attrs.prestamoPredio.codFinanPrestamo.valor, cc.attrs.prestamoPredioant.codFinanPrestamo.valor)}" readonly="true" style="width: 75%; " />
                    <h:outputText value="Número de trámite :" style="font-weight: bolder"/>
                    <p:inputText value="#{cc.attrs.prestamoPredio.numeroTramite}" styleClass="#{cc.comparar(cc.attrs.prestamoPredio.numeroTramite, cc.attrs.prestamoPredioant.numeroTramite)}" readonly="true" style="width: 75%; "/>
                    <h:outputText value="Fecha de prestamo :" style="font-weight: bolder"/>
                    <p:inputText value="#{cc.attrs.prestamoPredio.fechaConsecionPrestamo}" styleClass="#{cc.comparar(cc.attrs.prestamoPredio.fechaConsecionPrestamo, cc.attrs.prestamoPredioant.numeroTramite)}" style="width: 75%; " readonly="true" >
                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                    </p:inputText>
                    <h:outputText value="Porcentaje de prestamo :" style="font-weight: bolder"/>
                    <pe:inputNumber value="#{cc.attrs.prestamoPredio.porcentajeExonPrestamo}" styleClass="#{cc.comparar(cc.attrs.prestamoPredio.porcentajeExonPrestamo, cc.attrs.prestamoPredioant.porcentajeExonPrestamo)}" symbol="%" symbolPosition="r" style="width: 75%; " readonly="true" />
                    <h:outputText value="Plazo del prestamo :" style="font-weight: bolder"/>
                    <p:inputText value="#{cc.attrs.prestamoPredio.plazoPrestamo}" style="width: 75%; " styleClass="#{cc.comparar(cc.attrs.prestamoPredio.plazoPrestamo, cc.attrs.prestamoPredioant.plazoPrestamo)}" readonly="true" />
                    <h:outputText value="Tasa del prestamo :" style="font-weight: bolder"/>
                    <p:inputText value="#{cc.attrs.prestamoPredio.tasaInteresPrestamo}" styleClass="#{cc.comparar(cc.attrs.prestamoPredio.tasaInteresPrestamo, cc.attrs.prestamoPredioant.tasaInteresPrestamo)}" style="width: 75%; " readonly="true" />
                    <h:outputText value="Institucion Prestamo :" style="font-weight: bolder"/>
                    <p:inputText value="#{cc.attrs.prestamoPredio.modalidadPrestamo.valor}" styleClass="#{cc.comparar(cc.attrs.prestamoPredio.modalidadPrestamo.valor, cc.attrs.prestamoPredioant.tasaInteresPrestamo.modalidadPrestamo.valor)}" readonly="true" style="width: 75%; " />
                    <h:outputText value="Estado del prestamo :" style="font-weight: bolder"/>
                    <p:inputText value="#{cc.attrs.prestamoPredio.estadoPrestamo.valor}" readonly="true" styleClass="#{cc.comparar(cc.attrs.prestamoPredio.estadoPrestamo.valor, cc.attrs.prestamoPredioant.estadoPrestamo.valor)}" style="width: 75%; " />
                    <h:outputText value="Estado del prestamo :" style="font-weight: bolder"/>
                    <p:inputText value="#{cc.attrs.prestamoPredio.comentarioEstadoPrestamo}" styleClass="#{cc.comparar(cc.attrs.prestamoPredio.comentarioEstadoPrestamo, cc.attrs.prestamoPredioant.comentarioEstadoPrestamo)}" readonly="true" style="width: 75%; " />
                </p:panelGrid>
            </p:fieldset>
            <p:fieldset legend="Predio Sin Título" toggleable="true">
                <p:panelGrid columns="2" layout="grid" style="width: 100%">
                    <h:outputText value="Requiere Perfeccionamiento :" style="font-weight: bolder"/>
                    <p:selectOneMenu value="#{cc.attrs.predio.requierePerfeccionamiento}" styleClass="#{cc.comparar(cc.attrs.predio.requierePerfeccionamiento, cc.attrs.predioant.requierePerfeccionamiento)}" effect="fade" >
                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                        <f:selectItem itemLabel="Si" itemValue="#{true}"/>
                        <f:selectItem itemLabel="No" itemValue="#{false}"/>
                    </p:selectOneMenu>
                    <h:outputText value="Años sin Perfeccionamiento :" style="font-weight: bolder"/>
                    <p:inputText  value="#{cc.attrs.predio.aniosSinPerfeccionamiento}" styleClass="#{cc.comparar(cc.attrs.predio.aniosSinPerfeccionamiento, cc.attrs.predioant.aniosSinPerfeccionamiento)}" readonly="true"/>
                    <h:outputText value="Años en Posesión :" style="font-weight: bolder"/>
                    <p:inputText type="num" value="#{cc.attrs.predio.aniosPosesion}" styleClass="#{cc.comparar(cc.attrs.predio.aniosPosesion, cc.attrs.predioant.aniosPosesion)}">
                        <pe:keyFilter mask="num"/>
                    </p:inputText>
                    <h:outputText value="Tipo de Poseedor :" style="font-weight: bolder"/>
                    <p:inputText  value="#{cc.attrs.predio.tipoPoseedor.valor}" styleClass="#{cc.comparar(cc.attrs.predio.tipoPoseedor.valor, cc.attrs.predioant.tipoPoseedor.valor)}" readonly="true"/>
                    <h:outputText value="Nombre Pueblo/Etnia :" style="font-weight: bolder"/>
                    <p:inputText value="#{cc.attrs.predio.nombrePuebloEtnia}" styleClass="#{cc.comparar(cc.attrs.predio.nombrePuebloEtnia, cc.attrs.predioant.nombrePuebloEtnia)}"/>
                    <p:outputLabel value=""/>
                    <p:outputLabel value=""/>
                </p:panelGrid>
            </p:fieldset>
        </h:form>
        <h:form id="frmPropietarios">
            <p:fieldset legend="Propietario(s)" toggleable="true">
                <p:dataTable id="dtPropietarios" value="#{cc.attrs.predio.catPredioPropietarioCollection}" var="pp" reflow="true"
                             paginator="true" rows="5" paginatorPosition="top" style="width: 100%" paginatorAlwaysVisible="false">
                    <p:column headerText="DNI">
                        <h:outputText value="#{pp.ciuCedRuc}"  styleClass="#{cc.buscarObjeto(pp,cc.attrs.predioant.catPredioPropietarioCollection)}" />
                    </p:column>
                    <p:column headerText="Descripcion">
                    <h:outputText value="#{pp.extras.ciudadano.ciuNombreCompleto}"  style="text-transform: uppercase"/>
                </p:column>
                </p:dataTable>
            </p:fieldset>
            <p:fieldset legend="Propietario Anterior" toggleable="true">
                <h:panelGrid columns="4" columnClasses="ui-cols-grid-3, ui-cols-grid-4, ui-cols-grid-2, ui-cols-grid-10">
                    <p:outputLabel value="Número de Identificación"/>
                    <p:inputText value="#{cc.attrs.predio.cedulaPropAnterior}" styleClass="#{cc.comparar(cc.attrs.predio.cedulaPropAnterior, cc.attrs.predioant.cedulaPropAnterior)}" readonly="true" />
                    <p:outputLabel value="Nombres"/>
                    <p:inputText value="#{cc.attrs.predio.propAnteriorPredio}" styleClass="#{cc.comparar(cc.attrs.predio.propAnteriorPredio, cc.attrs.predioant.propAnteriorPredio)}" readonly="true" size="50" />
                </h:panelGrid>
            </p:fieldset>
        </h:form>
        <!-- Escritura -->
        <h:form id="frmEscrituras">

            <p:dataTable id="dtEscrituras" value="#{cc.attrs.predio.catEscrituraCollection}" var="e" scrollable="true" style="width: 100%"
                         emptyMessage="No se encontraron registros" paginator="true" paginatorPosition="top"
                         rows="10"  lazy="true" rowsPerPageTemplate="20,50,100" filterEvent="enter"
                         paginatorAlwaysVisible="false">
                <p:column headerText="No. Repertorio" >
                    <h:outputText value=" No. Repertorio#{e.numRepertorio}" styleClass="#{cc.buscarObjeto(e,cc.attrs.predioant.catEscrituraCollection)}"/>
                </p:column>
                <p:column headerText="Notaria">
                    <h:outputText value="#{e.notaria}"/>
                </p:column>
                <p:column headerText="Fecha Escritura">
                    <h:outputText value="#{e.fecEscritura}"><f:convertDateTime pattern="dd-MM-yyyy " /></h:outputText>
                </p:column>
                <p:column headerText="Fecha Inscripción">
                    <h:outputText value="#{e.fecInscripcion}"><f:convertDateTime pattern="dd-MM-yyyy " /></h:outputText>
                </p:column>
                <p:column headerText="Area">
                    <h:outputText value="#{e.areaSolar}" ><f:convertNumber pattern="##############.####" locale="us"/></h:outputText>
                </p:column>
                <p:column headerText="Estado">
                    <h:outputText value="#{e.estado}"/>
                </p:column>
            </p:dataTable>
        </h:form>
        <!--            </p:tab>
                </h:form>-->
    </cc:implementation>
</html>