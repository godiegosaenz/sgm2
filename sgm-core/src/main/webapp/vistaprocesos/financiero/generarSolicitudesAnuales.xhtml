<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../../template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="events">

    </ui:define>

    <ui:define name="head">

    </ui:define>

    <ui:define name="page_title">
        Generar Solicitudes de Exoneracion Anuales
    </ui:define>

    <ui:define name="top">
        <h1>Generar Solicitudes de Exoneracion Anuales</h1>
    </ui:define>

    <ui:define name="content">
        <h:form id="frmGenerarSolct">
            <p:panel id="pnlDatos">
                <div align="right">
                    <p:outputLabel value="Numero de solicitudes #{generarSolicitudesAnuales.sizeList}"/>
                    <p:spacer width="15"/>
                    <p:commandButton value="Generar Solicitudes" actionListener="#{generarSolicitudesAnuales.generarSolicitudes()}" 
                                     styleClass="btnStyle" update="frmGenerarSolct" disabled="#{generarSolicitudesAnuales.sizeList == null}" />
                </div>
                
                <br/>
                <br/>
                <p:dataTable value="#{generarSolicitudesAnuales.solicitudesAprob}" var="s1"
                             paginator="true" paginatorAlwaysVisible="false" emptyMessage="No se encontraron Registros..."
                             rows="20" rowsPerPageTemplate="20,50,100" reflow="true">
                    <f:facet name="header">
                        Listado de Solicitudes por generar
                    </f:facet>
                    <p:column headerText="No. Solicitud" width="10%">
                        <p:outputLabel value="#{s1.id}"/>
                    </p:column>
                    <p:column headerText="Solicitante" width="50%">
                        <p:outputLabel value="#{s1.solicitante.nombreCompleto}"/>
                    </p:column>
                    <p:column headerText="Año">
                        <p:outputLabel value="#{s1.anioFin}" />
                    </p:column>
                    <p:column headerText="Fecha">
                        <p:outputLabel value="#{s1.fechaIngreso}" >
                            <f:convertDateTime parent="dd/MM/yyyy"/>
                        </p:outputLabel>
                    </p:column>
                    <p:column headerText="Resolucion">
                        <p:outputLabel value="#{s1.numResolucionSac}"/>
                    </p:column>
                    <p:column headerText="Detalle">
                        <p:commandButton icon="ui-icon-info" iconPos="c" style="width: 20px; height: 20px;"
                                         title="Información de las Solicitudes generadas." accesskey="I"
                                         actionListener="#{generarSolicitudesAnuales.verInformacion(s1)}"
                                         styleClass="btnStyle"/>
                    </p:column>
                </p:dataTable>
            </p:panel>
        </h:form>
        
        <p:dialog widgetVar="detalle" width="60%" height="60%" modal="true" closeOnEscape="true" 
                  closable="true" appendTo="@(body)" position="center" resizable="false">
            <h:form id="detalle">
                <p:dataTable value="#{generarSolicitudesAnuales.solicitudes}" var="d1"
                             paginator="true" paginatorAlwaysVisible="false" emptyMessage="No se encontraron Registros..."
                             rows="20" rowsPerPageTemplate="20,50" reflow="true"  >
                    <f:facet name="header">
                        Solicitudes Generadas
                    </f:facet>
                    <p:column headerText="No. Solicitud" width="10%">
                        <p:outputLabel value="#{d1.id}"/>
                    </p:column>
                    <p:column headerText="Solicitante" width="50%">
                        <p:outputLabel value="#{d1.solicitudExoneracion.solicitante.nombreCompleto}"/>
                    </p:column>
                    <p:column headerText="Año">
                        <p:outputLabel value="#{d1.anio}" />
                    </p:column>
                    <p:column headerText="Fecha">
                        <p:outputLabel value="#{d1.fechaIngreso}" >
                            <f:convertDateTime parent="dd/MM/yyyy"/>
                        </p:outputLabel>
                    </p:column>
                    <p:column headerText="Resolucion">
                        <p:outputLabel value="#{d1.solicitudExoneracion.numResolucionSac}"/>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>
    </ui:define>

</ui:composition>
