<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="events">
        <f:metadata>
            <f:viewParam name="idPermiso" value="#{permisoConstruccionVista.idPermiso}" />
        </f:metadata> 
        <f:event type="preRenderView" listener="#{permisoConstruccionVista.doPreRenderView()}" />
    </ui:define>

    <ui:define name="page_title">
        Visualizar Permiso de Cosntrucción
    </ui:define>

    <ui:define name="top">
        <h1>Permiso Construcción</h1>
    </ui:define>

    <ui:define name="content">

        <h:form id="forGenLiq">

            <p:panelGrid id="panelCons" style="width: 100%; margin: 0px; margin-bottom: 20px">
                <f:facet name="header" >
                    <p:column colspan="16">PERMISO DE CONSTRUCCIÓN</p:column>
                </f:facet>
                <!-- Busqueda Cod Predio -->
                <p:row styleClass="ui-widget-header" style="margin-top: 10px;" >   
                    <p:column colspan="16">
                        <center>
                            Número Predio <p:inputText readonly="true" id="numPre" value="#{permisoConstruccionVista.predio.numPredio}" /><p:spacer width="5"/>
                        </center>
                    </p:column>
                </p:row> 
                <p:row >
                    <p:column>Sector<br/><p:inputText readonly="true" value="#{permisoConstruccionVista.predio.sector}"  maxlength="4" style="width: 50px;"/></p:column>
                    <p:column>Mnz. <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.mz}"  maxlength="4" style="width: 80%;"/></p:column>
                    <p:column>Cdla. <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.cdla}"  maxlength="4" style="width: 80%;"/></p:column>
                    <p:column>Mz. Div <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.mzdiv}"  maxlength="4" style="width: 80%;"/></p:column>
                    <p:column>Solar <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.solar}"  maxlength="4" style="width: 80%;"/></p:column>
                    <p:column>Div1 <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.div1}"  maxlength="1"  style="width: 80%;"/></p:column>
                    <p:column>Div2 <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.div2}"  maxlength="1"  style="width: 80%;"/></p:column>
                    <p:column>Div3 <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.div3}"  maxlength="1"  style="width: 80%;"/></p:column>
                    <p:column>Div4 <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.div4}"  maxlength="1"  style="width: 80%;"/></p:column>
                    <p:column>Div5 <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.div5}"  maxlength="1"  style="width: 80%;"/></p:column>
                    <p:column>Div6 <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.div6}"  maxlength="1"  style="width: 80%;"/></p:column>
                    <p:column>Div7 <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.div7}"  maxlength="1"  style="width: 80%;"/></p:column>
                    <p:column>Div8 <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.div8}"  maxlength="1"  style="width: 80%;"/></p:column>
                    <p:column>Div9 <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.div9}"  maxlength="1"  style="width: 80%;"/></p:column>
                    <p:column>Phv <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.phv}"  maxlength="2" style="width: 80%;"/></p:column>
                    <p:column>Phh <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.phh}"  maxlength="2" style="width: 80%;"/></p:column>
                </p:row>
                <!-- Datos de Permiso -->
                <p:row>
                    <p:column colspan="16" styleClass="ui-widget-header" style="text-align: center">Datos de Permiso</p:column>
                </p:row>
                <p:row>
                    <p:column colspan="4">
                        Tipo Permiso: <p:outputLabel value="#{permisoConstruccionVista.permisoNuevo.tipoPermiso.descripcion}" style="font-weight: bold;"/>
                    </p:column>
                    <p:column colspan="3">Año Tramite<p:inputText readonly="true" value="#{permisoConstruccionVista.permisoNuevo.anioTramite}"   /></p:column>
                    <p:column colspan="3">Número de Tramite<p:inputText readonly="true" value="#{permisoConstruccionVista.permisoNuevo.tramite.id}"  /></p:column>
                    <p:column colspan="3">Fecha Emisión<p:inputText readonly="true" value="#{permisoConstruccionVista.permisoNuevo.fechaEmision}"><f:convertDateTime pattern="dd/MM/yyyy"/></p:inputText></p:column>
                    <p:column colspan="3">Fecha Caducidad<p:inputText readonly="true" value="#{permisoConstruccionVista.permisoNuevo.fechaCaducidad}"><f:convertDateTime pattern="dd/MM/yyyy"/></p:inputText></p:column>
                </p:row>
                <!-- Datos de Propietario-->
                <p:row>
                    <p:column colspan="16" styleClass="ui-widget-header" style="text-align: center">Datos de Propietario</p:column>
                </p:row>
                <p:row>
                    <p:column colspan="16">
                        <p:dataTable id="dtProp" value="#{permisoConstruccionVista.listaPropietarios}" var="pp" style="width: 100%" reflow="true" emptyMessage="No hay asignado Propietarios al Predio">
                            <p:column headerText="#C.I. O R.U.C" style="text-align: center;font-weight: bold">
                                <p:outputLabel value="#{pp.ente.ciRuc}"/>
                            </p:column>
                            <p:column headerText="Propietario" style="text-align: center;font-weight: bold">
                                <p:outputLabel value="#{pp.ente.nombres} #{pp.ente.apellidos}" rendered="#{pp.ente.esPersona}"/>
                                <p:outputLabel value="#{pp.ente.razonSocial}" rendered="#{!pp.ente.esPersona}"/>
                            </p:column>
                        </p:dataTable>
                    </p:column>
                </p:row>
                <!-- Responsable Tecnico-->
                <p:row>
                    <p:column colspan="4">
                        Ced. Identidad <p:inputMask readonly="true" id="ciIde" mask="9999999999" value="#{permisoConstruccionVista.respTec.ciRuc}"/>
                    </p:column>
                    <p:column colspan="8">
                        Resp. Tecnico <p:inputText readonly="true" id="resT" value="#{permisoConstruccionVista.respTec.apellidos} #{permisoConstruccionVista.respTec.nombres}" style="width: 70%;"/> 
                    </p:column>
                    <p:column colspan="4">
                        Registro Profesional <p:inputText readonly="true" id="regP" value="#{permisoConstruccionVista.respTec.regProf}"/>
                    </p:column>
                </p:row>
                <!-- Ubicación-->
                <p:row>
                    <p:column styleClass="ui-widget-header" colspan="16" style="text-align: center">Ubicación</p:column>
                </p:row>
                <p:row>
                    <p:column colspan="4">
                        Sector <p:inputText value="La Puntilla" style="width: 70%" readonly="true" />                                   
                    </p:column>
                    <p:column colspan="6">Urbanización <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.nombreUrb}"  style="width: 70%" /></p:column>
                    <p:column colspan="2">Manzana <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.urbMz}" style="width: 50%" /></p:column>
                    <p:column colspan="2">Solar <p:inputText readonly="true" value="#{permisoConstruccionVista.predio.urbSolarnew}" style="width: 50%" /></p:column>
                    <p:column colspan="2">Calle <p:inputText readonly="true" value="#{permisoConstruccionVista.permisoNuevo.calle}" style="width: 70%" /></p:column>
                </p:row>
                <!-- edificación-->
                <p:row>
                    <p:column styleClass="ui-widget-header" colspan="16" style="text-align: center">Caracteristicas del Predio</p:column>
                </p:row>
                <p:row id="rowDtEdif">
                    <p:column colspan="6">
                        <p:dataTable id="dtEdif" var="edf" value="#{permisoConstruccionVista.detallesEdific}" selectionMode="single" selection="#{permisoConstruccionVista.permisoSelect}" rowKey="#{edf.descEdificacion}" emptyMessage="No hay ninguna edificación cargada" rowIndexVar="rowIndex" style="width: 100%;">
                            <p:ajax event="rowSelect" listener="#{permisoConstruccionVista.onRowSelect}" /> 
                            <p:column headerText="Edificación" style="text-align: center;font-weight: bold">
                                <h:outputText rendered="#{edf.numEdificacion==0}" value="Edificación Principal"/>
                                <h:outputText rendered="#{edf.numEdificacion==1}" value="Anexo 1"/>  
                                <h:outputText rendered="#{edf.numEdificacion==2}" value="Anexo 2"/>  
                                <h:outputText rendered="#{edf.numEdificacion==3}" value="Anexo 3"/>  
                                <h:outputText rendered="#{edf.numEdificacion==4}" value="Anexo 4"/>  
                                <h:outputText rendered="#{edf.numEdificacion==5}" value="Anexo 5"/>  
                                <h:outputText rendered="#{edf.numEdificacion==6}" value="Anexo 6"/>  
                                <h:outputText rendered="#{edf.numEdificacion==7}" value="Anexo 7"/>  
                                <h:outputText rendered="#{edf.numEdificacion==8}" value="Anexo 8"/>  
                                <h:outputText rendered="#{edf.numEdificacion==9}" value="Anexo 9"/>                                  
                            </p:column>
                            <p:column headerText="# Pisos" style="text-align: center;font-weight: bold">
                                <p:outputLabel value="#{edf.numeroPisos}"/>
                            </p:column>
                            <p:column headerText="Descripción" style="text-align: center;font-weight: bold">
                                <p:outputLabel value="#{edf.descEdificacion}"/>
                            </p:column>
                            <p:column headerText="Area Construcc" style="text-align: center;font-weight: bold">
                                <p:outputLabel value="#{edf.areaConstruccion}">
                                    <f:convertNumber pattern="####,##0.00"/>
                                </p:outputLabel>
                            </p:column>
                        </p:dataTable>
                    </p:column>
                    <p:column colspan="10" rowspan="2"  > 
                        Altura<p:spacer width="54"/><p:inputText readonly="true" value="#{permisoConstruccionVista.permisoNuevo.altura}" style="width: 50px;"/><p:spacer width="30"/>
                        # Edifi.<p:spacer width="45"/><p:inputText readonly="true" value="#{permisoConstruccionVista.permisoNuevo.cantidadEdificaciones}" style="width: 50px;"/>
                        <br/>
                        # Piso B.N.B<p:spacer width="26"/><p:inputText readonly="true" value="#{permisoConstruccionVista.permisoNuevo.pisosBnb}" style="width: 50px;"/><p:spacer width="30"/>
                        # Piso S.N.B<p:spacer width="20"/> <p:inputText readonly="true" value="#{permisoConstruccionVista.permisoNuevo.pisosSnb}" style="width: 50px;"/>
                        <br/>
                        Area. Edif.<p:spacer width="34"/><p:inputText readonly="true" id="ad" value="#{permisoConstruccionVista.permisoNuevo.areaEdificaciones}" style="width: 50px;"/><p:spacer width="30"/>
                        # Parqueo<p:spacer width="30"/><p:inputText readonly="true" value="#{permisoConstruccionVista.permisoNuevo.cantidadParqueos}" style="width: 50px;"/>
                        <br/>
                        # Area.Parqueo<p:spacer width="12"/><p:inputText readonly="true" value="#{permisoConstruccionVista.permisoNuevo.areaParqueos}" style="width: 50px;"/><p:spacer width="30"/>
                        Ret. Frontal<p:spacer width="18"/><p:inputText value="#{permisoConstruccionVista.permisoNuevo.retiroFrontal}" readonly="true" style="width: 50px;"/>
                        <br/>
                        Ret. Lateral1<p:spacer width="21"/><p:inputText value="#{permisoConstruccionVista.permisoNuevo.retiroLateral1}" readonly="true" style="width: 50px;"/><p:spacer width="30"/>
                        Retiro Lateral2 <p:inputText value="#{permisoConstruccionVista.permisoNuevo.retiroLateral2}" readonly="true" style="width: 50px;"/>
                        <br/>
                        Retiro Posterior<p:spacer width="10"/><p:inputText value="#{permisoConstruccionVista.permisoNuevo.retiroPosterior}" readonly="true" style="width: 50px;"/>
                        <br/>
                        Descripción de la Edificación.<br/>
                        <p:inputText value="#{permisoConstruccionVista.permisoNuevo.descFamiliar}" style="width: 70%;" readonly="true"/>
                    </p:column>
                </p:row>
                <p:row>
                    <p:column colspan="6">
                        <p:dataTable id="dtCartEdif" value="#{permisoConstruccionVista.permisoSelect.peDetallePermisoCollection}" var="d" style="width: 100%" emptyMessage="La edificación no tiene características." >
                            <p:column headerText="Edificacion" style="text-align: center; " >
                                <h:outputText rendered="#{d.idPermisoEdificacion.numEdificacion==0}" value="Edificación Principal"/>
                                <h:outputText rendered="#{d.idPermisoEdificacion.numEdificacion==1}" value="Anexo 1"/>  
                                <h:outputText rendered="#{d.idPermisoEdificacion.numEdificacion==2}" value="Anexo 2"/>  
                                <h:outputText rendered="#{d.idPermisoEdificacion.numEdificacion==3}" value="Anexo 3"/>  
                                <h:outputText rendered="#{d.idPermisoEdificacion.numEdificacion==4}" value="Anexo 4"/>  
                                <h:outputText rendered="#{d.idPermisoEdificacion.numEdificacion==5}" value="Anexo 5"/>  
                                <h:outputText rendered="#{d.idPermisoEdificacion.numEdificacion==6}" value="Anexo 6"/>  
                                <h:outputText rendered="#{d.idPermisoEdificacion.numEdificacion==7}" value="Anexo 7"/>  
                                <h:outputText rendered="#{d.idPermisoEdificacion.numEdificacion==8}" value="Anexo 8"/>  
                                <h:outputText rendered="#{d.idPermisoEdificacion.numEdificacion==9}" value="Anexo 9"/>  
                            </p:column>

                            <p:column headerText="Categoría" style="text-align: center; font-weight: bold">
                                <p:outputLabel value="#{d.idCatEdfProp.categoria.nombre}"/>
                            </p:column>

                            <p:column headerText="Características" style="text-align: center; font-weight: bold">
                                <p:outputLabel value="#{d.idCatEdfProp.nombre}"/>
                            </p:column>

                            <p:column headerText="Porcentaje" style="text-align: center; font-weight: bold; width: 110px;">
                                <p:outputLabel value="#{d.porcentaje}" >
                                    <f:convertNumber pattern="####,##0.00"/>
                                </p:outputLabel>
                            </p:column>
                        </p:dataTable>
                    </p:column>
                </p:row>
                
                
                <p:row styleClass="ui-widget-header">
                    <p:column colspan="4" style="text-align: center">Retiro Frontal</p:column> 
                    <p:column colspan="3" style="text-align: center">Retiro Lateral 1</p:column> 
                    <p:column colspan="3" style="text-align: center">Retiro Lateral 2 </p:column> 
                    <p:column colspan="3" style="text-align: center">Retiro Posterior</p:column> 
                    <p:column colspan="3" style="text-align: center">Registro Vista </p:column> 
                </p:row>
                <p:row >
                    <p:column colspan="4">Carta/Ados 
                        <h:selectOneRadio styleClass="noBorder" id="carados1" value="#{permisoConstruccionVista.permisoNuevo.caradosrf}" style="font-family: Arial;font-weight:lighter;font-size: 12px" >                                             
                            <f:selectItem itemLabel="S" itemValue="S" itemDisabled="true" />  
                            <f:selectItem itemLabel="N" itemValue="N" itemDisabled="true" />  
                        </h:selectOneRadio>
                    </p:column> 
                    <p:column colspan="3">Carta/Ados 
                        <h:selectOneRadio readonly="true" styleClass="noBorder" id="carados2" value="#{permisoConstruccionVista.permisoNuevo.caradosrl1}" style="font-family: Arial;font-weight:lighter;font-size: 12px" >                                             
                            <f:selectItem itemLabel="S" itemValue="S" itemDisabled="true" />  
                            <f:selectItem itemLabel="N" itemValue="N" itemDisabled="true" />  
                        </h:selectOneRadio>
                    </p:column> 
                    <p:column colspan="3">Carta/Ados 
                        <h:selectOneRadio readonly="true" styleClass="noBorder" id="carados3" value="#{permisoConstruccionVista.permisoNuevo.caradosrl2}" style="font-family: Arial;font-weight:lighter;font-size: 12px" >                                             
                            <f:selectItem itemLabel="S" itemValue="S" itemDisabled="true"/>  
                            <f:selectItem itemLabel="N" itemValue="N" itemDisabled="true" />  
                        </h:selectOneRadio>
                    </p:column>  
                    <p:column colspan="3">Carta/Ados 
                        <h:selectOneRadio styleClass="noBorder" id="carados4" value="#{permisoConstruccionVista.permisoNuevo.caradosrp}" style="font-family: Arial;font-weight:lighter;font-size: 12px" >                                             
                            <f:selectItem itemLabel="S" itemValue="S" itemDisabled="true" />  
                            <f:selectItem itemLabel="N" itemValue="N" itemDisabled="true" />  
                        </h:selectOneRadio>
                    </p:column> 
                    <p:column colspan="3">Registro Vista 
                        <h:selectOneRadio styleClass="noBorder" id="carados5" value="#{permisoConstruccionVista.permisoNuevo.registroVista}" style="font-family: Arial;font-weight:lighter;font-size: 12px" onkeyup="siguiente(this, event);" >                                             
                            <f:selectItem itemLabel="S" itemValue="S" itemDisabled="true" />  
                            <f:selectItem itemLabel="N" itemValue="N" itemDisabled="true" />  
                        </h:selectOneRadio>
                    </p:column> 
                </p:row>
                <p:row>
                    <p:column colspan="4">Carta/Acer 
                        <h:selectOneRadio styleClass="noBorder" id="carAcer1" value="#{permisoConstruccionVista.permisoNuevo.caracerrf}" style="font-family: Arial;font-weight:lighter;font-size: 12px" onkeyup="siguiente(this, event);" >                                             
                            <f:selectItem itemLabel="S" itemValue="S" itemDisabled="true"/>  
                            <f:selectItem itemLabel="N" itemValue="N" itemDisabled="true" />  
                        </h:selectOneRadio>
                    </p:column> 
                    <p:column colspan="3">Carta/Acer 
                        <h:selectOneRadio styleClass="noBorder" id="carAcer2" value="#{permisoConstruccionVista.permisoNuevo.caracerrl1}" style="font-family: Arial;font-weight:lighter;font-size: 12px" onkeyup="siguiente(this, event);" >                                             
                            <f:selectItem itemLabel="S" itemValue="S" itemDisabled="true"/>  
                            <f:selectItem itemLabel="N" itemValue="N" itemDisabled="true" />  
                        </h:selectOneRadio>
                    </p:column> 
                    <p:column colspan="3">Carta/Acer 
                        <h:selectOneRadio styleClass="noBorder" id="carAcer3" value="#{permisoConstruccionVista.permisoNuevo.caracerrl2}" style="font-family: Arial;font-weight:lighter;font-size: 12px" onkeyup="siguiente(this, event);" >                                             
                            <f:selectItem itemLabel="S" itemValue="S" itemDisabled="true" />  
                            <f:selectItem itemLabel="N" itemValue="N" itemDisabled="true"  />  
                        </h:selectOneRadio>
                    </p:column>  
                    <p:column colspan="3">Carta/Acer 
                        <h:selectOneRadio styleClass="noBorder" id="carAcer4" value="#{permisoConstruccionVista.permisoNuevo.caracerrp}" style="font-family: Arial;font-weight:lighter;font-size: 12px" onkeyup="siguiente(this, event);" >                                             
                            <f:selectItem itemLabel="S" itemValue="S" itemDisabled="true"/>  
                            <f:selectItem itemLabel="N" itemValue="N"  itemDisabled="true"/>  
                        </h:selectOneRadio>
                    </p:column> 
                </p:row>
                <p:row>
                    <p:column styleClass="ui-widget-header" colspan="16" style="text-align: center">Materiales de Construcción </p:column>
                </p:row>
                <p:row>
                    <p:column colspan="4">Area/Construcción<br/>
                        <p:inputText id="ac" value="#{permisoConstruccionVista.permisoNuevo.areaConstruccion}" readonly="true"/>
                    </p:column> 
                    <p:column colspan="3">Area/Implantación<br/>
                        <p:inputText value="#{permisoConstruccionVista.permisoNuevo.areaImplantacion}" readonly="true"/>
                    </p:column> 
                    <p:column colspan="3">Area/Solar<br/>
                        <p:inputText value="#{permisoConstruccionVista.permisoNuevo.areaSolar}" readonly="true"/>
                    </p:column>  
                    <p:column colspan="3">Linea/Fabrica<br/>
                        <p:inputText value="#{permisoConstruccionVista.permisoNuevo.lineaFabrica}" readonly="true"/>
                    </p:column> 
                    <p:column colspan="3">Observación<br/>
                        <p:inputTextarea value="#{permisoConstruccionVista.permisoNuevo.observacion}" readonly="true" style="width: 80%"/>
                    </p:column> 
                </p:row>
            </p:panelGrid>
            <div align="center">
                <p:commandButton id="btnImpLiq" value="Bandeja de Tarea" actionListener="#{permisoConstruccionVista.redirecDashBoard()}" style="height: 30px;" styleClass="btnStyle" icon="ui-icon-circle-arrow-w"/>
                <p:commandButton id="btnPerCons" value="Permisos de Construcción" actionListener="#{permisoConstruccionVista.redirecPermiso()}" style="height: 30px;" styleClass="btnStyle" icon="ui-icon-circle-arrow-w"/>
            </div>

        </h:form>

    </ui:define>

</ui:composition>

