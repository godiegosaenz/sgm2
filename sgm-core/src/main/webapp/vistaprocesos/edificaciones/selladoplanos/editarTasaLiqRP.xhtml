<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    template="/template/template.xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions">
    <ui:define name="meta">

    </ui:define>

    <ui:define name="content">
        <h:form id="mainForm">
            <p:panelGrid styleClass="noBorder" columns="4" style="width: 100%;font-size: 14px;">
                <p:outputLabel value="Tarea: Edición Tasa Liquidación" style="font-weight: bolder;color: #005f9c"/>
                <p:outputLabel value="Responsable: #{editarTasaLiqRP.base.session.name_user}" style="font-weight: bolder;color: #005f9c"/>
            </p:panelGrid> 

            <p:panelGrid id="pgSolicitante" columns="4" styleClass="noBorder" style="width: 100%">
                <f:facet name="header">
                    <p:column colspan="4">
                        #{editarTasaLiqRP.tramite.tipoTramite.descripcion}
                    </p:column>
                </f:facet>
                <h:outputText value="Solicitante " style="font-weight: bold; text-transform: uppercase"/>
                <h:outputText value="#{editarTasaLiqRP.tramite.solicitante.apellidos} #{editarTasaLiqRP.tramite.solicitante.nombres}" rendered="#{editarTasaLiqRP.tramite.solicitante.esPersona}" style="text-transform: uppercase"/>
                <h:outputText value="#{editarTasaLiqRP.tramite.solicitante.razonSocial}" rendered="#{!editarTasaLiqRP.tramite.solicitante.esPersona}" style="text-transform: uppercase"/>
                <h:outputText value="No. Identificacion " style="font-weight: bold; text-transform: uppercase"/>
                <h:outputText value="#{editarTasaLiqRP.tramite.solicitante.ciRuc}" style="text-transform: uppercase"/>
                <h:outputText value="Predio Referencial " style="font-weight: bold; text-transform: uppercase"/>
                <h:outputText value="#{editarTasaLiqRP.tramite.numPredio}" style=" text-transform: uppercase"/>
                <h:outputText value="Codigo predial " style="font-weight: bold; text-transform: uppercase"/>
                <h:outputText value="#{editarTasaLiqRP.predio.sector} - #{editarTasaLiqRP.predio.mz} - #{editarTasaLiqRP.predio.cdla} - #{editarTasaLiqRP.predio.mzdiv} - #{editarTasaLiqRP.predio.solar} - #{editarTasaLiqRP.predio.div1} - #{editarTasaLiqRP.predio.div2} - #{editarTasaLiqRP.predio.div3} - 
                              #{editarTasaLiqRP.predio.div4} - #{editarTasaLiqRP.predio.div5} - #{editarTasaLiqRP.predio.div6} - #{editarTasaLiqRP.predio.div7} - #{editarTasaLiqRP.predio.div8} - 
                              #{editarTasaLiqRP.predio.div9} - #{editarTasaLiqRP.predio.phv} - #{editarTasaLiqRP.predio.phh} " style="text-transform: uppercase"/>
                <h:outputText value="Urbanizacion " style="font-weight: bold; text-transform: uppercase"/>
                <h:outputText value="#{editarTasaLiqRP.predio.ciudadela.nombre}" style="text-transform: uppercase"/>
                <h:outputText value="Calle " style="font-weight: bold; text-transform: uppercase"/>
                <h:outputText value="#{editarTasaLiqRP.predio.calle}" style="text-transform: uppercase"/>
            </p:panelGrid>
            <br/>
            <p:dataTable id="dtPredios" value="#{editarTasaLiqRP.predio.catPredioPropietarioCollection}" var="p" reflow="true" style="width: 100%">
                <f:facet name="header">Listado de propietarios</f:facet>
                <p:column headerText="Identificacion" style="width: 30%; text-align: center">
                    <p:outputLabel value="#{p.ente.ciRuc}"/>
                </p:column>
                <p:column headerText="Propietario" style="width: 70%">
                    <p:outputLabel value="#{p.ente.razonSocial}" rendered="#{!p.ente.esPersona}"/>
                    <p:outputLabel value="#{p.ente.apellidos} #{p.ente.nombres}" rendered="#{p.ente.esPersona}"/>
                </p:column>
            </p:dataTable>
            <br/>
            <p:panel id="datosreporte" style="width: 100%">  
                <p:panelGrid id="caracteristica" style="width: 80%">
                    <p:row>
                        <p:column >
                            <center><b>CARACTERÍSTICAS DEL PREDIO</b></center>
                        </p:column>
                        <p:column>
                        </p:column>
                        <p:column>
                            <center><b>DESCRIPCIÓN DE LA EDIFICACIÓN</b></center>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column headerText="CARACTERÍSTICAS DEL PREDIO" >
                            <p:outputLabel value="N./Piso sobre nivel bordillo"/>
                        </p:column>
                        <p:column>
                            <pe:inputNumber value="#{editarTasaLiqRP.avaluo.numPisosSobreBord}" decimalPlaces="0">
                            </pe:inputNumber>
                        </p:column>
                        <p:column headerText="DESCRIPCIÓN DE LA EDIFICACIÓN">
                            Planos Ingresados :  <pe:inputNumber value="#{editarTasaLiqRP.avaluo.numPlanos}" decimalPlaces="0" >
                                <p:ajax event="blur" listener="#{editarTasaLiqRP.calcularTotal()}" update="mainForm"/>
                            </pe:inputNumber>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column >
                            <p:outputLabel value="N./Piso bajo nivel bordillo"/>
                        </p:column>
                        <p:column>
                            <pe:inputNumber value="#{editarTasaLiqRP.avaluo.numPisosBajoBord}" decimalPlaces="0"/>
                        </p:column>
                        <p:column rowspan="5">
                            <p:inputTextarea id="descripcionid" value="#{editarTasaLiqRP.avaluo.descripcion}" rows="10" cols="50" style="width: 100%" readonly="true"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column >
                            <p:outputLabel value="Área de Edificación"/>
                        </p:column>
                        <p:column>
                            <pe:inputNumber value="#{editarTasaLiqRP.avaluo.areaEdificacion}">
                            </pe:inputNumber>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column >
                            <p:outputLabel value="Avaluo de Construcción"/>
                        </p:column>
                        <p:column>
                            <pe:inputNumber id="avaluoConstrid" value="#{editarTasaLiqRP.avaluo.avaluoConstruccion}" >
                            </pe:inputNumber>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column >
                            <p:outputLabel value="Avaluo del Solar"/>
                        </p:column>
                        <p:column>
                            <pe:inputNumber value="#{editarTasaLiqRP.avaluo.avaluoSolar}" >
                            </pe:inputNumber>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column >
                            <p:outputLabel value="Avaluo de la Propiedad"/>
                        </p:column>
                        <p:column>
                            <pe:inputNumber id="avaluoid" value="#{editarTasaLiqRP.avaluo.avaluoPropiedad}" />
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <p:spacer width="5px"/>
                <p:panelGrid id="result" style="width: 40%">
                    <p:row>
                        <p:column>
                            <center><b>BASE DEL CÁLCULO ($)</b></center>
                        </p:column>
                        <p:column>
                            <center><b>TOTAL A PAGAR</b></center>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column style="text-align: center">
                            <pe:inputNumber value="#{editarTasaLiqRP.avaluo.baseCalculo}" decimalPlaces="0" symbol="$"  symbolPosition="p" disabled="true"/>
                        </p:column>
                        <p:column style="text-align: center">
                            <p:inputText id="totalpagar" value="#{editarTasaLiqRP.avaluo.total}"  readonly="true"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="3">
                            Director(a) de Edificaciones: <br/>
                            <p:selectOneMenu value="#{editarTasaLiqRP.avaluo.firma}" effect="fade" converter="entityConverter"> 
                                <f:selectItems value="#{editarTasaLiqRP.firmas}" var="item" itemLabel="#{item.nomCompleto}" itemValue="#{item}"/>  
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="3" >
                            Responsable: <br/>
                            <p:inputText value="#{editarTasaLiqRP.avaluo.responsable}" style="width: 300px" readonly="true"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <h:panelGroup id="botonesGroup">
                    <center>
                        <p:commandButton id="btnGuardar" rendered="#{!editarTasaLiqRP.cert}" update="botonesGroup" actionListener="#{editarTasaLiqRP.guardar()}" icon="ui-icon-document" style="color: #ffffff; width: 150px; background: #616161 !important; font-weight: bold; height: 30px;" value="Guardar Cambios"  />
                        <p:commandButton id="btnImp" ajax="false"  actionListener="#{editarTasaLiqRP.imprimirLiq()}" icon="ui-icon-print" style="color: #ffffff; width: 150px; background: #616161 !important; font-weight: bold; height: 30px;" value="Imprimir Tasa"  />
                        <p:commandButton id="btnFin" value="Retornar" actionListener="#{editarTasaLiqRP.continuar()}" style="color: #ffffff; width: 150px; background: #616161 !important; font-weight: bold; height: 30px;" icon="ui-icon-check"/>
                    </center>
                </h:panelGroup>
            </p:panel>

        </h:form>
    </ui:define>
</ui:composition>