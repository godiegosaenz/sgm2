<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">


    <ui:define name="top">
        <h1>REPORTES EDIFICACIONES</h1>
    </ui:define>

    <ui:define name="content">
        <h:form id="frmEdificaciones" >
            <p:panel style="width: 50%; margin: 0 auto;">
                <p:outputLabel value="Seleccione el tipo de Reporte: " style="font-size: 14px; font-weight: bold;"/>
                <p:spacer width="15"/>
                <p:selectOneMenu value="#{reportesEdificaciones.id}" panelStyle="padding: 0em 1em 1em 1em;">
                    <f:selectItem itemLabel="Seleccione." itemValue="#{null}" />
                    <f:selectItem itemLabel="Reportes Semanal." itemValue="#{1}" />
                    <f:selectItem itemLabel="Asignaci칩n." itemValue="#{2}"/>
                    <f:selectItem itemLabel="Valija." itemValue="#{3}"/>
                    <f:selectItem itemLabel="Tareas Tecnicos." itemValue="#{4}"/>
                    <f:selectItem itemLabel="Detalle Tramites." itemValue="#{5}"/>
                    <p:ajax listener="#{reportesEdificaciones.actualizarSemanal()}"/>
                </p:selectOneMenu>
            </p:panel>
            <br/>

            <p:panel id="pnlSemanal" style="width: 80%; margin: 0 auto;" rendered="#{reportesEdificaciones.id eq 1}">
                <f:facet name="header" >
                    #{reportesEdificaciones.title}
                </f:facet>
                <h:selectOneRadio id="carados2" value="#{reportesEdificaciones.semanal}" style="font-family: Arial;font-weight:lighter;font-size: 12px; width: 100%"  >                                             
                    <f:selectItem itemLabel="Permiso Construcci칩n." itemValue="1" />  
                    <f:selectItem itemLabel="Inspecci칩n Final." itemValue="2"  />  
                </h:selectOneRadio>

                <p:panelGrid columns="4" layout="grid" style="margin: 0 auto">
                    <p:outputLabel value="Memorandum #:"/>
                    <h:panelGroup>
                        <p:inputText value="#{reportesEdificaciones.memorandum}" size="4"/> <p:inputText value="#{reportesEdificaciones.memorandum2}"/>
                    </h:panelGroup>
                    <p:outputLabel value="Desde A침o"/>
                    <p:inputText value="#{reportesEdificaciones.anioDesde}"/>

                    <p:outputLabel value="Dirigido a :"/>
                    <p:inputText value="#{reportesEdificaciones.dirigioA}" />
                    <p:outputLabel value="Cargo :"/>
                    <p:inputText value="#{reportesEdificaciones.cargo}" />

                    <p:outputLabel value="# PC desde:"/>
                    <p:inputText value="#{reportesEdificaciones.permisoDesde}" size="6"/>
                    <p:outputLabel value="Hasta:"/>
                    <p:inputText value="#{reportesEdificaciones.permisoHasta}" size="6"/>
                </p:panelGrid>
                <br/>
                <div align="right">
                    <p:commandButton ajax="false" value="Generar Reporte" actionListener="#{reportesEdificaciones.generarSemanal(3)}" styleClass="btnStyle" icon="ui-icon-document" iconPos="s"/>
                </div>
            </p:panel>

            <p:panel id="pnlAsig" style="width: 80%; margin: 0 auto;" rendered="#{reportesEdificaciones.id eq 2}">
                <f:facet name="header" >
                    #{reportesEdificaciones.title}
                </f:facet>
                <p:selectOneMenu value="#{reportesEdificaciones.departamento}" effect="fade"  converter="entityConverter">
                    <f:attribute name="name" value="GeDepartamento" />
                    <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}" itemDisabled="true"/>
                    <f:selectItems value="#{reportesEdificaciones.departamentos}" var="d" itemLabel="#{d.nombre}" itemValue="#{d.id}" itemDisabled="true" />
                </p:selectOneMenu>
                <br/>
                <p:panelGrid style="width: 80%; margin: 0 auto;" columns="2" layout="grid"  >
                    <p:outputLabel value="Fecha Incio:"/>
                    <p:outputLabel value="Fecha Fin:"/>

                    <p:calendar  value="#{reportesEdificaciones.fechaInicio}" pattern="yyyy-MM-dd"/>
                    <p:calendar value="#{reportesEdificaciones.fechaFin}" pattern="yyyy-MM-dd"/>
                </p:panelGrid>
                <div align="right">
                    <p:commandButton value="Generar Reporte" actionListener="#{reportesEdificaciones.generarSemanal(1)}" styleClass="btnStyle" icon="ui-icon-document" iconPos="s"/>
                </div>
            </p:panel>

            <p:panel id="pnlVal" style="width: 80%; margin: 0 auto;"  rendered="#{reportesEdificaciones.id eq 3}">
                <f:facet name="header" >
                    #{reportesEdificaciones.title}
                </f:facet>
                <p:panelGrid style="width: 80%; margin: 0 auto;" columns="2" layout="grid" >
                    <p:outputLabel value="Fecha Incio:"/>
                    <p:outputLabel value="Fecha Fin:"/>

                    <p:calendar value="#{reportesEdificaciones.fechaInicio}" pattern="yyyy-MM-dd"/>
                    <p:calendar value="#{reportesEdificaciones.fechaFin}" pattern="yyyy-MM-dd"/>
                </p:panelGrid>
                <div align="right">
                    <p:commandButton value="Generar Reporte" actionListener="#{reportesEdificaciones.generarSemanal(2)}" styleClass="btnStyle" icon="ui-icon-document" iconPos="s"/>
                </div>
            </p:panel>
            
            <p:panel style="width: 80%; margin: 0 auto;"  rendered="#{reportesEdificaciones.id eq 4}">
                <f:facet name="header" >
                    #{reportesEdificaciones.title}
                </f:facet>
                <p:panelGrid style="text-align: center;font-weight: bolder;width: 100%;" styleClass="noBorder">
                    <p:row>
                        <p:column>
                            DATOS
                        </p:column>
                        <p:column>
                            TECNICO
                        </p:column>
                        <p:column>
                            TRAMITE
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:selectOneMenu value="#{reportesEdificaciones.tipoReporte}">
                                <f:selectItem itemLabel="RESUMEN" itemValue="#{1}" />
                                <f:selectItem itemLabel="DETALLE" itemValue="#{2}" />
                            </p:selectOneMenu>
                        </p:column>
                        <p:column>
                            <p:selectOneMenu value="#{reportesEdificaciones.tecnicoEdif}" effect="fade" converter="entityConverter">>
                                <f:selectItem itemLabel="TODOS" itemValue="#{null}" />
                                <f:selectItems value="#{reportesEdificaciones.tecnicos}" var="usuario" itemLabel="#{usuario.usuario}-#{usuario.ente.apellidos} #{usuario.ente.nombres}" itemValue="#{usuario}"/>
                            </p:selectOneMenu>
                        </p:column>
                        <p:column>
                            <p:selectOneMenu value="#{reportesEdificaciones.tipoTramiteReporte}" effect="fade">
                                <f:selectItem itemLabel="TODOS" itemValue="#{null}" />
                                <f:selectItem itemLabel="CON CORRECCIONES" itemValue="#{1}" />
                                <f:selectItem itemLabel="SIN CORRECCIONES" itemValue="#{0}" />
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <div align="right">
                    <p:commandButton value="Generar Reporte" actionListener="#{reportesEdificaciones.reporteTareasPorTecnicosEdificaciones()}" styleClass="btnStyle" icon="ui-icon-document" iconPos="s"/>
                </div>
            </p:panel>
            <p:panel id="pnlDetalle" style="width: 80%; margin: 0 auto;"  rendered="#{reportesEdificaciones.id eq 5}">
                <f:facet name="header" >
                    #{reportesEdificaciones.title}
                </f:facet>
                <p:panelGrid style="text-align: center;font-weight: bolder;width: 100%;" styleClass="noBorder">
                    <p:row>
                        <p:column>
                            ESTADO
                        </p:column>
                        <p:column>
                            DESDE
                        </p:column>
                        <p:column>
                            HASTA
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:selectOneMenu value="#{reportesEdificaciones.estadoDetalle}">
                                <f:selectItem itemLabel="TODOS" itemValue="#{null}" />
                                <f:selectItem itemLabel="PENDIENTES" itemValue="#{'Pendiente'}"/>
                                <f:selectItem itemLabel="FINALIZADOS" itemValue="#{'Finalizado'}"/>
                            </p:selectOneMenu>
                        </p:column>
                        <p:column>
                            <p:calendar value="#{reportesEdificaciones.desdeDetalle}" pattern="dd/MM/yyyy"/>
                        </p:column>
                        <p:column>
                            <p:calendar value="#{reportesEdificaciones.hastaDetalle}" pattern="dd/MM/yyyy"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <br/>
                <h:selectOneRadio value="#{reportesEdificaciones.todosTramites}" style="font-family: Arial;font-weight:lighter;font-size: 12px; width: 100%"  >                                             
                    <f:selectItem itemLabel="TODOS LOS TRAMITES." itemValue="#{true}" />  
                    <f:selectItem itemLabel="SELECCIONAR TRAMITE." itemValue="#{false}"  />
                    <p:ajax update="panelTramites"/>
                </h:selectOneRadio>
                <p:panel id="panelTramites">
                    <p:selectManyCheckbox id="grid" value="#{reportesEdificaciones.tramites}" layout="grid" columns="3" rendered="#{!reportesEdificaciones.todosTramites}" style="width: 100%;">
                        <f:selectItems value="#{reportesEdificaciones.depEdificaciones.geTipoTramiteCollection}" var="tramite" itemLabel="#{tramite.descripcion}" itemValue="#{tramite.id}" />
                    </p:selectManyCheckbox>
                </p:panel>
                <div align="right">
                    <p:commandButton value="Generar Reporte" actionListener="#{reportesEdificaciones.reporteDetalleEdificaciones()}" styleClass="btnStyle" icon="ui-icon-document" iconPos="s"/>
                </div>
            </p:panel>

        </h:form>

    </ui:define>

</ui:composition>
