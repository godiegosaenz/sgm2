<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:pe="http://primefaces.org/ui/extensions">

    <ui:define name="events">
        <f:metadata>
            <f:viewParam name="idNuevaNorma" value="#{solicitudNormasConstruccion.idNuevaNorma}" />
            <f:viewParam name="isEspecial" value="#{solicitudNormasConstruccion.isEspecial}" />
        </f:metadata> 
        <f:event type="preRenderView" listener="#{solicitudNormasConstruccion.doPreRenderView()}" />
    </ui:define>

    <ui:define name="page_title">
        solicitud Norma Construcción
    </ui:define>

    <ui:define name="content">
        <h:form id="formNormaConst">
            <p:panelGrid styleClass="noBorder" columns="4" style="width: 100%;font-size: 14px;">
                <p:outputLabel value="Tarea: #{solicitudNormasConstruccion.taskDataByTaskID.name}" style="font-weight: bolder;color: #005f9c"/>
                <p:outputLabel value="No Trámite: #{solicitudNormasConstruccion.ht.id}" style="font-weight: bolder;color: #005f9c"/>
                <p:outputLabel value="Responsable: #{solicitudNormasConstruccion.taskDataByTaskID.assignee}" style="font-weight: bolder;color: #005f9c"/>
            </p:panelGrid>
            
            <p:selectOneRadio id="optconsult" layout="custom" value="#{solicitudNormasConstruccion.subirPdf}">
                <f:selectItem itemLabel="Subir Documento Norma Pdf" itemValue="#{true}"/>
                <f:selectItem itemLabel="Generar Norma" itemValue="#{false}"/>
                <p:ajax listener="#{solicitudNormasConstruccion.update()}" />
            </p:selectOneRadio>
            <h:panelGrid columns="4" style="margin: 0 auto">
                <p:radioButton id="opt1" for="optconsult" itemIndex="0"/>
                <p:outputLabel for="opt1" value="Subir Documento Norma Pdf" />
                <p:radioButton id="opt2" for="optconsult" itemIndex="1"/>
                <p:outputLabel for="opt2" value="Generar Norma" />
            </h:panelGrid>

            <h:panelGroup id="pngSubirPdf" rendered="#{solicitudNormasConstruccion.subirPdf}">
                <p:dataTable id="dtNorma" value="#{solicitudNormasConstruccion.files}" var="doc" style="width: 100%" reflow="true" emptyMessage="No ha cargado documento alguno">
                    <f:facet name="header">
                        Subir Norma de Contrucción
                        <p:commandLink id="btnAgrPla" value="Cargar documentos" onclick="PF('dlgDocPl').show()" style="font-size: 14px; font-weight: bold; color: #0033FF; float: right" />
                    </f:facet>
                    <p:column headerText="Archivo" style="width: 60%">
                        #{doc.nombre}
                    </p:column>
                    <p:column headerText="Tipo" style="width: 20%">
                        #{doc.tipo}
                    </p:column>
                </p:dataTable>
                <br/>
                <div align="center" style="margin-top: 25px;">
                    <p:commandButton value="Adjuntar" actionListener="#{solicitudNormasConstruccion.validar()}" style="height: 30px;" styleClass="btnStyle" icon="ui-icon-check"/>
                </div>
            </h:panelGroup>

            <h:panelGroup id="pngIngNorma" rendered="#{!solicitudNormasConstruccion.subirPdf}">
                <p:panelGrid id="infNorma">
                    <!-- Busqueda Cod Predio -->
                    <p:row styleClass="ui-widget-header" style="margin-top: 10px;" >   
                        <p:column colspan="17" style="font-size: 14px; text-align: center;">
                            Busquda Predio
                        </p:column>
                    </p:row> 
                    <p:row >
                        <p:column>
                            Sector<br/><p:inputText value="#{solicitudNormasConstruccion.predio.sector}" maxlength="4" style="width: 50px;"/>
                        </p:column>
                        <p:column>
                            Mnz. <p:inputText value="#{solicitudNormasConstruccion.predio.mz}" maxlength="4" style="width: 80%;"/>
                        </p:column>
                        <p:column>
                            Cdla. <p:inputText value="#{solicitudNormasConstruccion.predio.cdla}" maxlength="4" style="width: 80%;"/>
                        </p:column>
                        <p:column>
                            Mz. Div <p:inputText value="#{solicitudNormasConstruccion.predio.mzdiv}" maxlength="4" style="width: 70%;"/>
                        </p:column>
                        <p:column>
                            Solar <p:inputText value="#{solicitudNormasConstruccion.predio.solar}" maxlength="4" style="width: 80%;"/>
                        </p:column>
                        <p:column>
                            Div1 <p:inputText value="#{solicitudNormasConstruccion.predio.div1}" maxlength="1"  style="width: 80%;"/>
                        </p:column>
                        <p:column>
                            Div2 <p:inputText value="#{solicitudNormasConstruccion.predio.div2}" maxlength="1"  style="width: 80%;"/>
                        </p:column>
                        <p:column>
                            Div3 <p:inputText value="#{solicitudNormasConstruccion.predio.div3}" maxlength="1"  style="width: 80%;"/>
                        </p:column>
                        <p:column>
                            Div4 <p:inputText value="#{solicitudNormasConstruccion.predio.div4}" maxlength="1"  style="width: 80%;"/>
                        </p:column>
                        <p:column>
                            Div5 <p:inputText value="#{solicitudNormasConstruccion.predio.div5}" maxlength="1"  style="width: 80%;"/>
                        </p:column>
                        <p:column>
                            Div6 <p:inputText value="#{solicitudNormasConstruccion.predio.div6}" maxlength="1"  style="width: 80%;"/>
                        </p:column>
                        <p:column>
                            Div7 <p:inputText value="#{solicitudNormasConstruccion.predio.div7}" maxlength="1"  style="width: 80%;"/>
                        </p:column>
                        <p:column>
                            Div8 <p:inputText value="#{solicitudNormasConstruccion.predio.div8}" maxlength="1"  style="width: 80%;"/>
                        </p:column>
                        <p:column>
                            Div9 <p:inputText value="#{solicitudNormasConstruccion.predio.div9}" maxlength="1"  style="width: 80%;"/>
                        </p:column>
                        <p:column>
                            Phv <p:inputText value="#{solicitudNormasConstruccion.predio.phv}" maxlength="2" style="width: 80%;"/>
                        </p:column>
                        <p:column >
                            Phh <br/>
                            <p:inputText value="#{solicitudNormasConstruccion.predio.phh}" maxlength="2" style="width: 80%;"/>
                        </p:column>
                        <p:column >
                            <p:commandLink action="#{solicitudNormasConstruccion.consultarCodPredio()}" update="formNormaConst:pngIngNorma" >
                                <p:graphicImage value="/css/homeIconsImages/buscar.png" width="20" height="20"/>
                            </p:commandLink>
                        </p:column>
                    </p:row>
                    <p:row >
                        <p:column colspan="5">
                            Número Predio <p:inputText id="numPre" value="#{solicitudNormasConstruccion.numPredio}" /><p:spacer width="5"/>
                            <p:commandLink action="#{solicitudNormasConstruccion.consultarNumPredio()}" update="formNormaConst:pngIngNorma" >
                                <p:graphicImage value="/css/homeIconsImages/buscar.png" width="20" height="20"/>
                            </p:commandLink>
                        </p:column>
                        <p:column colspan="4">
                            Urbanización: <p:inputText value="#{solicitudNormasConstruccion.predio.ciudadela.nombre}" readonly="true"/>
                        </p:column>
                        <p:column colspan="2">
                            Mz: <p:inputText value="#{solicitudNormasConstruccion.predio.urbMz}" readonly="true" style="width: 50%"/>
                        </p:column>
                        <p:column colspan="2">
                            Solar: <p:inputText value="#{solicitudNormasConstruccion.predio.urbSolarnew}" readonly="true" style="width: 50%"/>
                        </p:column>
                        <p:column colspan="4">
                            Calle: <p:inputText value="#{solicitudNormasConstruccion.predio.calle}" readonly="true"/>
                        </p:column>
                    </p:row>
                    <p:row styleClass="ui-widget-header">
                        <p:column colspan="17" style="font-size: 14px; text-align: center; color: #0066cc; font-weight: bold;" styleClass="headerWhite" >
                            Ingreso de Solicitud de Normas de Construcción
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="17" style="text-align: center" >
                            <p:dataTable id="dtPropiet" value="#{solicitudNormasConstruccion.listaPropietarios}" var="pro" emptyMessage="no se encontro Ningun Registro" reflow="true" >
                                <f:facet name="header" >
                                    <div align="right">
                                        <p:commandLink value="Agregar Propietario" action="#{solicitudNormasConstruccion.renderPersNat()}" style="font-size: 14px; color: #0033FF;" disabled="true"/>
                                    </div>
                                </f:facet>
                                <p:column headerText="#C.I. O R.U.C" width="15%">
                                    <p:outputLabel value="#{pro.ente.ciRuc}"/>
                                </p:column>
                                <p:column headerText="Propietario">
                                    <p:outputLabel value="#{pro.ente.apellidos} #{pro.ente.nombres}" rendered="#{pro.ente.esPersona}"/>
                                    <p:outputLabel value="#{pro.ente.razonSocial}" rendered="#{!pro.ente.esPersona}"/>
                                </p:column>
                                <p:column headerText="Acción" width="10%">
                                    <p:commandLink value="Eliminar" action="#{solicitudNormasConstruccion.eliminarProp(pro)}" style="color: #0033FF"/>
                                </p:column>
                            </p:dataTable>
                        </p:column>
                    </p:row>
                    <p:row >
                        <p:column colspan="5">
                            <h:panelGroup>
                                Ced. Identidad: <p:inputText id="numCed" value="#{solicitudNormasConstruccion.responsable.ciRuc}" /><p:spacer width="5"/>
                                <p:commandLink ajax="false" actionListener="#{solicitudNormasConstruccion.buscarResponsable()}" >
                                    <p:graphicImage value="/css/homeIconsImages/buscar.png" width="20" height="20"/>
                                </p:commandLink>
                            </h:panelGroup>
                        </p:column>
                        <p:column colspan="8">
                            Profesional: 
                            <p:inputText id="resp" value="#{solicitudNormasConstruccion.responsable.tituloProf} #{solicitudNormasConstruccion.responsable.apellidos} #{solicitudNormasConstruccion.responsable.nombres}" readonly="true" style="width: 80%"/>
                            <p:commandLink actionListener="#{solicitudNormasConstruccion.editarResponsable()}" >
                                <p:graphicImage value="/css/homeIconsImages/edicion.png" width="20" height="20"/>
                            </p:commandLink>
                        </p:column>
                        <p:column colspan="4">
                            Reg. Profesional: <p:inputText id="RegPro" value="#{solicitudNormasConstruccion.responsable.regProf}" readonly="true"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="4">
                            Norte: <pe:inputNumber value="#{solicitudNormasConstruccion.solicitud.linderoNorteEscritura}" />
                        </p:column>
                        <p:column colspan="3">
                            Sur: <pe:inputNumber value="#{solicitudNormasConstruccion.solicitud.linderoSurEscritura}" />
                        </p:column>
                        <p:column colspan="3">
                            Este: <pe:inputNumber value="#{solicitudNormasConstruccion.solicitud.linderoEsteEscritura}" />
                        </p:column>
                        <p:column colspan="3">
                            Oesta: <pe:inputNumber value="#{solicitudNormasConstruccion.solicitud.linderoOesteEscritura}" />
                        </p:column>
                        <p:column colspan="4">
                            Area Total: <pe:inputNumber value="#{solicitudNormasConstruccion.solicitud.areaTotal}" />
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="4">
                            Uso del Predio: <p:inputText value="#{solicitudNormasConstruccion.solicitud.usoSuelo}" />
                        </p:column>
                        <p:column colspan="3">
                            Tipo de Edificacion: <p:inputText value="#{solicitudNormasConstruccion.solicitud.tipoEdificacion}" />
                        </p:column>
                        <p:column colspan="3">
                            C.O.S %: <pe:inputNumber value="#{solicitudNormasConstruccion.solicitud.cos}" />
                        </p:column>
                        <p:column colspan="3">
                            C.U.S %: <pe:inputNumber value="#{solicitudNormasConstruccion.solicitud.cus}" />
                        </p:column>
                        <p:column colspan="4">
                            # DE PLANTAS: <p:inputText value="#{solicitudNormasConstruccion.solicitud.numPlantas}" />
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="5">
                            <p:outputLabel value="Ciudadela: " /> 
                            <p:selectOneMenu id="ciudadela" value="#{solicitudNormasConstruccion.ciudadela}" converter="entityConverter"   >
                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}" />
                                <f:selectItems value="#{solicitudNormasConstruccion.ciudadelaList}" var="c" itemLabel="#{c.nombre}" itemValue="#{c}"/>
                                <p:ajax listener="#{solicitudNormasConstruccion.buscarNormaAsociada()}"/>
                            </p:selectOneMenu>
                        </p:column>
                        <p:column colspan="2">
                            Mz: <p:inputText value="#{solicitudNormasConstruccion.solicitud.urbMz}" style="width: 50%"/>
                        </p:column>
                        <p:column colspan="2">
                            Solar: <p:inputText value="#{solicitudNormasConstruccion.solicitud.urbSolar}" style="width: 50%"/>
                        </p:column>
                        <p:column colspan="8" style="text-align: right;" >
                            <p:commandLink value="Tipo Norma Especial" action="#{solicitudNormasConstruccion.tipoNormaEspecial()}" style="font-size: 16px; color: #0033FF; font-weight: bold; " />
                        </p:column>
                    </p:row>

                    <p:row styleClass="ui-widget-header">
                        <p:column colspan="17" style="font-size: 14px; text-align: center; color: #0066cc" styleClass="headerWhite" >
                            Normas de Construcción
                        </p:column>
                    </p:row>
                    <p:row >
                        <p:column colspan="17" style="text-align: center; " >
                            <h:outputLabel value="Retiros " style="color: #005f9c; font-size: 14px;"/>
                            <p:dataTable id="dtRetiros" value="#{solicitudNormasConstruccion.listaRetiros}" var="lrt" 
                                         reflow="true" emptyMessage="No hay Información sobre Retiro Lateral...">
                                <p:column headerText="Mostrar" style="width: 80px;">
                                    <p:rowToggler />
                                </p:column>
                                <p:column headerText="Retiro" style="width: 30%;">
                                    <p:outputLabel value="#{lrt.nombreCodigo}"   style="width: 100%;"/>
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:inputText readonly="true" value="#{lrt.descripcion}" style="width: 95%; border: 0 #ffffff"/>
                                </p:column>
                                <p:rowExpansion>
                                    <p:panelGrid columns="1">
                                        <p:outputLabel value="#{lrt.nombreCodigo}"   style="color: #005f9c; font-size: 11px;"/>
                                        <p:inputTextarea value="#{lrt.descripcion}"   style="width: 100%;" readonly="true"/>
                                    </p:panelGrid>
                                </p:rowExpansion>

                            </p:dataTable>
                        </p:column>
                    </p:row>
                    <p:row styleClass="ui-widget-header">
                        <p:column colspan="17" style="font-size: 14px; text-align: center; color: #0066cc" styleClass="headerWhite"  >
                            Alturas
                        </p:column>
                    </p:row>
                    <p:row >
                        <p:column colspan="17" style="text-align: center; " >
                            <!--h:outputLabel value="Retiro Lateral: " style="color: #005f9c; font-size: 14px;"/-->
                            <p:dataTable id="dtAlturas" value="#{solicitudNormasConstruccion.listaAlturas}" var="lal" 
                                         reflow="true" emptyMessage="No hay Información sobre Retiro Lateral..." >
                                <p:column headerText="Mostrar" style="width: 80px;">
                                    <p:rowToggler />
                                </p:column>
                                <p:column headerText="Altura" style="width: 30%;">
                                    <p:outputLabel value="#{lal.nombreCodigo}"   style="width: 100%;"/>
                                </p:column>
                                <p:column headerText="Descripción">
                                    <h:inputText readonly="true" value="#{lal.descripcion}"   style="width: 95%; border: 0 #ffffff"/>
                                </p:column>
                                <p:rowExpansion>
                                    <p:panelGrid columns="1">
                                        <p:outputLabel value="#{lal.nombreCodigo}"   style="color: #005f9c; font-size: 11px;"/>
                                        <p:inputTextarea value="#{lal.descripcion}"   style="width: 100%;" readonly="true"/>
                                    </p:panelGrid>
                                </p:rowExpansion>
                            </p:dataTable>
                        </p:column>
                    </p:row>
                    <p:row styleClass="ui-widget-header"  >
                        <p:column colspan="17" style="font-size: 14px; text-align: center; color: #0066cc" styleClass="headerWhite" >
                            Disposiciones Generales
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="9" style="font-size: 14px; text-align: center" >
                            <h:outputLabel value="Estructura: " style="color: #005f9c; font-size: 14px;"/>
                            <p:inputTextarea value="#{solicitudNormasConstruccion.normaConstruccion.estructura}" scrollHeight="10"  style="width: 100%;" readonly="true" />
                        </p:column>
                        <p:column colspan="8" style="font-size: 14px; text-align: center" >
                            <h:outputLabel value="Cubirta: " style="color: #005f9c; font-size: 14px;"/>
                            <p:inputTextarea value="#{solicitudNormasConstruccion.normaConstruccion.cubierta}" scrollHeight="10"  style="width: 100%;" readonly="true" />
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <br/>
                <p:dataTable id="dtDisposiciones" value="#{solicitudNormasConstruccion.listaDisposicionGeneral}" var="ldg" 
                             reflow="true" emptyMessage="No hay Información sobre Retiro Lateral..." >
                    <p:column headerText="Mostrar" style="width: 80px;">
                        <p:rowToggler />
                    </p:column>
                    <p:column headerText="Disposición" style="width: 25%; text-align: center;">
                        <p:outputLabel value="#{ldg.nombreCodigo}"   style="width: 100%;"/>
                    </p:column>
                    <p:column headerText="Descripción">
                        <h:inputText readonly="true" value="#{ldg.descripcion}"   style="width: 95%; border: 0 #ffffff"/>
                    </p:column>
                    <p:rowExpansion>
                        <p:panelGrid columns="1">
                            <p:outputLabel value="#{ldg.nombreCodigo}" style="color: #005f9c; font-size: 11px;"/>
                            <p:inputTextarea value="#{ldg.descripcion}" style="width: 100%;" readonly="true"/>
                        </p:panelGrid>
                    </p:rowExpansion>
                </p:dataTable>
                <br/>
                <p:graphicImage value="#{imageManagedBean.imageAllEntity}" height="250px" width="250px" rendered="#{solicitudNormasConstruccion.hayImagen}">
                    <f:param name="id" value="#{solicitudNormasConstruccion.normaConstruccion.id}"/>
                    <f:param name="nameEntity" value="CatNormasConstruccion"/>
                </p:graphicImage>
                <div align="right" style="margin-top: 25px;">
                    <p:commandButton value="Guardar" actionListener="#{solicitudNormasConstruccion.grabarSolicitudNormas()}" rendered="#{!solicitudNormasConstruccion.ocultarGuardar}" style="height: 30px;" styleClass="btnStyle" icon="ui-icon-disk"/>
                    <p:commandButton value="Imprimir" actionListener="#{solicitudNormasConstruccion.mostarObservacion()}" rendered="#{solicitudNormasConstruccion.ocultarGuardar}" style="height: 30px;" styleClass="btnStyle" icon="ui-icon-print"/>
                    <p:commandButton value="Bandeja de Tarea" actionListener="#{solicitudNormasConstruccion.continuar()}" rendered="#{solicitudNormasConstruccion.ocultarGuardar}" style="height: 30px;" styleClass="btnStyle" icon="ui-icon-circle-arrow-w"/>
                </div>
            </h:panelGroup>

        </h:form>

        <p:dialog id="dlgObs" widgetVar="obs" header="#{solicitudNormasConstruccion.taskDataByTaskID.name}" appendTo="@(body)" modal="true" width="500" resizable="false" closable="true" closeOnEscape="true">
            <h:form id="frmObsCor">
                <h1>Ingrese las observaciones</h1>
                <div align="center">
                    <p:inputTextarea id="obsservacion" value="#{solicitudNormasConstruccion.obs.observacion}" rows="4" style="width: 100%; text-transform: uppercase" required="true" placeholder="Las observaciones son obligatorias para continuar con el tramite"/>
                    <br/>
                    <p:commandButton id="btnAprobar" value="Finalizar" actionListener="#{solicitudNormasConstruccion.imprimirNorma()}" style="height: 30px;" styleClass="btnStyle" icon="ui-icon-check" iconPos="s" rendered="#{!solicitudNormasConstruccion.subirPdf}"/>
                    <p:commandButton id="btnSubir" value="Finalizar" actionListener="#{solicitudNormasConstruccion.subirNormaPdf()}" style="height: 30px;" styleClass="btnStyle" icon="ui-icon-check" iconPos="s" rendered="#{solicitudNormasConstruccion.subirPdf}"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgDocPl" modal="true">
            <h:form>
                <p:fileUpload  fileUploadListener="#{solicitudNormasConstruccion.handleFileUpload}" multiple="true" mode="advanced"
                               label="Seleccionar" uploadLabel="Subir" cancelLabel="Cancelar" skinSimple="true" 
                               sizeLimit="35000000" update="formNormaConst:dtNorma" allowTypes="/(\.|\/)(pdf|docx)$/" oncomplete="PF('dlgDocPl').hide()"/>
                <div align="center">
                    <p:commandButton id="AgrNorma" value="Aceptar" onclick="PF('dlgDocPl').hide()" style="height: 30px;" styleClass="btnStyle"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog header="Ingreso de Información" id="tipoNormEsp" widgetVar="tipoNormEsp" modal="true" height="400" width="350"  >  
            <h:form id="formTipoNormEsp" >
                <h1>SELECCIONAR TIPO DE NORMAS</h1>
                <br/>
                <h:outputText value="Tipo: " />  <br/>
                <p:selectOneRadio  value="#{solicitudNormasConstruccion.idNorma}" layout="pageDirection"  >  
                    <f:selectItems value="#{solicitudNormasConstruccion.listNormaTipoEspecial}" var="tp" itemLabel="#{tp.tipo}" itemValue="#{tp.id}"/>  
                    <p:ajax event="change" listener="#{solicitudNormasConstruccion.normaSelecionada(true)}" oncomplete="PF('tipoNormEsp').hide()"/>  
                </p:selectOneRadio> 
                <br/>
                <p:commandLink value="Agregar Nuevo" actionListener="#{solicitudNormasConstruccion.ingresarNuevoTipo()}" update="formTipoNormEsp" style="color: #0033FF;font-weight: bolder"/>
                <h:panelGroup id="nuevoTipo" rendered="#{solicitudNormasConstruccion.nuevaNorma}">
                    <p:inputText value="#{solicitudNormasConstruccion.nuevoTipoNorma.tipo}"/>
                    <p:commandButton value="Guardar" actionListener="#{solicitudNormasConstruccion.guardarNuevaNormaTipo()}" styleClass="btnStyle" style="height: 30px;"  />          
                </h:panelGroup>  
            </h:form>
        </p:dialog>

        <p:dialog header="Ingreso de Información" id="tipoNorm" widgetVar="tipoNorm" modal="true" height="400" width="350"  >  
            <h:form id="formTipoNorm" >
                ESTA CIUDADELA NO TIENE ASOCIADO UNA NORMA DE CONSTRUCCION
                <br/>
                <h:outputText value="Tipo: " />  <br/>
                <p:selectOneRadio  value="#{solicitudNormasConstruccion.idNorma}" layout="pageDirection"  >  
                    <f:selectItems value="#{solicitudNormasConstruccion.listNormaTipo}" var="tp" itemLabel="#{tp.tipo}" itemValue="#{tp.id}"/>  
                    <p:ajax event="change" listener="#{solicitudNormasConstruccion.normaSelecionada(false)}" oncomplete="PF('tipoNorm').hide()"/>  
                </p:selectOneRadio> 
                <br/>
                <p:commandLink value="Agregar Nuevo" actionListener="#{solicitudNormasConstruccion.ingresarNuevoTipo()}" update="formTipoNorm" style="color: #0033FF;font-weight: bolder"/>
                <h:panelGroup id="nuevTipo" rendered="#{solicitudNormasConstruccion.nuevaNorma}">
                    <p:inputText value="#{solicitudNormasConstruccion.nuevoTipoNorma.tipo}"/>
                    <p:commandButton  value="Guardar"  actionListener="#{solicitudNormasConstruccion.guardarNuevaNormaTipoCiud()}" styleClass="btnStyle" style="height: 30px;"  />          
                </h:panelGroup>  
            </h:form>
        </p:dialog>

        <p:dialog header="Información Responsable Tecnico" id="editDlgResp" widgetVar="dlgEditRespTec" modal="true" height="300" width="500" >
            <h:form id="formEditResp">
                <p:panelGrid id="pngEditResp" layout="grid" columns="2">
                    Es Persona Natural
                    <p:selectBooleanCheckbox value="#{solicitudNormasConstruccion.responsable.esPersona}" disabled="true"/>
                    No. Cédula 
                    <p:inputMask mask="9999999999" value="#{solicitudNormasConstruccion.responsable.ciRuc}"/>
                    Nombres 
                    <p:inputText value="#{solicitudNormasConstruccion.responsable.nombres}"/>
                    Apellidos 
                    <p:inputText value="#{solicitudNormasConstruccion.responsable.apellidos}"/>
                    Titulo Profesional 
                    <p:inputText value="#{solicitudNormasConstruccion.responsable.tituloProf}"/>
                    Registro Profesional 
                    <p:inputText value="#{solicitudNormasConstruccion.responsable.regProf}"/>
                </p:panelGrid>
                <br/>
                <p:commandButton id="btnGuardResp" value="Aceptar" actionListener="#{solicitudNormasConstruccion.guardarResponsable()}" style="float: right; height: 30px;" styleClass="btnStyle" icon="ui-icon-disk"/>
            </h:form>    
        </p:dialog>

        <p:dialog header="Agregar Propietario" id="dlgNuevPro" widgetVar="dlgNuevPro" modal="true" height="250" 
                  width="450" resizable="false" >
            <h:form id="formNuProp">
                Es Perona Natural 
                <p:selectBooleanCheckbox value="#{solicitudNormasConstruccion.propietario.esPersona}" >
                    <p:ajax update="formNuProp" />
                </p:selectBooleanCheckbox>
                <br/>
                <p:panelGrid id="pngProp" layout="grid" columns="3" >
                    <p:outputLabel value="Cédula: " rendered="#{solicitudNormasConstruccion.propietario.esPersona}"/>
                    <p:inputMask mask="9999999999" value="#{solicitudNormasConstruccion.propietario.ciRuc}" rendered="#{solicitudNormasConstruccion.propietario.esPersona}" />
                    <p:outputLabel value="RUC: " rendered="#{!solicitudNormasConstruccion.propietario.esPersona}"/>
                    <p:inputMask mask="9999999999999" value="#{solicitudNormasConstruccion.propietario.ciRuc}" rendered="#{!solicitudNormasConstruccion.propietario.esPersona}"/>
                    <p:commandButton actionListener="#{solicitudNormasConstruccion.buscarPropietario()}" icon="ui-icon-search" iconPos="s" style="height: 30px; color: #ffffff; background: #616161 !important;"/>

                    <p:outputLabel value="Nombres: " />
                    <p:inputText value="#{solicitudNormasConstruccion.propietario.nombres}" style="width: 180px" rendered="#{solicitudNormasConstruccion.propietario.esPersona}"/>
                    <p:inputText value="#{solicitudNormasConstruccion.propietario.razonSocial}" style="width: 180px" rendered="#{!solicitudNormasConstruccion.propietario.esPersona}"/>
                    <p:outputLabel/>

                    <p:outputLabel value="Apellidos: " rendered="#{solicitudNormasConstruccion.propietario.esPersona}"/>
                    <p:inputText value="#{solicitudNormasConstruccion.propietario.apellidos}" style="width: 180px" rendered="#{solicitudNormasConstruccion.propietario.esPersona}"/>
                    <p:outputLabel value="Representante Legal: " rendered="#{!solicitudNormasConstruccion.propietario.esPersona}"/>
                    <p:inputText value="#{solicitudNormasConstruccion.representanteLegal}" readonly="true"  rendered="#{!solicitudNormasConstruccion.propietario.esPersona}"/>
                    <p:commandButton id="busReprestL" actionListener="#{solicitudNormasConstruccion.seleccionarReprest()}"  rendered="#{!solicitudNormasConstruccion.propietario.esPersona}" style="height: 30px;" styleClass="btnStyle" icon="ui-icon-search" />
                </p:panelGrid>
                <br/>
                <p:commandButton value="Agregar" type="button" actionListener="#{solicitudNormasConstruccion.agregarPropietario()}" style="float: right" styleClass="btnStyle"/>
            </h:form>    
        </p:dialog>

        <p:dialog id="dlgSelectReprest" header="Representantes" widgetVar="dlgSelectReprest" resizable="false" modal="false" position="center" closable="true" width="800">
            <h:form id="formSelectInterv">
                <p:dataTable id="dtIntervLazy" paginator="true" lazy="true" rows="10" rowsPerPageTemplate="10,30,50" scrollHeight="350" scrollable="true"
                             paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             value="#{solicitudNormasConstruccion.enteLazy}" var="user" emptyMessage="No se encontró ningún Item">
                    <p:column headerText="C.I./R.U.C." style="text-align: center;" filterBy="#{user.ciRuc}" filterStyle="width: 80%;" width="120">
                        <h:outputText value="#{user.ciRuc}" style="text-align: center; font-size: 12px"/>
                    </p:column>
                    <p:column headerText="Nombres" style="text-align: center" filterBy="#{user.nombres}" filterStyle="width: 80%;" >
                        <h:outputText value="#{user.nombres}"/>
                    </p:column>
                    <p:column headerText="Apellidos" style="text-align: center" filterBy="#{user.apellidos}" filterStyle="width: 80%;" >
                        <h:outputText value="#{user.apellidos}"/>
                    </p:column>   
                    <p:column headerText="Selecc." style="text-align: center;" width="60">
                        <p:commandButton icon="ui-icon-plusthick" style="height: 20px;" styleClass="btnStyle" actionListener="#{solicitudNormasConstruccion.agregarRepresentante(user)}" />                           
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

    </ui:define>

</ui:composition>
