<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="events">
        <f:metadata>
            <f:viewParam name="idNorma" value="#{normasConstruccionEdicion.idNorma}" />
        </f:metadata> 
        <f:event type="preRenderView" listener="#{normasConstruccionEdicion.doPreRenderView()}" />
    </ui:define>

    <ui:define name="page_title">
        Norma Construcción
    </ui:define>

    <ui:define name="top">
        <h1>Ingreso Norma Construcción</h1>
    </ui:define>

    <ui:define name="content">
        <h:form id="formNormaConstIngr">
            <p:outputLabel value="Ciudadela: " /> 
            <p:selectOneMenu id="ciudadela" value="#{normasConstruccionEdicion.ciudadela}" converter="entityConverter" >
                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}" />
                <f:selectItems value="#{normasConstruccionEdicion.ciudadelaList}" var="c" itemLabel="#{c.nombre}" itemValue="#{c}"/>
            </p:selectOneMenu>
            <br/>
            <p:accordionPanel id="inf">
                <!-- RETIROS -->
                <p:tab id="infRet" title="Retiros">
                    <p:outputLabel value="Retiro Frontal: " style="color: #005f9c; font-size: 14px;"/>
                    <br/>
                    <p:dataTable id="dtRetFront" value="#{normasConstruccionEdicion.retiroFrontal}" var="rf" reflow="true" emptyMessage="No hay Información sobre Retiro Frontal..." >
                        <f:facet name="header" >
                            <div align="right">
                                <p:commandLink value="Agregar" actionListener="#{normasConstruccionEdicion.mostrarIngreso(1)}" style="color: #0033FF; font-size: 14px; "/>
                            </div>
                        </f:facet>
                        <p:column headerText="Mostrar" style="width: 80px;">
                            <p:rowToggler />
                        </p:column>
                        <p:column headerText="Disposición" style="width: 25%; text-align: center;">
                            <p:outputLabel value="#{rf.nombreCodigo}"   style="width: 100%;"/>
                        </p:column>
                        <p:column headerText="Descripción">
                            <h:inputText readonly="true" value="#{rf.descripcion}"   style="width: 95%; border: 0 #ffffff"/>
                        </p:column>
                        <p:column headerText="Acción" style="width: 100px; text-align: center;">
                            <p:commandLink value="Eliminar" actionListener="#{normasConstruccionEdicion.eliminarRetirosAumentos(rf)}" style="color: #0033FF; "/>
                        </p:column>
                        <p:rowExpansion>
                            <p:panelGrid columns="1">
                                <p:outputLabel value="#{rf.nombreCodigo}" style="color: #005f9c; font-size: 11px;"/>
                                <p:inputTextarea value="#{rf.descripcion}" style="width: 100%;" readonly="true"/>
                            </p:panelGrid>
                        </p:rowExpansion>
                    </p:dataTable>
                    <p:spacer height="30"/>

                    <p:outputLabel value="Retiro Posterior: " style="color: #005f9c; font-size: 14px;"/>
                    <p:dataTable id="dtRetPost" value="#{normasConstruccionEdicion.retiroPosterior}" var="rp" reflow="true" emptyMessage="No hay Información sobre Retiro Posterior..." >
                        <f:facet name="header" >
                            <div align="right">
                                <p:commandLink value="Agregar" actionListener="#{normasConstruccionEdicion.mostrarIngreso(3)}" style="color: #0033FF; font-size: 14px; "/>
                            </div>
                        </f:facet>
                        <p:column headerText="Mostrar" style="width: 80px;">
                            <p:rowToggler />
                        </p:column>
                        <p:column headerText="Disposición" style="width: 25%; text-align: center;">
                            <p:outputLabel value="#{rp.nombreCodigo}"   style="width: 100%;"/>
                        </p:column>
                        <p:column headerText="Descripción">
                            <h:inputText readonly="true" value="#{rp.descripcion}"   style="width: 95%; border: 0 #ffffff"/>
                        </p:column>
                        <p:column headerText="Acción" style="width: 100px; text-align: center;">
                            <p:commandLink value="Eliminar" actionListener="#{normasConstruccionEdicion.eliminarRetirosAumentos(rp)}" style="color: #0033FF; "/>
                        </p:column>
                        <p:rowExpansion>
                            <p:panelGrid columns="1">
                                <p:outputLabel value="#{rp.nombreCodigo}" style="color: #005f9c; font-size: 11px;"/>
                                <p:inputTextarea value="#{rp.descripcion}" style="width: 100%;" readonly="true"/>
                            </p:panelGrid>
                        </p:rowExpansion>
                    </p:dataTable>
                    <p:spacer height="30"/>

                    <p:outputLabel value="Retiro Lateral: " style="color: #005f9c; font-size: 14px;"/>
                    <p:dataTable id="dtRetLat" value="#{normasConstruccionEdicion.retiroLateral}" var="rl" reflow="true" emptyMessage="No hay Información sobre Retiro Lateral..." >
                        <f:facet name="header" >
                            <div align="right">
                                <p:commandLink value="Agregar" actionListener="#{normasConstruccionEdicion.mostrarIngreso(2)}" style="color: #0033FF; font-size: 14px; "/>
                            </div>
                        </f:facet>
                        <p:column headerText="Mostrar" style="width: 80px;">
                            <p:rowToggler />
                        </p:column>
                        <p:column headerText="Disposición" style="width: 25%; text-align: center;">
                            <p:outputLabel value="#{rl.nombreCodigo}"   style="width: 100%;"/>
                        </p:column>
                        <p:column headerText="Descripción">
                            <h:inputText readonly="true" value="#{rl.descripcion}"   style="width: 95%; border: 0 #ffffff"/>
                        </p:column>
                        <p:column headerText="Acción" style="width: 100px; text-align: center;">
                            <p:commandLink value="Eliminar" actionListener="#{normasConstruccionEdicion.eliminarRetirosAumentos(rl)}" style="color: #0033FF; "/>
                        </p:column>
                        <p:rowExpansion>
                            <p:panelGrid columns="1">
                                <p:outputLabel value="#{rl.nombreCodigo}" style="color: #005f9c; font-size: 11px;"/>
                                <p:inputTextarea value="#{rl.descripcion}" style="width: 100%;" readonly="true"/>
                            </p:panelGrid>
                        </p:rowExpansion>
                    </p:dataTable>
                </p:tab>
                <!-- ALTURAS -->
                <p:tab id="infAlt" title="Alturas">
                    <p:outputLabel value="Altura Max. Edificación: " style="color: #005f9c; font-size: 14px;"/>
                    <p:dataTable id="dtAltEdif" value="#{normasConstruccionEdicion.alturaMaxEdificación}" var="ad" reflow="true" emptyMessage="No hay Información sobre Altura Max. Edificación..." >
                        <f:facet name="header" >
                            <div align="right">
                                <p:commandLink value="Agregar" actionListener="#{normasConstruccionEdicion.mostrarIngreso(4)}" style="color: #0033FF; font-size: 14px; "/>
                            </div>
                        </f:facet>
                        <p:column headerText="Mostrar" style="width: 80px;">
                            <p:rowToggler />
                        </p:column>
                        <p:column headerText="Disposición" style="width: 25%; text-align: center;">
                            <p:outputLabel value="#{ad.nombreCodigo}"   style="width: 100%;"/>
                        </p:column>
                        <p:column headerText="Descripción">
                            <h:inputText readonly="true" value="#{ad.descripcion}"   style="width: 95%; border: 0 #ffffff"/>
                        </p:column>
                        <p:column headerText="Acción" style="width: 100px; text-align: center;">
                            <p:commandLink value="Eliminar" actionListener="#{normasConstruccionEdicion.eliminarRetirosAumentos(ad)}" style="color: #0033FF; "/>
                        </p:column>
                        <p:rowExpansion>
                            <p:panelGrid columns="1">
                                <p:outputLabel value="#{ad.nombreCodigo}" style="color: #005f9c; font-size: 11px;"/>
                                <p:inputTextarea value="#{ad.descripcion}" style="width: 100%;" readonly="true"/>
                            </p:panelGrid>
                        </p:rowExpansion>
                    </p:dataTable>
                    <p:spacer height="30"/>

                    <p:outputLabel value="Altura Antepechos de Ventanas: " style="color: #005f9c; font-size: 14px;"/>
                    <p:dataTable id="dtAltVent" value="#{normasConstruccionEdicion.alturaAntepechosVentanas}" var="av" reflow="true" emptyMessage="No hay Información sobre Altura Antepechos de Ventanas..." >
                        <f:facet name="header" >
                            <div align="right">
                                <p:commandLink value="Agregar" actionListener="#{normasConstruccionEdicion.mostrarIngreso(6)}" style="color: #0033FF; font-size: 14px;"/>
                            </div>
                        </f:facet>
                        <p:column headerText="Mostrar" style="width: 80px;">
                            <p:rowToggler />
                        </p:column>
                        <p:column headerText="Disposición" style="width: 25%; text-align: center;">
                            <p:outputLabel value="#{av.nombreCodigo}"   style="width: 100%;"/>
                        </p:column>
                        <p:column headerText="Descripción">
                            <h:inputText readonly="true" value="#{av.descripcion}"   style="width: 95%; border: 0 #ffffff"/>
                        </p:column>
                        <p:column headerText="Acción" style="width: 100px; text-align: center;">
                            <p:commandLink value="Eliminar" actionListener="#{normasConstruccionEdicion.eliminarRetirosAumentos(av)}" style="color: #0033FF; "/>
                        </p:column>
                        <p:rowExpansion>
                            <p:panelGrid columns="1">
                                <p:outputLabel value="#{av.nombreCodigo}" style="color: #005f9c; font-size: 11px;"/>
                                <p:inputTextarea value="#{av.descripcion}" style="width: 100%;" readonly="true"/>
                            </p:panelGrid>
                        </p:rowExpansion>
                    </p:dataTable>
                    <p:spacer height="30"/>

                    <p:outputLabel value="Altura Max. Cerramiento: " style="color: #005f9c; font-size: 14px;"/>
                    <p:dataTable id="dtAltCerr" value="#{normasConstruccionEdicion.alturaMaxCerramiento}" var="ac" reflow="true" emptyMessage="No hay Información sobre Altura Max. Cerramiento..." >
                        <f:facet name="header" >
                            <div align="right">
                                <p:commandLink value="Agregar" actionListener="#{normasConstruccionEdicion.mostrarIngreso(5)}" style="color: #0033FF; font-size: 14px; "/>
                            </div>
                        </f:facet>
                        <p:column headerText="Mostrar" style="width: 80px;">
                            <p:rowToggler />
                        </p:column>
                        <p:column headerText="Disposición" style="width: 25%; text-align: center;">
                            <p:outputLabel value="#{ac.nombreCodigo}"   style="width: 100%;"/>
                        </p:column>
                        <p:column headerText="Descripción">
                            <h:inputText readonly="true" value="#{ac.descripcion}"   style="width: 95%; border: 0 #ffffff"/>
                        </p:column>
                        <p:column headerText="Acción" style="width: 100px; text-align: center;">
                            <p:commandLink value="Eliminar" actionListener="#{normasConstruccionEdicion.eliminarRetirosAumentos(ac)}" style="color: #0033FF; "/>
                        </p:column>
                        <p:rowExpansion>
                            <p:panelGrid columns="1">
                                <p:outputLabel value="#{ac.nombreCodigo}" style="color: #005f9c; font-size: 11px;"/>
                                <p:inputTextarea value="#{ac.descripcion}" style="width: 100%;" readonly="true"/>
                            </p:panelGrid>
                        </p:rowExpansion>
                    </p:dataTable>
                </p:tab>
                <!-- DISPO0SICIÓN -->
                <p:tab id="infDis" title="Disposiciones Generales">
                    <p:panelGrid id="pngDispGen" columns="2" layout="grid">
                        <h:panelGroup>
                            <p:outputLabel value="Estructura: " style="color: #005f9c; font-size: 14px;"/>
                            <p:inputTextarea autoResize="false" id="estruct" value="#{normasConstruccionEdicion.normaConstruccion.estructura}" rows="4" style="width: 100%;" />
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel value="Cubierta: " style="color: #005f9c; font-size: 14px;"/>
                            <p:inputTextarea autoResize="false" id="cubiert" value="#{normasConstruccionEdicion.normaConstruccion.cubierta}" rows="4" style="width: 100%;" />
                        </h:panelGroup>
                        <p:dataTable id="dtDisposiciones" value="#{normasConstruccionEdicion.disposicionGeneral}" var="ldg" 
                                     reflow="true" emptyMessage="No hay Información sobre Retiro Lateral..." >
                            <f:facet name="header" >
                                <div align="right">
                                    <p:commandLink value="Agregar" actionListener="#{normasConstruccionEdicion.mostrarIngreso(7)}" style="color: #0033FF; font-size: 14px; "/>
                                </div>
                            </f:facet>
                            <p:column headerText="Mostrar" style="width: 80px;">
                                <p:rowToggler />
                            </p:column>
                            <p:column headerText="Disposición" style="width: 25%; text-align: center;">
                                <p:outputLabel value="#{ldg.nombreCodigo}"   style="width: 100%;"/>
                            </p:column>
                            <p:column headerText="Descripción">
                                <h:inputText readonly="true" value="#{ldg.descripcion}"   style="width: 95%; border: 0 #ffffff"/>
                            </p:column>
                            <p:column headerText="Acción" style="width: 100px; text-align: center;">
                                <p:commandLink value="Eliminar" actionListener="#{normasConstruccionEdicion.eliminarRetirosAumentos(ldg)}" style="color: #0033FF; "/>
                            </p:column>
                            <p:rowExpansion>
                                <p:panelGrid columns="1">
                                    <p:outputLabel value="#{ldg.nombreCodigo}" style="color: #005f9c; font-size: 11px;"/>
                                    <p:inputTextarea value="#{ldg.descripcion}" style="width: 100%;" readonly="true"/>
                                </p:panelGrid>
                            </p:rowExpansion>
                        </p:dataTable>
                        <p:panel id="panelImag" rendered="#{normasConstruccionEdicion.hayImagen}">
                            <p:graphicImage value="#{imageManagedBean.imageAllEntity}" height="250" width="300" style="border-color: #0033FF; border-width: 2px">
                                <f:param name="id" value="#{normasConstruccionEdicion.normaConstruccion.id}"/>
                                <f:param name="nameEntity" value="CatNormasConstruccion"/>
                            </p:graphicImage>
                        </p:panel>

                    </p:panelGrid>

                    <br/>
                    <br/>
                    Foto:<br/>
                    <p:fileUpload fileUploadListener="#{normasConstruccionEdicion.handleFileUpload}" 
                                  mode="advanced" dragDropSupport="false" sizeLimit="35000000" 
                                  label="Seleccionar" uploadLabel="Subir" cancelLabel="Cancelar"  
                                  allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />  

                </p:tab>
            </p:accordionPanel>
            <br/>
            <p:commandButton value="Guardar" icon="ui-icon-disk" actionListener="#{normasConstruccionEdicion.guadarNormaConstruccion()}" style="height: 30px;" styleClass="btnStyle"/>
            <p:commandButton value="Volver" icon="ui-icon-circle-arrow-w" actionListener="#{normasConstruccionEdicion.volver()}" style="height: 30px;" styleClass="btnStyle"/>
        </h:form>

        <p:dialog id="dlgObs" widgetVar="agregar" header="Ingreso Informacón" appendTo="@(body)" modal="true" width="500" resizable="false" closable="true" closeOnEscape="true" >
            <h:form id="frmObsCor">
                <h1>Ingrese Información de las normas</h1>
                <div align="center">
                    <p:inputTextarea autoResize="false" id="obsservacion" value="#{normasConstruccionEdicion.retirosAumentos.descripcion}" rows="10" style="width: 100%; text-transform: uppercase" placeholder="Ingrese detalles de Norma"/>
                    <br/>
                    <p:commandButton id="btnAprobar" value="Agregar" actionListener="#{normasConstruccionEdicion.agregarRetiros()}" style="height: 30px;" styleClass="btnStyle" icon="ui-icon-plusthick" iconPos="s"/>
                    <p:commandButton id="btnSalir" value="Salir" onclick="PF('agregar').hide();" style="height: 30px;" styleClass="btnStyle" icon="ui-icon-closethick" iconPos="s"/>
                </div>
            </h:form>
        </p:dialog>

    </ui:define>

</ui:composition>
