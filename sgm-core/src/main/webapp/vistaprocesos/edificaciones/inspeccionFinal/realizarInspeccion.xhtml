<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/template/template.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:dialog="http://xmlns.jcp.org/jsf/composite/dialog">
    <ui:define name="top" >
        <h:panelGroup rendered="#{realizarInspeccion.sePuedeRealizarInspeccion}">
            <p:panelGrid styleClass="noBorder" columns="4" style="width: 100%;font-size: 14px;">
                <p:outputLabel value="Trámite: #{realizarInspeccion.ht.id}" style="font-weight: bolder;color: #005f9c"/>
                <p:outputLabel value="Tarea: #{realizarInspeccion.taskDataByTaskID.name}" style="font-weight: bolder;color: #005f9c"/>
                <p:outputLabel value="Responsable: #{realizarInspeccion.taskDataByTaskID.assignee}" style="font-weight: bolder;color: #005f9c"/>
            </p:panelGrid>
        </h:panelGroup>
    </ui:define>
    <ui:define name="content">
        <h:form id="frmMain">

            <p:panel id="pnlDP" style="width: 100%;" rendered="#{realizarInspeccion.sePuedeRealizarInspeccion}">
                <p:tabView id="tdatos">
                    <p:tab id="tgen" title="Inspección Final">
                        <h:panelGroup rendered="#{!realizarInspeccion.inspeccion}">
                            <center>
                                <p:column>
                                    <h:outputText value="Se Pudo Realizar la Inspección Final:"/>
                                    <p:selectOneRadio id="console" value="#{realizarInspeccion.inspeccionRealizada}">
                                        <f:selectItem itemLabel="Sí" itemValue="Sí" />
                                        <f:selectItem itemLabel="No" itemValue="No" />
                                    </p:selectOneRadio>
                                    <p:commandButton value="Continuar" update="frmMain" actionListener="#{realizarInspeccion.validar()}"/>
                                </p:column>
                            </center>
                        </h:panelGroup>
                        <h:panelGroup rendered="#{realizarInspeccion.inspeccion}">
                            <p:panelGrid columns="2" style="width: 100%;">
                                
                                <p:panel header="Fachada Frontal" id="panel1">
                                    <p:dataTable id="dtDocumentosFF2" value="#{realizarInspeccion.archivos2}" 
                                            var="archivo" emptyMessage="No se ha subido ningún archivo.">
                                        <p:column headerText="Nombre" width="50%">
                                           #{archivo.nombre}
                                       </p:column>
                                        <p:column headerText="Tipo" width="25%">
                                           #{archivo.tipo}
                                       </p:column>
                                       <p:column headerText="Acción" width="25%">
                                           <center>
                                            <p:commandButton value="Eliminar" update="dtDocumentosFF2" actionListener="#{realizarInspeccion.eliminarArchivo2(archivo)}"/>
                                           </center>
                                       </p:column>
                                    </p:dataTable>
                                    <p:fileUpload fileUploadListener="#{realizarInspeccion.handleFileUpload2}" mode="advanced" dragDropSupport="false"
                                                label="Seleccion"
                                                uploadLabel="Subir"
                                                cancelLabel="Cancelar"
                                                update="messages2 panel1" 
                                                multiple="true" sizeLimit="35000000" fileLimit="3" allowTypes="/(\.|\/)(gif|jpe?g|png|pdf)$/" />
                                    <p:growl id="messages2" showDetail="true"/>
                                </p:panel>
                                <p:panel header="Fachada Posterior" id="panel2">
                                    <p:dataTable id="dtDocumentosFF" value="#{realizarInspeccion.archivos}" 
                                            var="archivo" emptyMessage="No se ha subido ningún archivo.">
                                        <p:column headerText="Nombre" width="50%">
                                           #{archivo.nombre}
                                       </p:column>
                                        <p:column headerText="Tipo" width="25%">
                                           #{archivo.tipo}
                                       </p:column>
                                       <p:column headerText="Acción" width="25%">
                                           <center>
                                            <p:commandButton value="Eliminar" update="dtDocumentosFF" actionListener="#{realizarInspeccion.eliminarArchivo1(archivo)}"/>
                                           </center>
                                       </p:column>
                                   </p:dataTable>
                                    <p:fileUpload fileUploadListener="#{realizarInspeccion.handleFileUpload1}" mode="advanced" dragDropSupport="false"
                                                label="Seleccion"
                                                uploadLabel="Subir"
                                                cancelLabel="Cancelar"
                                                update="messages1 panel2" 
                                                multiple="true" sizeLimit="35000000" fileLimit="3" allowTypes="/(\.|\/)(gif|jpe?g|png|pdf)$/" />
                                    <p:growl id="messages1" showDetail="true"/>
                                </p:panel>
                                
                                <p:panel header="Fachada Lateral Izquierda" id="panel3">
                                    <p:dataTable id="dtDocumentosFF3" value="#{realizarInspeccion.archivos3}" 
                                            var="archivo" emptyMessage="No se ha subido ningún archivo.">
                                        <p:column headerText="Nombre" width="50%">
                                           #{archivo.nombre}
                                       </p:column>
                                        <p:column headerText="Tipo" width="25%">
                                           #{archivo.tipo}
                                       </p:column>
                                       <p:column headerText="Acción" width="25%">
                                           <center>
                                            <p:commandButton value="Eliminar" update="dtDocumentosFF3" actionListener="#{realizarInspeccion.eliminarArchivo3(archivo)}"/>
                                           </center>
                                       </p:column>
                                    </p:dataTable>
                                    <p:fileUpload fileUploadListener="#{realizarInspeccion.handleFileUpload3}" mode="advanced" dragDropSupport="false"
                                                    label="Seleccion"
                                                    uploadLabel="Subir"
                                                    cancelLabel="Cancelar"
                                                    update="messages3" 
                                                    multiple="true" sizeLimit="35000000" fileLimit="3" allowTypes="/(\.|\/)(gif|jpe?g|png|pdf)$/" />
                                                <p:growl id="messages3" showDetail="true"/>
                                </p:panel>
                                
                                <p:panel header="Fachada Lateral Derecha" id="panel4">
                                    <p:dataTable id="dtDocumentosFF4" value="#{realizarInspeccion.archivos4}" 
                                            var="archivo" emptyMessage="No se ha subido ningún archivo.">
                                        <p:column headerText="Nombre" width="50%">
                                            #{archivo.nombre}
                                        </p:column>
                                         <p:column headerText="Tipo" width="25%">
                                            #{archivo.tipo}
                                        </p:column>
                                        <p:column headerText="Acción" width="25%">
                                            <center>
                                             <p:commandButton value="Eliminar" update="dtDocumentosFF4" actionListener="#{realizarInspeccion.eliminarArchivo4(archivo)}"/>
                                            </center>
                                        </p:column>
                                    </p:dataTable>
                                    <p:fileUpload fileUploadListener="#{realizarInspeccion.handleFileUpload4}" mode="advanced" dragDropSupport="false"
                                                    label="Seleccion"
                                                    uploadLabel="Subir"
                                                    cancelLabel="Cancelar"
                                                    update="messages4" 
                                                    multiple="true" sizeLimit="35000000" fileLimit="3" allowTypes="/(\.|\/)(gif|jpe?g|png|pdf)$/" />
                                                <p:growl id="messages4" showDetail="true"/>
                                </p:panel>
                            </p:panelGrid>
                            <!--
                            <center style="margin-top: 15px;">
                                <p:panelGrid columns="2">
                                    <p:commandButton value="Validar Archivos" actionListener="#{realizarInspeccion.validarArchivos()}"/>
                                    <p:commandButton value="Cancelar Inspección" update="frmMain" actionListener="#{realizarInspeccion.cancelarInspeccion()}"/>
                                </p:panelGrid>
                            </center>
                            -->
                        </h:panelGroup>
                        
                    </p:tab>
                    
                    <!-- -->
                    
                    <p:tab id="ttasa" title="Tasa de liquidación" rendered="#{realizarInspeccion.inspeccion}">
                        
                        
                        
                        <p:panel id="pnlPermisos" header="Permiso de Construcción" rendered="#{realizarInspeccion.pePermiso==null}">
                            
                            <center>
                                <p:dataTable id="dtPermisos" reflow="true"
                                             rows="20" lazy="true"
                                             paginator="true" style="width: 60%;"
                                             paginatorPosition="top"
                                             value="#{realizarInspeccion.permisosList}"
                                             var="permiso" 
                                             emptyMessage="No tiene datos">
                                   <p:column headerText="Descripción" style="text-align: center;" filterBy="#{permiso.tipoPermiso.descripcion}" width="100">
                                       <center><h:outputText value="#{permiso.tipoPermiso.descripcion}"/></center>
                                   </p:column>
                                   <p:column headerText="Año del Permiso" style="text-align: center;" sortBy="#{permiso.anioPermiso}" filterBy="#{permiso.anioPermiso}" width="100">
                                       <center><h:outputText value="#{permiso.anioPermiso}"/></center>
                                   </p:column>
                                   <p:column headerText="Número de Reporte" sortBy="#{permiso.numReporte}" style="text-align: center;" filterBy="#{permiso.numReporte}" width="100">
                                       <center><h:outputText value="#{permiso.numReporte}"/></center>
                                   </p:column>
                                    <p:column headerText="Estado" style="text-align: center;" filterBy="#{permiso.tramite.estado}" width="100">
                                       <center><h:outputText value="#{permiso.tramite.estado}"/></center>
                                   </p:column>
                                   <p:column headerText="Acción" style="text-align: center;" width="100">
                                       <center><p:commandButton value="Seleccionar" actionListener="#{realizarInspeccion.onRowSelectPermiso(permiso)}" ajax="false"/></center>
                                   </p:column>
                               </p:dataTable>
                            </center>
                            
                            <h:panelGroup>
                                <center>
                                    <p:column>
                                        <h:outputText value="Es un permiso de construcción antiguo por crear?"/>
                                        <p:selectOneRadio id="permisoAntiguo" value="#{realizarInspeccion.permisoAntiguo}">
                                            <f:selectItem itemLabel="No" itemValue="#{false}" />
                                            <f:selectItem itemLabel="Sí" itemValue="#{true}" />                                            
                                        </p:selectOneRadio>
                                        <p:commandButton value="Continuar" update="frmObs" styleClass="btnStyle" onclick="PF('dlgObs').show()"/>
                                    </p:column>
                                </center>
                            </h:panelGroup>
                        </p:panel>
                        
                        <h:panelGroup id="panelContenedor" rendered="#{realizarInspeccion.pePermiso!=null}">
                            <p:panel header="Código Predial">
                                <p:panelGrid  style="width: 100%;" styleClass="noBorder" >

                                    <f:facet name="header">  
                                        <p:row>  
                                            <p:column >Sector</p:column>  
                                            <p:column >Mnz.</p:column>  
                                            <p:column >Cdla.</p:column>  
                                            <p:column >Mnz. Div</p:column>  
                                            <p:column>Solar</p:column>  
                                            <p:column>Div1</p:column>  
                                            <p:column>Div2</p:column>  
                                            <p:column>Div3</p:column>  
                                            <p:column>Div4</p:column>  
                                            <p:column>Div5</p:column>  
                                            <p:column>Div6</p:column>  
                                            <p:column>Div7</p:column>  
                                            <p:column>Div8</p:column>  
                                            <p:column>Div9</p:column>  
                                            <p:column>Buscar</p:column>
                                        </p:row>  
                                    </f:facet>
                                    <p:row style="width: 100%;">
                                        <p:column><p:inputText style="width: 100%" value="#{realizarInspeccion.datosPredio.sector}"/></p:column>
                                        <p:column><p:inputText style="width: 100%" value="#{realizarInspeccion.datosPredio.mz}"/></p:column>
                                        <p:column><p:inputText style="width: 100%" value="#{realizarInspeccion.datosPredio.cdla}"/></p:column>
                                        <p:column><p:inputText style="width: 100%" value="#{realizarInspeccion.datosPredio.mzdiv}"/></p:column>
                                        <p:column><p:inputText style="width: 100%" value="#{realizarInspeccion.datosPredio.solar}"/></p:column>
                                        <p:column><p:inputText style="width: 100%" value="#{realizarInspeccion.datosPredio.div1}"/></p:column>
                                        <p:column><p:inputText style="width: 100%" value="#{realizarInspeccion.datosPredio.div2}"/></p:column>
                                        <p:column><p:inputText style="width: 100%" value="#{realizarInspeccion.datosPredio.div3}"/></p:column>
                                        <p:column><p:inputText style="width: 100%" value="#{realizarInspeccion.datosPredio.div4}"/></p:column>
                                        <p:column><p:inputText style="width: 100%" value="#{realizarInspeccion.datosPredio.div5}"/></p:column>
                                        <p:column><p:inputText style="width: 100%" value="#{realizarInspeccion.datosPredio.div6}"/></p:column>
                                        <p:column><p:inputText style="width: 100%" value="#{realizarInspeccion.datosPredio.div7}"/></p:column>
                                        <p:column><p:inputText style="width: 100%" value="#{realizarInspeccion.datosPredio.div8}"/></p:column>
                                        <p:column><p:inputText style="width: 100%" value="#{realizarInspeccion.datosPredio.div9}"/></p:column>
                                        <p:column><p:commandButton update="frmMain" actionListener="#{realizarInspeccion.buscarPredio}" disabled="#{!realizarInspeccion.pePermiso.esMacroLote}" style="color: #ffffff; background: #616161 !important; font-weight: bold; height: 30px; float: right" value="Buscar" /></p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:panel>

                            <p:panel id="panelPropietarios" header="Datos del Solicitante">

                                <p:column colspan="5">
                                    <h:outputText value="Propietarios: " style="font-weight: bold;font-size: 14px"/>
                                    <p:commandButton update="buscarEnteDlgForm" actionListener="#{realizarInspeccion.setearValores}" onclick="PF('dlgBuscar').show()" style="color: #ffffff; background: #616161 !important; font-weight: bold; height: 30px; float: right" value="Agregar Propietario"  disabled="true"/>
                                    <br/>
                                </p:column>
                                <center>   
                                    <h:panelGroup styleClass="noBorder">
                                        <p:dataTable    id="dtpropietarios"
                                                        rows="5" selectionMode="single" selection="#{realizarInspeccion.propietario}"
                                                        rowKey="#{itemP.id}"
                                                        paginator="true"
                                                        paginatorPosition="top"
                                                        value="#{realizarInspeccion.lisPropietarios}" var="itemP"
                                                        emptyMessage="No tiene datos" style="width: 75%">

                                            <p:column headerText="#C.I. o R.U.C." style="width: 75%;">
                                                <h:outputText value="#{itemP.ente.ciRuc}" style="text-transform: uppercase;"/>
                                            </p:column>
                                            <p:column headerText="Propietario" style="width: 75%;">
                                                <h:outputText value="#{itemP.ente.nombreComercial}" rendered="#{!itemP.ente.esPersona}" style="text-transform: uppercase;"/>
                                                <h:outputText value="#{itemP.ente.nombres} #{itemP.ente.apellidos}" rendered="#{itemP.ente.esPersona}" style="text-transform: uppercase;"/>
                                            </p:column>
                                            <p:column headerText="Opción" style="width: 75%;">
                                                <center>
                                                    <p:commandLink value="Eliminar" actionListener="#{realizarInspeccion.eliminarPropietario(itemP)}" disabled="true" update="dtpropietarios"/>
                                                </center>
                                            </p:column>
                                        </p:dataTable>
                                    </h:panelGroup>
                                </center>
                            </p:panel>
                            
                            <p:panel header="Ubicación" style="width: 100%;">
                                <p:panelGrid style="width: 100%;" >
                                    <p:row style="width: 100%;">
                                        <p:column><h:outputText value="Cantón :" style="margin-right: 25px;"/> <p:inputText value="#{realizarInspeccion.canton.nombre}" style="width: 75%" readonly="true"/></p:column>
                                        <p:column><h:outputText value="Parroquia :" style="margin-right: 25px;"/> <p:inputText value="#{realizarInspeccion.parroquia.descripcion}" style="width: 75%" readonly="true"/></p:column>
                                        <p:column><h:outputText value="Urbanización :" style="margin-right: 25px;"/> <p:inputText value="#{realizarInspeccion.datosPredio.ciudadela.nombre}" style="width: 75%" readonly="true"/></p:column>
                                        <p:column><h:outputText value="Calle :" style="margin-right: 25px;"/> <p:inputText  value="#{realizarInspeccion.datosPredio.calle}" style="width: 75%"/></p:column>

                                    </p:row>
                                    <p:row>
                                        <p:column colspan="2"><h:outputText value="Código Catastral Actual :" style="margin-right: 25px;"/> <p:inputText value="#{realizarInspeccion.codigoCatastral}" readonly="true" style="width: 70%"/></p:column>
                                        <p:column><h:outputText value="Mz :" style="margin-right: 75px;"/> <p:inputText value="#{realizarInspeccion.datosPredio.urbMz}" readonly="true" style="width: 75%"/></p:column>
                                        <p:column><h:outputText value="Solar :" style="margin-right: 25px;"/> <p:inputText value="#{realizarInspeccion.datosPredio.urbSolarnew}" readonly="true" style="width: 75%"/></p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:panel>

                            <p:panel id="panelPermisosConst" header="Datos del permiso de construcción">
                                <center>   
                                    
                                    <p:panelGrid columns="1" styleClass="noBorder">
                                        
                                        <h:panelGroup id="panelDatosNuevos">

                                            <!-- DATOS QUE SE AGREGAN EXCLUSIVAMENTE A LA INSPECCIÓN FINAL-->
                                            <center>
                                                <p:panelGrid id="panelGInspeFI5" style="width: 80%">
                                                    <f:facet name="header">
                                                        <p:row>
                                                            <p:column>
                                                                Edificación
                                                            </p:column>
                                                            <p:column>
                                                                Pisos
                                                            </p:column>
                                                            <p:column>
                                                                Descripción
                                                            </p:column>                                                
                                                            <p:column>
                                                                Area Edificacion
                                                            </p:column>
                                                            <p:column>
                                                                Accion
                                                            </p:column>
                                                        </p:row>
                                                    </f:facet>

                                                    <p:row>
                                                        <p:column>
                                                            <center>
                                                                <p:selectOneMenu  id="lisedif" value="#{realizarInspeccion.pePermisosCabEdifIF.numEdificacion}"  effect="fold"  style="width:180px;">                                                       
                                                                   <f:selectItem itemLabel="EDIFICACION PRINCIPAL" itemValue="0" />  
                                                                   <f:selectItem itemLabel="ANEXO 1" itemValue="1" />  
                                                                   <f:selectItem itemLabel="ANEXO 2" itemValue="2" />  
                                                                   <f:selectItem itemLabel="ANEXO 3" itemValue="3" />  
                                                                   <f:selectItem itemLabel="ANEXO 4" itemValue="4" />  
                                                                   <f:selectItem itemLabel="ANEXO 5" itemValue="5" />                                                         
                                                                   <f:selectItem itemLabel="ANEXO 6" itemValue="6" />
                                                                   <f:selectItem itemLabel="ANEXO 7" itemValue="7" />
                                                                   <f:selectItem itemLabel="ANEXO 8" itemValue="8" />
                                                                   <f:selectItem itemLabel="ANEXO 9" itemValue="9" />
                                                                   <f:selectItem itemLabel="ANEXO 10" itemValue="10" />
                                                                   <p:ajax update="panelGInspeFI5"/>
                                                                </p:selectOneMenu>
                                                            </center>
                                                        </p:column>
                                                        <p:column>
                                                            <center>
                                                                <p:inputText value="#{realizarInspeccion.pePermisosCabEdifIF.numeroPisos}" style="width:60px; text-align: center;" id="detpisos" />
                                                            </center>
                                                        </p:column>
                                                        <p:column>
                                                            <center>
                                                                <p:inputText value="#{realizarInspeccion.pePermisosCabEdifIF.descEdificacion}" style="width:120px; text-align: center;" id="desEdificacion" />
                                                            </center>
                                                        </p:column>
                                                        <p:column>
                                                            <center>
                                                                <p:inputText value="#{realizarInspeccion.pePermisosCabEdifIF.areaConstruccion}" style="width:90px; text-align: center;" id="detareaedificacion" />
                                                            </center>
                                                        </p:column>       
                                                        <p:column>
                                                            <center>
                                                                <p:commandButton update="panelDatosNuevos" id="btnAgregarEdificacion" value="Agregar" actionListener="#{realizarInspeccion.agregarEdificacion()}"/>
                                                            </center>
                                                        </p:column>                                             
                                                    </p:row>
                                                </p:panelGrid>
                                            </center>
                                            <center>
                                                <p:dataTable    id="dtpermisos2"
                                                                rows="5" 
                                                                paginator="true" style="width: 80%;"
                                                                paginatorPosition="top"
                                                                selectionMode="single"
                                                                selection="#{realizarInspeccion.pePermisosCabEdifIF2}"
                                                                rowKey="#{itemPP2.descEdificacion}"
                                                                value="#{realizarInspeccion.pePermisosIFList}" var="itemPP2"
                                                                emptyMessage="No tiene datos" >
                                                    <p:ajax event="rowSelect" listener="#{realizarInspeccion.onRowSelect()}" update=":detallesDlgForm"/>
                                                    <p:column headerText="Edificacion" style="text-align: left;" width="20">
                                                        <h:outputText rendered="#{itemPP2.numEdificacion==0}" value="Edificación Principal"/>
                                                        <h:outputText rendered="#{itemPP2.numEdificacion==1}" value="Anexo 1"/>  
                                                        <h:outputText rendered="#{itemPP2.numEdificacion==2}" value="Anexo 2"/>  
                                                        <h:outputText rendered="#{itemPP2.numEdificacion==3}" value="Anexo 3"/>  
                                                        <h:outputText rendered="#{itemPP2.numEdificacion==4}" value="Anexo 4"/>  
                                                        <h:outputText rendered="#{itemPP2.numEdificacion==5}" value="Anexo 5"/>  
                                                        <h:outputText rendered="#{itemPP2.numEdificacion==6}" value="Anexo 6"/>  
                                                        <h:outputText rendered="#{itemPP2.numEdificacion==7}" value="Anexo 7"/>  
                                                        <h:outputText rendered="#{itemPP2.numEdificacion==8}" value="Anexo 8"/>  
                                                        <h:outputText rendered="#{itemPP2.numEdificacion==9}" value="Anexo 9"/>  
                                                    </p:column>
                                                    <p:column headerText="Pisos" style="text-align: left;" width="20">
                                                        <h:outputText value="#{itemPP2.numeroPisos}"/>
                                                    </p:column>
                                                    <p:column headerText="Descripción" style="text-align: left;" width="20">
                                                        <h:outputText value="#{itemPP2.descEdificacion}"/>
                                                    </p:column>
                                                    <p:column headerText="A. Construcción" style="text-align: left;" width="20">
                                                        <h:outputText value="#{itemPP2.areaConstruccion}"/>
                                                    </p:column>
                                                    <p:column headerText="Acción" style="text-align: left;" width="20">
                                                        <p:commandButton update="dtpermisos2" value="Eliminar" actionListener="#{realizarInspeccion.eliminarInspeccion(itemPP2)}"/>

                                                    </p:column>
                                                </p:dataTable>
                                            </center>
                                        </h:panelGroup>
                                        <h:panelGroup>
                                            <center>
                                                <p:panelGrid columns="4" style="width: 60%;" id="panelInspeccion">
                                                    <h:outputText value="Área/Solar:" />
                                                    <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.areaSolar}" style="text-align: center;" />
                                                    <h:outputText value="Total área edificación:" />
                                                    <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.areaConst}" readonly="true" style="text-align: center;" />
                                                    <h:outputText value="Avalúo construcción:" />
                                                    <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.evaluoLiquidacion}" readonly="true" style="text-align: center;" />
                                                    <h:outputText value="Fecha de emisión:" />
                                                    <p:calendar value="#{realizarInspeccion.fechaEmision}" disabled="true" pattern="dd/MM/yyyy"/>
                                                </p:panelGrid>
                                                <p:panelGrid columns="2" style="width: 60%;">
                                                    <h:outputText value="Observaciones:" />
                                                    <p:inputTextarea value="#{realizarInspeccion.peInspeccionFinalV.observacion}" rows="2" cols="30" placeholder="Ingrese solamente de ser necesaria la observación en la Inspección."/>
                                                    <h:outputText value="Responsable técnico: " style="font-weight: bolder; font-size: 14px;"/>
                                                    <p:column><center><p:inputText placeholder="# de cédula" value="#{realizarInspeccion.cedulaRucResp}"/> <p:commandButton icon="ui-icon-search" actionListener="#{realizarInspeccion.buscarResponsable}" styleClass="btnStyle" value="Buscar"/></center></p:column>
                                                </p:panelGrid>
                                            </center>
                                        </h:panelGroup>
                                        
                                        
                                    </p:panelGrid>
                                    
                                    <p:panelGrid columns="1" style="width: 60%">
                                        
                                        <h:panelGroup>
                                            <h1><h:outputText value="Datos del Permiso de Construcción:" /></h1>
                                            <p:panelGrid columns="6">
                                                <h:outputText value="Altura:" />
                                                <p:inputText value="#{realizarInspeccion.pePermiso.altura}" style="text-align: center;" readonly="true"/>
                                                <h:outputText value="# Pisos B.N.B.:" />
                                                <p:inputText value="#{realizarInspeccion.pePermiso.pisosBnb}" style="text-align: center;" readonly="true"/>
                                                <h:outputText value="# Pisos S.N.B.:" />
                                                <p:inputText value="#{realizarInspeccion.pePermiso.pisosSnb}" style="text-align: center;" readonly="true"/>
                                                <h:outputText value="N. Parqueo:" />
                                                <p:inputText value="#{realizarInspeccion.pePermiso.cantidadParqueos}" style="text-align: center;" readonly="true"/>
                                                <h:outputText value="Ärea Parqueo:" />
                                                <p:inputText value="#{realizarInspeccion.pePermiso.areaParqueos}" style="text-align: center;" readonly="true"/>
                                                <h:outputText value="Descripción Familiar" />
                                                <p:inputText value="#{realizarInspeccion.pePermiso.descFamiliar}" style="text-align: center;" readonly="true"/>
                                                <h:outputText value="N. Edif.:" />
                                                <p:inputText value="#{realizarInspeccion.pePermiso.cantidadEdificaciones}" style="text-align: center;" readonly="true"/>
                                                <h:outputText value="Área Edif." />
                                                <p:inputText value="#{realizarInspeccion.pePermiso.areaEdificaciones}" style="text-align: center;" readonly="true"/>
                                                <h:outputText value="Ret. Frontal:" />
                                                <p:inputText value="#{realizarInspeccion.pePermiso.retiroFrontal}" style="text-align: center;" readonly="true"/>
                                                <h:outputText value="Ret. Lateral1:" />
                                                <p:inputText value="#{realizarInspeccion.pePermiso.retiroLateral1}" style="text-align: center;" readonly="true"/>
                                                <h:outputText value="Retiro Lateral2:" />
                                                <p:inputText value="#{realizarInspeccion.pePermiso.retiroLateral2}" style="text-align: center;" readonly="true"/>
                                                <h:outputText value="Retiro Posterior:" />
                                                <p:inputText value="#{realizarInspeccion.pePermiso.retiroPosterior}" style="text-align: center;" readonly="true"/>

                                            </p:panelGrid>
                                        </h:panelGroup>
                                    </p:panelGrid>
                                    
                                    <p:panelGrid columns="2">
                                        <h:panelGroup>
                                            <h1><h:outputText value="Datos de la Inspección Final:" /></h1>
                                            <p:panelGrid columns="6">
                                                <h:outputText value="Altura:" />
                                                <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.altura}"  style="text-align: center;"/>
                                                <h:outputText value="# Pisos B.N.B.:" />
                                                <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.pisosBnb}"  style="text-align: center;"/>
                                                <h:outputText value="# Pisos S.N.B.:" />
                                                <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.pisosSbn}"  style="text-align: center;"/>
                                                <h:outputText value="N. Parqueo:" />
                                                <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.cantParqueos}" style="text-align: center;"/>
                                                <h:outputText value="Ar. Parq.:" />
                                                <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.areaParqueos}" style="text-align: center;"/>
                                                <h:outputText value="Descripción Familiar" />
                                                <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.descEdificacion}" style="text-align: center;"/>
                                                <h:outputText value="N. Edif.:" />
                                                <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.cantEdificaciones}" style="text-align: center;"/>
                                                <h:outputText value="Área Edif." />
                                                <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.areaConst}" readonly="true" style="text-align: center;"/>
                                                <h:outputText value="Ret. Frontal:" />
                                                <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.retiroFrontal}" style="text-align: center;"/>
                                                <h:outputText value="Ret. Lateral1:" />
                                                <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.retiroLateral1}" style="text-align: center;"/>
                                                <h:outputText value="Retiro Lateral2:" />
                                                <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.retiroLateral2}" style="text-align: center;"/>
                                                <h:outputText value="Retiro Posterior:" />
                                                <p:inputText value="#{realizarInspeccion.peInspeccionFinalV.retiroPosterior}" style="text-align: center;"/>

                                            </p:panelGrid>
                                        </h:panelGroup>
                                        
                                        <h:panelGroup>
                                            <p:selectManyCheckbox value="#{realizarInspeccion.listaDetalle}" layout="pageDirection" style="font-size: 11px;vertical-align: top;"
                                                         converter="entityConverter">  
                                                <f:selectItems value="#{realizarInspeccion.detallesList}" var="item" itemLabel="#{item.valor}" itemValue="#{item}"/>  
                                            </p:selectManyCheckbox>
                                        </h:panelGroup>
                                        
                                    </p:panelGrid>
                                </center>
                            </p:panel>
                            <h:panelGroup id="botonesGroup">
                                <center><p:commandButton rendered="#{realizarInspeccion.clickInspeccion}" style="color: #ffffff; width: 150px; background: #616161 !important; font-weight: bold; height: 30px;" value="Guardar" onclick="PF('dlgObs').show()" />
                                        <p:commandButton ajax="false" actionListener="#{realizarInspeccion.imprimirPDF()}" icon="ui-icon-document" style="color: #ffffff; width: 150px; background: #616161 !important; font-weight: bold; height: 30px;" value="Imprimir Tasa"  />
                                </center>
                            </h:panelGroup>
                        </h:panelGroup>
                    </p:tab>
                    
                    <!-- -->

                    <p:tab id="tadicionales" title="Adicionales">
                        <p:tabView id="tadic">
                            <p:tab id="tdocs" title="Observaciones">
                                <p:dataTable id="dtobs" value="#{realizarInspeccion.ht.observacionesCollection}" var="obs" reflow="true" style="width: 100%">
                                    <f:facet name="header">Observaciones</f:facet>
                                    <p:column headerText="Descripcion" style="width: 40%">
                                        #{obs.observacion}
                                    </p:column>
                                    <p:column headerText="tarea" style="width: 25%">
                                        #{obs.tarea}
                                    </p:column>
                                    <p:column headerText="Responsable" style="width: 20%">
                                        #{obs.userCre}
                                    </p:column>
                                    <p:column headerText="Fecha" style="width: 15%">
                                        #{obs.fecCre}
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <p:tab id="tobs" title="Documentos">
                                <dialog:detalleArchivosAct archivos="#{realizarInspeccion.processInstanceAttachmentsFiles}"/>
                            </p:tab>
                        </p:tabView>
                    </p:tab>
                </p:tabView>
            </p:panel>
            <h:panelGroup rendered="#{!realizarInspeccion.sePuedeRealizarInspeccion}" style="margin-top: 100px;">
                <center>
                    <h1 style="font-size: 18px;"> #{realizarInspeccion.mensaje}  </h1>
                    <br/>
                    <p:commandButton value="Ir a la Bandeja de Tareas" actionListener="#{realizarInspeccion.continuar()}" style="margin-top: 15px;" styleClass="btnStyle"/>
                </center>
            </h:panelGroup>
        </h:form>
        
        <p:dialog id="dlgObs" widgetVar="dlgObs"  header="Observaciones" appendTo="@(body)" modal="true" width="500" resizable="false" closable="true" closeOnEscape="true">
            <h:form id="frmObs">
                <p:panel id="pobs" header="Ingrese sus observaciones" style="width: 100%" >
                    <div align="center">
                        <p:inputTextarea id="obsservacion" value="#{realizarInspeccion.obs.observacion}" rows="4" style="width: 100%; text-transform: uppercase" />
                        <br/>
                        <p:commandButton id="btnValidar" value="Terminar Tarea" update=":frmMain" actionListener="#{realizarInspeccion.guardarDatos()}" rendered="#{realizarInspeccion.inspeccion}" oncomplete="PF('dlgObs').hide()" style="color: #ffffff; background: #616161 !important; font-weight: bold; height: 30px"/>
                        <p:commandButton id="btnValidar2" value="Terminar Tarea" update=":frmMain" actionListener="#{realizarInspeccion.completar()}" rendered="#{!realizarInspeccion.inspeccion}" oncomplete="PF('dlgObs').hide()" style="color: #ffffff; background: #616161 !important; font-weight: bold; height: 30px"/>

                    </div>
                </p:panel>
            </h:form>
        </p:dialog>
        
        <p:dialog header="Detalles" id="dlgMostrarDetalle" widgetVar="dlgMostrarDetalle" modal="true" height="auto" width="auto" resizable="false">  
            <h:form id="detallesDlgForm" >
                <h:panelGroup id="nuevoPGroup">
                    <p:panelGrid id="panelGInspeFI6" style="width: 100%">
                        <f:facet name="header">
                            <p:row>
                                <p:column>
                                    Categoría
                                </p:column>
                                <p:column>
                                    Característica
                                 </p:column>
                                <p:column>
                                    Porcentaje
                                </p:column>                                                

                                <p:column>
                                    Acción
                                 </p:column>
                            </p:row>
                        </f:facet>

                        <p:row>
                            <p:column>
                                <center>
                                    <p:selectOneMenu  id="lisedif2" value="#{realizarInspeccion.categoria}" converter="entityConverter" effect="fold"  style="width:180px;">
                                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}" />
                                        <f:selectItems value="#{realizarInspeccion.catEdfCategPropList}" var="itemCEC" itemLabel="#{itemCEC.nombre}" itemValue="#{itemCEC}"/>  
                                        <p:ajax update="lisedif3"/>
                                    </p:selectOneMenu>
                                </center>
                            </p:column>
                            <p:column>
                                <center>
                                    <p:selectOneMenu  id="lisedif3" value="#{realizarInspeccion.pdp.idCatEdfProp}"  converter="entityConverter" effect="fold"  style="width:180px;">
                                        <f:selectItems value="#{realizarInspeccion.cepList}" var="itemCEC2" itemLabel="#{itemCEC2.nombre}" itemValue="#{itemCEC2}"/>  
                                    </p:selectOneMenu>
                                </center>
                            </p:column>
                            <p:column>
                                <center>
                                    <p:inputText value="#{realizarInspeccion.pdp.porcentaje}" style="width:90px; text-align: center;" id="detareaedificacion2" />
                                </center>
                            </p:column>       
                            <p:column>
                                <center>
                                    <p:commandButton update="detallesDlgForm" id="btnAgregarEdificacion2" value="Agregar" actionListener="#{realizarInspeccion.agregarCaracteristica()}"/>
                                </center>
                            </p:column>                                             
                        </p:row>
                    </p:panelGrid>
                    <center>
                        <p:dataTable    id="dtdetallepermisos2"
                                        rows="5"
                                        paginatorPosition="top"
                                        paginator="true"
                                        value="#{realizarInspeccion.peDetallePerIFList}" var="itemPD2"
                                        emptyMessage="No tiene datos" style="width: 550px;">

                            <p:column headerText="Edificación" style="text-align: left;" width="20">
                                <h:outputText value="#{itemPD2.idCatEdfProp.categoria.nombre}"/>
                            </p:column>
                            <p:column headerText="Categoría" style="text-align: left;" width="20">
                                <h:outputText value="#{itemPD2.idCatEdfProp.nombre}"/>
                            </p:column>
                            <p:column headerText="Porcentaje" style="text-align: left;" width="20">
                                <h:outputText value="#{itemPD2.porcentaje}"/>
                            </p:column>
                            <p:column headerText="Acción" style="text-align: left;" width="20">
                                <p:commandButton update="dtdetallepermisos2" value="Eliminar" actionListener="#{realizarInspeccion.eliminarPermiso(itemPD2)}"/>
                            </p:column>
                        </p:dataTable>
                    </center>
                    <br/>
                    <center><p:commandButton actionListener="#{realizarInspeccion.verificarCaracteristicas()}" style="color: #ffffff; width: 150px; background: #616161 !important; font-weight: bold; height: 30px;" value="Aceptar"  /></center>
                </h:panelGroup>
            </h:form>
        </p:dialog>
        
        <p:dialog header="Buscar Usuario" id="dlgBuscar" widgetVar="dlgBuscar" modal="true" height="auto" width="auto" >  
            <h:form id="buscarEnteDlgForm" >
                <h:panelGroup id="nuevoPGroup">
                    <p:panelGrid columns="3" >
                        <h:outputText value="Número de Cédula" style="display: block;"/>
                        <p:inputText value="#{realizarInspeccion.cedulaRuc}" style="display: block; margin: 0 auto;"/>
                        <p:commandButton update="buscarEnteDlgForm" actionListener="#{realizarInspeccion.buscarEnte()}" style="color: #ffffff; background: #616161 !important; font-weight: bold; height: 30px;" value="Buscar" />
                    </p:panelGrid>
                    <p:panelGrid columns="1" style="width: 100%; height: auto;" id="panelList">
                        <p:dataTable  id="dataListEnte"  value="#{realizarInspeccion.enteList}" var="itemP"
                                      emptyMessage="No tiene datos" style="width: 330px;">
                            <p:column headerText="#C.I. o R.U.C.">
                                <h:outputText value="#{itemP.ciRuc}" style="text-transform: uppercase;"/>
                            </p:column>
                            <p:column headerText="Nombres">
                                <h:outputText value="#{itemP.nombreComercial}" rendered="#{!itemP.esPersona}" style="text-transform: uppercase;"/>
                                <h:outputText value="#{itemP.nombres} #{itemP.apellidos}" rendered="#{itemP.esPersona}" style="text-transform: uppercase;"/>
                            </p:column>
                            <p:column headerText="Acción">
                                <p:commandButton update=":frmMain" value="Agregar Propietario"  actionListener="#{realizarInspeccion.agregarPropietario(itemP)}"/>
                            </p:column>
                        </p:dataTable>
                    </p:panelGrid>
                    <br/>
                    <center><p:commandButton onclick="PF('dlgBuscar').hide()" update=":frmMain:tdatos:panelPropietarios" style="color: #ffffff; width: 150px; background: #616161 !important; font-weight: bold; height: 30px;" value="Cerrar"  /></center>
                </h:panelGroup>
            </h:form>
        </p:dialog>
        
        <p:dialog header="Mensaje Responsable Técnico" id="dlgResp" widgetVar="dlgResp" modal="true" height="auto" width="auto" >  
            <h:form id="respDlgForm" >
                <h:outputText value="#{realizarInspeccion.mensajeResponsableTec}" />
                <br/>
                <h:outputText value="Ingrese el registro profesional del técnico:" rendered="#{realizarInspeccion.responsableTec.regProf == null}"/>
                <p:inputText value="#{realizarInspeccion.responsableTec.regProf}" rendered="#{realizarInspeccion.responsableTec.regProf == null}"/>
                <br/>
                <center><p:commandButton value="Aceptar" actionListener="#{realizarInspeccion.actualizarTecnico()}"/></center>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
