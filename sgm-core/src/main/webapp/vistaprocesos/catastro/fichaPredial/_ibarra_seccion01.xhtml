<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:comp="http://java.sun.com/jsf/composite/dialog">

    <h:form id="frmDatosPredio">
        <div align="right">
            <p:remoteCommand name="rc1" immediate="false" async="true" actionListener="#{fichaPredial.guardarDatosPredio('ACTUALIZACION DE IDENTIFICACION Y UBICACION PREDIAL', fichaPredial.informante)}" rendered="#{fichaPredial.editable}" />
            <p:commandButton  id="btnS1" value="Guardar" rendered="#{fichaPredial.editable}"
                              icon="ui-icon-disk" actionListener="#{fichaPredial.openDialog}"
                              action="#{fichaPredial.setRemotteCommand('rc1')}" update="frmSubirDocumentosDialog"  />
        </div>
        <p:tabView id="tvUbicacion" style="width: 100%">
            <p:tab id="tcodActual" title="Codigo Catastral"><!--styleClass="ui-responsive"-->
                <p:panelGrid columns="3" layout="grid" style="width: 100%" >
                    <h:panelGroup layout="block">
                        <h:outputText value="Tipo de predio :" style="font-weight: bolder"  class="DispBlock Wid100"/>
                        <p:selectOneMenu id="tipoPredio" value="#{fichaPredial.predio.tipoPredio}" disabled="#{!userSession.isAdmin || !fichaPredial.editable}" style="width: 90%">
                            <f:selectItem itemLabel="Urbano" itemValue="U"/>
                            <f:selectItem itemLabel="Rural" itemValue="R"/>
                        </p:selectOneMenu>
                    </h:panelGroup>
                    <h:panelGroup layout="block">
                        <h:outputText value=" Estado Predio:" style="font-weight: bolder"  class="DispBlock Wid100" />
                        <p:selectOneMenu id="estadoPredio" value="#{fichaPredial.predio.estado}" disabled="#{!userSession.isAdmin|| !fichaPredial.editable}" effect="fade" >
                            <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                            <f:selectItem itemLabel="Activo" itemValue="A"/>
                            <f:selectItem itemLabel="Inactivo..." itemValue="I"/>
                        </p:selectOneMenu>
                    </h:panelGroup>
                    <h:panelGroup layout="block">
                        <h:outputText value="Es Ficha Madre:" style="font-weight: bolder"  class="DispBlock Wid100"/>
                        <p:inputText id="fichaMad" value="#{fichaPredial.predio.fichaMadre ? 'SI' : 'NO'}" readonly="true" />
                    </h:panelGroup>
                </p:panelGrid>
                <p:panelGrid style="margin-top:20px">
                    <f:facet name="header">
                        <p:row>
                            <p:column>Provincia:    </p:column>
                            <p:column>Cantón:      </p:column>
                            <p:column>Parroquia:   </p:column>
                            <p:column>Zona:        </p:column>
                            <p:column>Sector:      </p:column>
                            <p:column>Mz.:         </p:column>
                            <p:column>Lote:        </p:column>
                            <p:column>Bloque:      </p:column>
                            <p:column>Piso:        </p:column>
                            <p:column>Unidad:      </p:column>
                        </p:row>
                    </f:facet>
                    <p:row>
                        <p:column><p:inputText id="prov"  placeholder="Provincia" title="Provincia : #{fichaPredial.completarCeros(fichaPredial.predio.provincia, 2)}" value="#{fichaPredial.completarCeros(fichaPredial.predio.provincia, 2) == 99 ? fichaPredial.completarCeros(fichaPredial.codProvincia, 2) : fichaPredial.completarCeros(fichaPredial.predio.provincia, 2)}" readonly="true" style="width: 90%" maxlength="2"  /></p:column>
                        <p:column><p:inputText id="cant" placeholder="Canton" title="Canton : #{fichaPredial.completarCeros(fichaPredial.predio.canton, 2)}" value="#{fichaPredial.completarCeros(fichaPredial.predio.canton, 2)}" readonly="true" style="width: 90%"  maxlength="2"/></p:column>
                        <p:column><p:inputText id="parrq" placeholder="Parroquia" title="Parroquia :#{fichaPredial.completarCeros(fichaPredial.predio.parroquia, 2)}" value="#{fichaPredial.completarCeros(fichaPredial.predio.parroquia, 2)}" readonly="true" style="width: 90%" maxlength="2"/></p:column>
                        <p:column><p:inputText id="zona" placeholder="Zona" title="Zona : #{fichaPredial.completarCeros(fichaPredial.predio.zona, 2)}" value="#{fichaPredial.completarCeros(fichaPredial.predio.zona, 2)}" readonly="true" style="width: 90%" maxlength="2"/></p:column>
                        <p:column><p:inputText id="sect" placeholder="Sector" title="Sector : #{fichaPredial.completarCeros(fichaPredial.predio.sector, 2)}" value="#{fichaPredial.completarCeros(fichaPredial.predio.sector, 2)}" readonly="true" style="width: 90%" maxlength="2"/></p:column>
                        <p:column><p:inputText id="mz" placeholder="Manzana" title="Manzana : #{fichaPredial.completarCeros(fichaPredial.predio.mz, 3)}" value="#{fichaPredial.completarCeros(fichaPredial.predio.mz, 3)}" readonly="true" style="width: 90%" maxlength="3"/></p:column>
                        <p:column><p:inputText id="lot" placeholder="Lote" title="Lote : #{fichaPredial.completarCeros(fichaPredial.predio.solar, 3)}" value="#{fichaPredial.completarCeros(fichaPredial.predio.solar, 3)}" readonly="true"  style="width: 90%" maxlength="3"/></p:column>
                        <p:column><p:inputText id="bloq" placeholder="Bloque" title="Bloque : #{fichaPredial.completarCeros(fichaPredial.predio.bloque, 3)}" value="#{fichaPredial.completarCeros(fichaPredial.predio.bloque, 3)}" readonly="true" style="width: 90%" maxlength="3"/></p:column>
                        <p:column><p:inputText id="piso" placeholder="Piso" title="Piso : #{fichaPredial.completarCeros(fichaPredial.predio.piso, 2)}" value="#{fichaPredial.completarCeros(fichaPredial.predio.piso, 2)}" readonly="true" style="width: 90%" maxlength="2"/></p:column>
                        <p:column><p:inputText id="unid" placeholder="Unidad" title="Unidad : #{fichaPredial.completarCeros(fichaPredial.predio.unidad, 3)}" value="#{fichaPredial.completarCeros(fichaPredial.predio.unidad, 3)}" readonly="true" style="width: 90%" maxlength="3"/></p:column>
                    </p:row>
                </p:panelGrid>
                <p:fieldset legend="Codigos Anteriores" toggleable="true">
                    <p:panelGrid id="codPredioRaiz" layout="grid" columns="2" rendered="#{fichaPredial.predioRaiz.claveCat ne null}">
                        <h:outputText value="Clave Catastral del Predio Matriz:" style="font-weight: bolder"/>
                        <p:commandLink value="#{fichaPredial.predioRaiz.claveCat}" rendered="#{fichaPredial.predioRaiz.claveCat ne null}"
                                       actionListener="#{fichaPredial.redirectFichaPredial(fichaPredial.predioRaiz)}"/>
                    </p:panelGrid>
                    <p:panelGrid id="codigosAnteriores" columns="5" layout="grid" style="width: 100%" >
                        <h:outputText value="Clave Anterior 1:" style="font-weight: bolder"/>
                        <p:inputText value="#{fichaPredial.predio.predialant}" style="width: 100%" readonly="true"/>
                        <p:spacer width="5"/>
                        <h:outputText value="Clave Anterior 2:" style="font-weight: bolder"/>
                        <p:inputText value="#{fichaPredial.predio.predialantAnt}" style="width: 100%" readonly="true"/>
                    </p:panelGrid>
                </p:fieldset>
                <p:fieldset legend="Ubicación Grafica del predio o lote" toggleable="true">
                    <!--<p:commandLink actionListener="# {fichaPredial.redirecGeoportal()}"  >-->
<!--                    <h:graphicImage  alt="Ubicación Grafica" value="#{fichaPredial.ubicacionPredio()}" width="100%" height="450" 
                                     rendered="#{!fichaGeoVisor.geovisorEnabled}" /> -->
                    <!--<ui:include src="#{fichaGeoVisor.faceletMap}" rendered="#{fichaGeoVisor.geovisorEnabled}" />-->
                    <!--</p:commandLink>-->
                </p:fieldset>
            </p:tab>
            <p:tab id="tInfUrb" title="Localizacion del predio">
                <p:fieldset legend="Calles" toggleable="true">
                    <p:panelGrid id="pgCalles" columns="4" layout="grid" style="width: 100%">
                        <h:outputText value="(*)Calle Principal :" style="font-weight: bolder"/>
                        <p:inputText value="#{fichaPredial.predio.calle}" style="width: 80%" readonly="#{!fichaPredial.editable}"/>
                        <h:outputText value="Calle Sec. :" style="font-weight: bolder"/>
                        <p:inputText value="#{fichaPredial.predio.calleS}" style="width: 80%" readonly="#{!fichaPredial.editable}"/>
                        <h:outputText value="Placa Domiciliaria :" style="font-weight: bolder"/>
                        <p:inputText value="#{fichaPredial.predio.numeroVivienda}" style="width: 40%" readonly="#{!fichaPredial.editable}"/>
                    </p:panelGrid>
                </p:fieldset>
                <p:fieldset legend="Ubicacion" toggleable="true">
                    <p:panelGrid id="infoUrbanistica" columns="4" layout="grid" style="width: 100%">
                        <h:outputText value="(*)Espacio Urbano / Rural:" style="font-weight: bolder"/>
                        <p:selectOneMenu value="#{fichaPredial.predio.tipoConjunto}" effect="fade" converter="entityConverter" disabled="#{!fichaPredial.editable}">
                            <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                            <f:selectItems value="#{serviceLists.tiposConjunto}" var="tconj" itemLabel="#{tconj.nombre}" itemValue="#{tconj}"/>
                            <p:ajax update="tdatos:frmDatosPredio:tvUbicacion:nombEspUR" />
                        </p:selectOneMenu>
                        <h:outputText value="" style="font-weight: bolder"/>
                        <h:outputText value="" style="font-weight: bolder"/>
                        <h:outputText value="(*)Nombre del espacio urbano / rural :" style="font-weight: bolder; font-size: 12px;"/>
                        <p:selectOneMenu id="nombEspUR" value="#{fichaPredial.predio.ciudadela}" effect="fade" converter="entityConverter" filter="true" filterMatchMode="contains" disabled="#{!fichaPredial.editable}">
                            <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                            <f:selectItems value="#{serviceLists.getCiudadelas(fichaPredial.predio.tipoConjunto)}" var="cdla1" itemLabel="#{cdla1.nombre}" itemValue="#{cdla1}"/>
                        </p:selectOneMenu>
                        <h:outputText value="Nombre del Predio o Edificacion :" style="font-weight: bolder; "/>
                        <p:inputText value="#{fichaPredial.predio.nombreEdificio}" readonly="#{!fichaPredial.editable}"/>
                        <h:outputText value="(*) Sector de Valor :" style="font-weight: bolder"/>
                        <p:selectOneMenu id="subsector" value="#{fichaPredial.predio.subsector}" disabled="true" required="false" var="sv" converter="entityConverter"
                                         label="subsector" requiredMessage="El campo subsector es obligatorio" filter="true" filterMatchMode="contains"
                                         panelStyle="width: 250px;" >
                            <f:selectItem itemLabel="Elija un subsector" itemValue="#{null}"/>
                            <f:selectItems var="sbs" value="#{fichaPredial.subsectores}" itemLabel="#{sbs.sector} - #{sbs.detalle}" itemValue="#{sbs}" itemDescription="#{sbs.detalle}" />
                            <p:column style="width:20%">
                                <h:outputText styleClass="#{sv.sector}" />
                            </p:column>
                            <p:column style="width:60%">
                                <h:outputText value="#{sv.detalle}" title="#{sv.detalle}" />
                            </p:column>
                        </p:selectOneMenu>
                        <h:outputText value="Mz (Plano Aprobado):" style="font-weight: bolder"/>
                        <p:inputText value="#{fichaPredial.predio.urbMz}" readonly="#{!fichaPredial.editable}"/>
                        <h:outputText value="Eje de Valor :" style="font-weight: bolder"/>
                        <p:selectOneMenu id="ejeValor" value="#{fichaPredial.predio.subsector}" disabled="true" required="false" var="sv" converter="entityConverter"
                                         label="subsector" requiredMessage="El campo subsector es obligatorio" filter="true" filterMatchMode="contains"
                                         panelStyle="width: 250px;" >
                            <f:selectItem itemLabel="Elija un subsector" itemValue="#{null}"/>
                        </p:selectOneMenu>
                        <h:outputText value="Lote (Plano Aprobado):" style="font-weight: bolder"/>
                        <p:inputText value="#{fichaPredial.predio.urbSolarnew}" readonly="#{!fichaPredial.editable}"/>
                        <!--                                    <h:outputText value="Division :" style="font-weight: bolder"/>
                                                            <p:inputText value="#{fichaPredial.predio.divisionUrb}"/>-->
                        <h:outputText value="Descripcion (PH):" style="font-weight: bolder"/>
                        <p:inputText value="#{fichaPredial.predio.numDepartamento}" style="width: 90%;" readonly="#{!fichaPredial.editable}"/>
                        <h:outputText value="Planta (Piso PH):" style="font-weight: bolder"/>
                        <p:inputText value="#{fichaPredial.predio.piso}" readonly="#{!fichaPredial.editable}" onkeypress="validateIntegerValueAndFocusNext(event, null)" />
                        <h:outputText value="Coordenadas X (Latitud) :" style="font-weight: bolder"/>
                        <p:inputText value="#{fichaPredial.predio.coordx}" title="Coordenadas geográficas" style="width: 80%" onkeypress="validateIntegerValueAndFocusNext(event, null)" readonly="#{!fichaPredial.editable}">
                            <f:convertNumber pattern="##############.####" locale="us"/>
                        </p:inputText>
                        <h:outputText value="Coordenada Y (Longitud) :" style="font-weight: bolder"/>
                        <p:inputText value="#{fichaPredial.predio.coordy}" title="Coordenadas geográficas" style="width: 80%" onkeypress="validateIntegerValueAndFocusNext(event, null)" readonly="#{!fichaPredial.editable}">
                            <f:convertNumber pattern="##############.####" locale="us"/>
                        </p:inputText>
                        <p:outputLabel value=""/>
                        <p:outputLabel value=""/>
                    </p:panelGrid>
                </p:fieldset>
                <p:fieldset legend="(*) Uso del predio" toggleable="true">
                    <p:selectManyCheckbox id="usoSolar" styleClass="noBorder" value="#{fichaPredial.usosA}" layout="responsive" columns="4" converter="entityConverter" style="display:block; border-collapse: separate;" disabled="#{!fichaPredial.editable}">
                        <f:selectItems value="#{serviceLists.getListado('predio.uso_solar')}" var="uso1" itemLabel="#{uso1.valor}" itemValue="#{uso1}"/>
                    </p:selectManyCheckbox>
                </p:fieldset>
            </p:tab>
            <p:tab id="tavaluos" title="Areas y Avaluos">
                <!-- MODF -->
                <p:fieldset legend="Área Total" toggleable="true">
                    <p:panelGrid columns="4" layout="grid" style="width: 100%">
                        <h:outputText value="Escritura :"  style="font-weight: bolder"/>
                        <pe:inputNumber id="aEscritura" value="#{fichaPredial.escritura.areaSolar}" decimalPlaces="2" readonly="true"/>
                        <h:outputText value="Terreno :"  style="font-weight: bolder"/>
                        <pe:inputNumber id="asolar" value="#{fichaPredial.predio.areaSolar}" decimalPlaces="2" readonly="true"/>
                        <h:outputText value="Construcción :" style="font-weight: bolder"/>
                        <pe:inputNumber id="asac" value="#{fichaPredial.predio.areaDeclaradaConst}" decimalPlaces="2" readonly="true"/>
                        <h:outputText value="Obras Complementarias :" style="font-weight: bolder"/>
                        <pe:inputNumber id="aobras" value="#{fichaPredial.predio.areaObras}" decimalPlaces="2" readonly="true"/>
                        <h:outputText value="Cultivos :" style="font-weight: bolder"/>
                        <pe:inputNumber id="acult" value="#{fichaPredial.predio.areaCultivos}" decimalPlaces="2" readonly="true"/>
                    </p:panelGrid>
                </p:fieldset>
                <p:fieldset legend="Avalúo" toggleable="true" style="width: 100%">
                    <p:panelGrid id="pgAvaluos" columns="4" layout="grid" style="width: 100%">
                        <h:outputText value="Terreno :" style="font-weight: bolder"/>
                        <pe:inputNumber value="#{fichaPredial.predio.avaluoSolar}" decimalPlaces="2" readonly="true"/>
                        <h:outputText value="Construcción :" style="font-weight: bolder"/>
                        <pe:inputNumber value="#{fichaPredial.predio.avaluoConstruccion}" decimalPlaces="2"  readonly="true"/>
                        <h:outputText value="Obras Complementarias :" style="font-weight: bolder"/>
                        <pe:inputNumber value="#{fichaPredial.predio.avaluoObraComplement}" decimalPlaces="2" readonly="true"/>
                        <h:outputText value="Cultivos :" style="font-weight: bolder"/>
                        <pe:inputNumber value="#{fichaPredial.predio.avaluoCultivos}" decimalPlaces="2" readonly="true"/>
                        <h:outputText value="Valor de la Propiedad :" style="font-weight: bolder"/>
                        <pe:inputNumber value="#{fichaPredial.predio.avaluoMunicipal}" decimalPlaces="2" readonly="true"/>
                        <h:outputText value="Base Imponible :" style="font-weight: bolder"/>
                        <pe:inputNumber value="#{fichaPredial.predio.baseImponible}" decimalPlaces="2" readonly="true"/>
                    </p:panelGrid>
                </p:fieldset>
                <p:fieldset legend="Avalúo Ley de Plusvalía" toggleable="true" style="width: 100%">
                    <p:panelGrid id="pgAvaluosPlusvalia" columns="4" layout="grid" style="width: 100%">
                        <h:outputText value="Terreno :" style="font-weight: bolder"/>
                        <pe:inputNumber value="#{fichaPredial.predio.avaluoPlussolar}" decimalPlaces="2" readonly="#{!fichaPredial.editable}"/>
                        <h:outputText value="Construcción :" style="font-weight: bolder"/>
                        <pe:inputNumber value="#{fichaPredial.predio.avaluoPlusconstruccion}" decimalPlaces="2"  readonly="#{!fichaPredial.editable}"/>
                        <h:outputText value="Obras Complementarias :" style="font-weight: bolder"/>
                        <pe:inputNumber value="#{fichaPredial.predio.avaluoPluObraComplement}" decimalPlaces="2" readonly="#{!fichaPredial.editable}"/>
                        <h:outputText value="Cultivos :" style="font-weight: bolder"/>
                        <pe:inputNumber value="#{fichaPredial.predio.avaluoPluscultivos}" decimalPlaces="2" readonly="#{!fichaPredial.editable}"/>
                        <h:outputText value="Valor de la Propiedad :" style="font-weight: bolder"/>
                        <pe:inputNumber value="#{fichaPredial.predio.avaluoPlusmunicipal}" decimalPlaces="2" readonly="#{!fichaPredial.editable}"/>
                    </p:panelGrid>
                </p:fieldset>
            </p:tab>
        </p:tabView>
    </h:form>
</html>