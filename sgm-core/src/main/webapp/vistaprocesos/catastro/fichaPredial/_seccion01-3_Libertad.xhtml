<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:comp="http://java.sun.com/jsf/composite/dialog">

    <h:form id="frmDatosPredio">
        <div align="right">
            <p:commandButton  id="btnS1_1" value="Guardar" icon="ui-icon-disk" actionListener="#{fichaPredial.openDialog}"
                              process="@form" action="#{fichaPredial.setRemotteCommand('rc1')}" update="frmSubirDocumentosDialog" rendered="#{fichaPredial.editable}"/>

        </div>
        <p:fieldset legend="Áreas del predio" toggleable="true" style="margin-top: 15px;">
            <h:panelGrid columns="2" style="width: 100%">
                <comp:decorateForm id="area_terreno" label="Terreno:" bind="#{fichaPredial.predio.areaSolar}"
                                   floatValidate="true" pattern="##############.##"  readonly="true"/>

<!--            <comp:decorateForm id="area_cultivos" label="Cultivos:" bind="#{fichaPredial.predio.areaCultivos}"
                               floatValidate="true" pattern="##############.##" />-->

                <comp:decorateForm id="area_construccion" label="Construcción:" bind="#{fichaPredial.predio.areaDeclaradaConst}"
                                   floatValidate="true" pattern="##############.##" />

                <!--            <comp:decorateForm id="area_obras" label="Obras:" bind="# {fichaPredial.predio.areaObras}"
                                               floatValidate="true" pattern="##############.##" readonly="true" next="tdatos:frmDatosPredio:btnS1"/>-->
            </h:panelGrid>
        </p:fieldset>

        <p:fieldset legend="Suma de Avalúos" toggleable="true" class="MarBot10">
            <h:panelGrid id="pgAvaluos" columns="2" style="width: 100%">
                <comp:decorateForm id="ava_terreno" label="Avalúo Solar: " bind="#{fichaPredial.predio.avaluoSolar}"
                                   floatValidate="true" pattern="##############.##" readonly="true"/>

                <comp:decorateForm id="ava_construccion" label="Avalúo Edificación: " bind="#{fichaPredial.predio.avaluoConstruccion}"
                                   floatValidate="true" pattern="##############.##" readonly="true"/>

                <comp:decorateForm id="ava_complemente" label="Avalúo Obra Complementaria: " bind="#{fichaPredial.predio.avaluoObraComplement}"
                                   floatValidate="true" pattern="##############.##" readonly="true"/>

                <!-- UTILICE EL campo avaluoPlusmunicipal como avaluo fijo para la libertad ya que no queria crear mas campos en base :( :D :v -->
                <comp:decorateForm id="ava_fijo" label="Avalúo Fijo: " bind="#{fichaPredial.predio.avaluoPlusmunicipal}"
                                   floatValidate="true" pattern="##############.##" readonly="true"/>

                <comp:decorateForm id="ava_propiedad" label="Avalúo Comercial: " bind="#{fichaPredial.predio.avaluoMunicipal}"
                                   floatValidate="true" pattern="##############.##" readonly="true"/>

            </h:panelGrid>
        </p:fieldset>

        <p:fieldset legend="Historial de Avalúos" toggleable="true" style="margin-top: 15px;">
            <h:panelGroup layout="block" class="Responsive Wid100 Container100" >
                <p:dataTable id="avalHistoricoList" value="#{fichaPredial.avaluosHistoricosPredio}" var="p" emptyMessage="No existen registros historicos">
                    <p:column headerText="Fecha de Actualización">
                        <h:outputText value="#{p.fechaActualizacion}"  style="text-align: center"/>
                    </p:column>
                    <p:column headerText="Año">
                        <h:outputText value="#{p.anioInicio}"  style="text-align: center"/>
                    </p:column>
                    <p:column headerText="Valor Base por M2">
                        <h:outputText value="#{p.valorBaseM2}"  style="text-align: center"/>
                    </p:column>
                    <p:column headerText="Avalúo Solar">
                        <h:outputText value="#{p.avaluoSolar}" style="text-align: center" />
                    </p:column>
                    <!--                <p:column headerText="Suma de Coeficientes del Solar">
                                        <h:outputText value="#{p.sumaCoeficientes}" style="text-align: center" />
                                    </p:column>-->
                    <p:column headerText="Avalúo de la Construcción">
                        <h:outputText value="#{p.avaluoConstruccion}" style="text-align: center"/>
                    </p:column>
                    <!--                <p:column headerText="Suma de Coeficientes de la Construcción">
                                        <h:outputText value="#{p.sumaCoefEdif}" style="text-align: center"/>
                                    </p:column>-->
                    <p:column headerText="Avalúo del Cultivo" rendered="#{appConfig.mainConfig.fichaPredial.redenerFichaIb}">
                        <h:outputText value="#{p.avaluoCultivo}" style="text-align: center" />
                    </p:column>
                    <p:column headerText="Avalúo de la Propiedad">
                        <h:outputText value="#{p.avaluoMunicipal}" style="text-align: center" />
                    </p:column>
                    <p:column headerText="Detalles de Cálculos">
                        <p:commandLink actionListener="#{fichaPredial.reporteDetalleCalculos(p)}" rendered="#{!p.migrada}" process="@this">
                            <p:graphicImage value="/css/homeIconsImages/reporte.png" height="35"/>
                        </p:commandLink>
                    </p:column>
                </p:dataTable>
            </h:panelGroup>
        </p:fieldset> 


    </h:form>

</html>