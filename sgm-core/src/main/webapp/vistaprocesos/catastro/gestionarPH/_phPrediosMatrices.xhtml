<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:panelGroup layout="block" class="Wid100 MarTop10 Container"  style="margin-bottom: 20px;">
        <h:panelGroup layout="block" class="Container Wid100">
            <h1 class="BigTopic Fs16">Listado de Fichas Madres </h1>
            <hr></hr>
            <div class="ContainerIndent">
                <p:dataTable id="dtPredios" value="#{propiedadHorizontal.predios}" var="pt" paginator="true" emptyMessage="No se encontró ningun predio"
                             rows="10" lazy="true" selection="#{propiedadHorizontal.predioMatriz}" rowKey="#{pt.id}" widgetVar="predios" selectionMode="single"
                             paginatorPosition="bottom" rowsPerPageTemplate="5,10,15,20,30,50"
                             currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords}"
                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             filterEvent="enter">
                    <f:facet name="header">
                        <h:outputText value="Clic derecho en los registros, para acceder a la informacion del predio"/>
                    </f:facet>
                    <p:ajax event="rowSelect" listener="#{propiedadHorizontal.onRowSelect}" update="registroPHForm" />
                    <p:column headerText="# Predio" filterStyle="width: 90%" style="text-align: center;" filterBy="#{pt.numPredio}" sortBy="#{pt.numPredio}" filterMatchMode="contains" width="10%" >
                        <h:outputText value="#{pt.numPredio}"/>
                    </p:column>
                    <p:column headerText="Propietario" style="text-align: center;"  width="12%" >
                        <h:outputText value="#{pt.nombrePropietarios}" style="font-size: 10px" />
                    </p:column>
                    <p:column  id="coltipo"  filterBy="#{pt.ciudadela.nombre}" headerText="Urbanización"
                               filterOptions="#{propiedadHorizontal.lisUrbanizaciones}" filterMatchMode="exact" width="15%" >
                        <h:outputText value="#{pt.ciudadela.nombre}" style="font-size: 10px; animation: cubic-bezier; animation-direction: alternate;"/>
                    </p:column>
                    <p:column headerText="Parroquia" width="4%" style="text-align: center;" filterBy="#{pt.parroquia}" sortBy="#{pt.parroquia}" filterStyle="width: 50%">
                        <h:outputText value="#{pt.parroquia}"  />
                    </p:column>
                    <p:column headerText="Zona"  width="4%" style="text-align: center;" filterBy="#{pt.zona}" sortBy="#{pt.zona}" filterStyle="width: 50%">
                        <h:outputText value="#{pt.zona}"/>
                    </p:column>
                    <p:column headerText="Sector"  width="4%" style="text-align: center;" filterBy="#{pt.sector}" sortBy="#{pt.sector}" filterStyle="width: 50%">
                        <h:outputText value="#{pt.sector}"/>
                    </p:column>
                    <p:column headerText="Mz"  width="4%" style="text-align: center;" filterBy="#{pt.mz}" sortBy="#{pt.mz}" filterStyle="width: 50%">
                        <h:outputText value="#{pt.mz}"/>
                    </p:column>
                    <p:column headerText="Lote"  width="4%" style="text-align: center;" filterBy="#{pt.solar}"  sortBy="#{pt.solar}" filterStyle="width: 50%">
                        <h:outputText value="#{pt.solar}"/>
                    </p:column>
                    <p:column headerText="Avalùo Solar"  width="8%" style="text-align: center;" filterBy="#{pt.bloque}"  sortBy="#{pt.bloque}" filterStyle="width: 50%">
                        <h:outputText value="#{pt.avaluoSolar}">
                            <f:convertNumber pattern="$ #,##0.00" />
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Avalùo Construccion"  width="8%" style="text-align: center;" filterBy="#{pt.piso}"  sortBy="#{pt.piso}" filterStyle="width: 50%">
                        <h:outputText value="#{pt.avaluoConstruccion}">
                            <f:convertNumber pattern="$ #,##0.00" />
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Avalùo de la Propiedad"  width="8%" style="text-align: center;" filterBy="#{pt.unidad}"  sortBy="#{pt.unidad}" filterStyle="width: 50%">
                        <h:outputText value="#{pt.avaluoMunicipal}">
                            <f:convertNumber pattern="$ #,##0.00" />
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Cantidad Bloques" style="text-align: center;" width="8%" >
                        <h:outputText value="#{propiedadHorizontal.cantidadEdificaciones(pt)}"/>
                    </p:column>
                </p:dataTable>
                <p:contextMenu for="dtPredios" id="contexMenuPredios"  widgetVar="ctxMenu" beforeShow="return true;" >
                    <p:menuitem value="Editar" icon="ui-icon-pencil" actionListener="#{propiedadHorizontal.ver(true)}" rendered="#{acesosFicha.editar()}"/>
                    <p:menuitem value="Ver" icon="ui-icon-search" actionListener="#{propiedadHorizontal.ver(false)}" rendered="#{acesosFicha.ver()}"/>
                    <p:menuitem value="Imprimir" icon="ui-icon-print" actionListener="#{gestionPredios.imprimirFicha(false)}"  ajax="false" rendered="#{acesosFicha.imprimir() and !appConfig.mainConfig.fichaPredial.libertad}" update="@all"/>
                    <p:menuitem value="Imprimir Croquis" icon="ui-icon-print" actionListener="#{gestionPredios.imprimirFicha(true)}"  ajax="false" rendered="#{acesosFicha.imprimir()}"/>
                </p:contextMenu>
            </div>
        </h:panelGroup>
    </h:panelGroup>
    <script>
        document.getElementById("dtPredios:coltipo:filter").classList.add('dataTableSelect');

    </script>
</html>