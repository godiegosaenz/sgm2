<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:panelGroup layout="block" class="Wid100 MarTop10 Container" id="escriturasContainer" style="margin-bottom: 20px;">
        <h1 class="BigTopic Fs16">Ubicaciones</h1>

        <h:panelGroup id="sectorizacion" layout="block" class="Container Wid100">
            <hr></hr>
            <!--<p:fieldset legend="Sectorización" toggleable="true" toggleSpeed="500" style="margin-bottom: 10px;">-->
            <center>
                <h:panelGrid columns="1" style="align-self:  center; margin-top:5px;">

                    <p:selectOneRadio  value="#{obrasR.tipoDefinicion}"   >
                        <f:selectItem itemLabel="Según Parroquia" itemValue="Parroquia" />  
                        <f:selectItem itemLabel="Según Zonas" itemValue="Zona"  />
                        <f:selectItem itemLabel="Según Sectores" itemValue="Sector"  />
                        <f:selectItem itemLabel="Según Manzanas" itemValue="Mz"  />
                        <f:selectItem itemLabel="Según Predios" itemValue="Lote"  />
                        <p:ajax event="valueChange" process="@form" update="@form" global="false" listener="#{obrasR.cleanVarPrediosDTO()}" />

                        <!--listener="# {obrasR.cleanVarPrediosDTO()}"-->
                    </p:selectOneRadio>


                </h:panelGrid>
            </center>
        </h:panelGroup>

        <!--</p:fieldset>-->




        <h:panelGroup  id="p" layout="block" class="Container Wid100 MarTop10" rendered="#{obrasR.tipoDefinicion eq 'Parroquia'}">
            <p:fieldset legend="Listado de Parroquias en el Canton" toggleable="true" toggleSpeed="500" style="margin-bottom: 10px;">
                <div class="ContainerIndent" align="center">
                    <h:outputText value="Parroquias" style="font-size: 16px; font-weight: bolder;"/><br></br>
                    <p:selectOneMenu  value="#{obrasR.parroquia}"  style="width:200px" effect="fade" converter="entityConverter"  filter="true" filterMatchMode="contains">
                        <f:selectItem itemLabel="TODAS" itemValue="#{null}"/>
                        <f:selectItems value="#{obrasR.parroquias}" var="t" itemLabel="#{t.codigoParroquia} - #{t.descripcion}" itemValue="#{t}"/>
                    </p:selectOneMenu>
                </div>

            </p:fieldset>
        </h:panelGroup>
        <h:panelGroup id="zona"  layout="block" class="Container Wid100 MarTop10"  rendered="#{obrasR.tipoDefinicion eq 'Zona'}">
            <p:fieldset  legend="Listado de Zonas en el Canton" toggleable="true" toggleSpeed="500" style="margin-bottom: 10px;" >
                <p:dataTable id="zonasPredios" var="p" value="#{obrasR.zonasPredios}"
                             paginator="true" selection="#{obrasR.prediosDTOSeleccionados}" rowKey="#{p.id}"  
                             emptyMessage="No se encontro ningun predio" rows="20" rowsPerPageTemplate="20,50,100" >
                    <f:facet name="header">
                        Listado Zonas 
                    </f:facet>
                    <p:ajax event="rowSelect"  update="zonasPredios" />
                    <p:ajax event="rowUnselect"  update="zonasPredios"  />
                    <p:ajax event="rowSelectCheckbox"  update="zonasPredios" />
                    <p:ajax event="rowUnselectCheckbox"  update="zonasPredios" />
                    <p:ajax event="toggleSelect"  update="zonasPredios" />
                    <p:ajax event="filter" update="zonasPredios" />
                    <p:column selectionMode="multiple" style="width:30px;text-align:center" />
                    <p:column headerText="Parroquia" filterBy="#{p.parroquia}" filterStyle="width: 45%" filterMatchMode="contains" style="text-align: center" >
                        <h:outputText value="#{p.parroquia}" />
                    </p:column>
                    <p:column headerText="Zona" filterBy="#{p.zona}" filterStyle="width: 45%" filterMatchMode="contains"  style="text-align: center" >
                        <h:outputText value="#{p.zona}" />
                    </p:column>

                </p:dataTable>
            </p:fieldset>
        </h:panelGroup>
        <h:panelGroup layout="block" class="Container Wid100 MarTop10" rendered="#{obrasR.tipoDefinicion eq 'Sector'}">
            <p:fieldset legend="Listado de Sectores en el Canton" toggleable="true" toggleSpeed="500" style="margin-bottom: 10px;">
                <p:dataTable id="sectoresPredios" var="p" value="#{obrasR.sectoresPredios}" paginator="true"  
                             selection="#{obrasR.prediosDTOSeleccionados}" rowKey="#{p.id}" 
                             emptyMessage="No se encontro ningun predio" rows="20" rowsPerPageTemplate="20,50,100" >
                    <f:facet name="header">
                        Listado Sectores 
                    </f:facet>
                    <p:ajax event="rowSelect"  update="sectoresPredios" />
                    <p:ajax event="rowUnselect"  update="sectoresPredios"  />
                    <p:ajax event="rowSelectCheckbox"  update="sectoresPredios" />
                    <p:ajax event="rowUnselectCheckbox"  update="sectoresPredios" />
                    <p:ajax event="toggleSelect"  update="sectoresPredios" />
                    <p:ajax event="filter" update="sectoresPredios" />
                    <p:column selectionMode="multiple" style="width:30px;text-align:center" />
                    <p:column headerText="Parroquia" filterBy="#{p.parroquia}" filterStyle="width: 45%" filterMatchMode="contains" style="text-align: center" >
                        <h:outputText value="#{p.parroquia}" />
                    </p:column>
                    <p:column headerText="Zona" filterBy="#{p.zona}" filterStyle="width: 45%" filterMatchMode="contains"  style="text-align: center" >
                        <h:outputText value="#{p.zona}" />
                    </p:column>
                    <p:column headerText="Sectores" filterBy="#{p.sector}" filterStyle="width: 45%" filterMatchMode="contains" style="text-align: center" >
                        <h:outputText value="#{p.sector}" />
                    </p:column>
                    <p:column headerText="# Manzanas"  style="text-align: center" >
                        <h:outputText value="#{p.mz}" />
                    </p:column>
                    <p:column headerText="# Solares"  style="text-align: center" >
                        <h:outputText value="#{p.cantidadsolar}" />
                    </p:column>

                </p:dataTable>
            </p:fieldset>
        </h:panelGroup>
        <h:panelGroup id="pnlMzSelec" layout="block" class="Container Wid100 MarTop10" rendered="#{obrasR.tipoDefinicion eq 'Mz'}">
            <p:fieldset legend="Listado de Manzanas en el Canton" toggleable="true" toggleSpeed="500" style="margin-bottom: 10px;">
                <p:dataTable id="prediosManzanasList" var="p" value="#{obrasR.prediosXManzana}" 
                             paginator="true"  selection="#{obrasR.prediosDTOSeleccionados}" rowKey="#{p.id}" 
                             emptyMessage="No se encontro ningun registro" rows="20" rowsPerPageTemplate="20,50,100" filterEvent="enter">

                    <p:ajax event="rowSelect"  update="prediosManzanasList" />
                    <p:ajax event="rowUnselect"  update="prediosManzanasList"  />
                    <p:ajax event="rowSelectCheckbox"  update="prediosManzanasList" />
                    <p:ajax event="rowUnselectCheckbox"  update="prediosManzanasList" />
                    <p:ajax event="toggleSelect"  update="prediosManzanasList" />
                    <p:ajax event="filter" update="prediosManzanasList" />
                    <p:column selectionMode="multiple" style="width:30px;text-align:center" />
                    <f:facet name="header">
                        Listado de Parroquias, Zonas, Sector y Mz. Existentes
                    </f:facet>
                    <p:column headerText="Parroquia" filterBy="#{p.parroquia}" filterStyle="width: 45%" filterMatchMode="contains" style="text-align: center" >
                        <h:outputText value="#{p.parroquia}" />
                    </p:column>
                    <p:column headerText="Zona" filterBy="#{p.zona}" filterStyle="width: 45%" filterMatchMode="contains" style="text-align: center" >
                        <h:outputText value="#{p.zona}" />
                    </p:column>
                    <p:column headerText="Sector" filterBy="#{p.sector}" filterStyle="width: 45%" filterMatchMode="contains"  style="text-align: center" >
                        <h:outputText value="#{p.sector}" />
                    </p:column>
                    <p:column headerText="Manzana" filterBy="#{p.mz}" filterStyle="width: 45%" filterMatchMode="contains"  style="text-align: center" >
                        <h:outputText value="#{p.mz}" />
                    </p:column>
                    <p:column headerText="# de Solares"  style="text-align: center" >
                        <h:outputText value="#{p.cantidadsolar}" />
                    </p:column>
                </p:dataTable>
            </p:fieldset>

        </h:panelGroup>
        <h:panelGroup id="pnlPrediosCanton" layout="block" class="Container Wid100 MarTop10" rendered="#{obrasR.tipoDefinicion eq 'Lote'}">
            <p:fieldset legend="Listado de Predios en el Canton" toggleable="true" toggleSpeed="500" style="margin-bottom: 10px;">
                <div class="ContainerIndent">
                    <p:fieldset legend="Seleccione Frentistas" toggleable="true" toggleSpeed="500" style="margin-bottom: 10px;">
                        <p:dataTable id="dtPredios" value="#{obrasR.predios}" var="pt" widgetVar="predios"
                                     selection="#{obrasR.prediosFrentistasTemp}" rowKey="#{pt.id}" filterEvent="enter" 
                                     rows="10" lazy="true" paginator="true" emptyMessage="No se encontró ningun predio" >
                            <p:ajax event="rowSelect"  update="dtPredios, dtPrediosGeneral" listener="#{obrasR.addFrentistas()}" />
                            <p:ajax event="rowUnselect"  update="dtPredios, dtPrediosGeneral"  listener="#{obrasR.addFrentistas()}"/>
                            <p:ajax event="rowSelectCheckbox"  update="dtPredios, dtPrediosGeneral" listener="#{obrasR.addFrentistas()}"/>
                            <p:ajax event="rowUnselectCheckbox"  update="dtPredios, dtPrediosGeneral" listener="#{obrasR.addFrentistas()}"/>
                            <p:ajax event="toggleSelect"  update="dtPredios, dtPrediosGeneral" listener="#{obrasR.addFrentistas()}"/>
                            <p:ajax event="filter" update="dtPredios" />
                            <p:column selectionMode="multiple" style="width:30px;text-align:center" />

                            <p:column headerText="# Predio" filterStyle="width: 90%" style="text-align: center;" filterBy="#{pt.numPredio}" sortBy="#{pt.numPredio}" filterMatchMode="contains" width="8%" >
                                <h:outputText value="#{pt.numPredio}"/>
                            </p:column>
                            <p:column  id="coltipo"  filterBy="#{pt.ciudadela.nombre}" headerText="Urbanización"
                                       filterOptions="#{cuadroAlicuotasView.lisUrbanizaciones}" filterMatchMode="exact" width="8%" >
                                <h:outputText value="#{pt.ciudadela.nombre}" style="font-size: 10px; animation: cubic-bezier; animation-direction: alternate;"/>
                            </p:column>
                            <p:column headerText="Clave Cat." width="20%" style="text-align: center;" filterBy="#{pt.claveCat}" sortBy="#{pt.claveCat}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.claveCat}"  style="font-size: 10px;"/>
                            </p:column>
                            <p:column headerText="Parroquia" width="8%" style="text-align: center;" filterBy="#{pt.parroquia}" sortBy="#{pt.parroquia}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.parroquia}"  />
                            </p:column>
                            <p:column headerText="Zona"  width="5%" style="text-align: center;" filterBy="#{pt.zona}" sortBy="#{pt.zona}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.zona}"/>
                            </p:column>
                            <p:column headerText="Sector"  width="7%" style="text-align: center;" filterBy="#{pt.sector}" sortBy="#{pt.sector}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.sector}"/>
                            </p:column>
                            <p:column headerText="Mz"  width="5%" style="text-align: center;" filterBy="#{pt.mz}" sortBy="#{pt.mz}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.mz}"/>
                            </p:column>
                            <p:column headerText="Lote"  width="5%" style="text-align: center;" filterBy="#{pt.solar}"  sortBy="#{pt.solar}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.solar}"/>
                            </p:column>
                            <p:column headerText="Bloque"  width="7%" style="text-align: center;" filterBy="#{pt.bloque}"  sortBy="#{pt.bloque}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.bloque}"/>
                            </p:column>
                            <p:column headerText="Piso"  width="5%" style="text-align: center;" filterBy="#{pt.piso}"  sortBy="#{pt.piso}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.piso}"/>
                            </p:column>
                            <p:column headerText="Unidad"  width="7%" style="text-align: center;" filterBy="#{pt.unidad}"  sortBy="#{pt.unidad}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.unidad}"/>
                            </p:column>
                            <p:column headerText="Nombres" style="text-align: center; width: 20%"  >
                                <p:outputLabel id="props" value="#{gestionPredios.nombresPropietarios(pt)}" style="font-size: 10px;"/>
                                <p:tooltip for="props" value="#{gestionPredios.nombresPropietarios(pt)}"  style="font-size: 10px; color : #0066cc; background-color : #000"/>
                            </p:column>
                            <p:column headerText="Calle Princ." style="text-align: center; width: 10%" filterBy="#{pt.calle}" filterStyle="width: 90%">
                                <p:outputLabel id="calle" value="#{pt.calle}" style="font-size: 10px; "/>
                                <p:tooltip for="calle" value="Calle Principal: #{pt.calle} - Calle Secundaria: #{pt.calleS}"  style="font-size: 10px; color : #0066cc; background-color : #000"/>
                            </p:column>
                            <!--                            <p:column headerText="Total Avalúo" style="text-align: center; width: 10%" >
                                                            <p:outputLabel id="avaluo" value="#{pt.avaluoMunicipal}"/>
                                                            <p:tooltip for="avaluo" value=" #{pt.avaluoMunicipal}"  style="color : #0066cc; background-color : #000"/>
                                                        </p:column>-->
                        </p:dataTable>
                    </p:fieldset>
                    <p:fieldset legend="Seleccione Generales" toggleable="true" toggleSpeed="500" style="margin-bottom: 10px;">
                        <p:dataTable id="dtPrediosGeneral" value="#{obrasR.prediosGenerales}" var="pt"
                                     selection="#{obrasR.catPredios}" rowKey="#{pt.id}" filterEvent="enter"  widgetVar="prediosG"
                                     rows="10" lazy="true" paginator="true" emptyMessage="No se encontró ningun predio" >
                            <p:ajax event="rowSelect"  update="dtPrediosGeneral" />
                            <p:ajax event="rowUnselect"  update="dtPrediosGeneral"  />
                            <p:ajax event="rowSelectCheckbox"  update="dtPrediosGeneral" />
                            <p:ajax event="rowUnselectCheckbox"  update="dtPrediosGeneral" />
                            <p:ajax event="toggleSelect"  update="dtPrediosGeneral" />
                            <p:ajax event="filter" update="dtPrediosGeneral" />
                            <p:column selectionMode="multiple" style="width:30px;text-align:center" />
                            <p:column headerText="# Predio" filterStyle="width: 90%" style="text-align: center;" filterBy="#{pt.numPredio}" sortBy="#{pt.numPredio}" filterMatchMode="contains" width="8%" >
                                <h:outputText value="#{pt.numPredio}"/>
                            </p:column>
                            <p:column  id="coltipo1"  filterBy="#{pt.ciudadela.nombre}" headerText="Urbanización"
                                       filterOptions="#{cuadroAlicuotasView.lisUrbanizaciones}" filterMatchMode="exact" width="8%" >
                                <h:outputText value="#{pt.ciudadela.nombre}" style="font-size: 10px; animation: cubic-bezier; animation-direction: alternate;"/>
                            </p:column>
                            <p:column headerText="Clave Cat." width="20%" style="text-align: center;" filterBy="#{pt.claveCat}" sortBy="#{pt.claveCat}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.claveCat}" style="font-size: 10px;" />
                            </p:column>
                            <p:column headerText="Parroquia" width="8%" style="text-align: center;" filterBy="#{pt.parroquia}" sortBy="#{pt.parroquia}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.parroquia}"  />
                            </p:column>
                            <p:column headerText="Zona"  width="5%" style="text-align: center;" filterBy="#{pt.zona}" sortBy="#{pt.zona}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.zona}"/>
                            </p:column>
                            <p:column headerText="Sector"  width="7%" style="text-align: center;" filterBy="#{pt.sector}" sortBy="#{pt.sector}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.sector}"/>
                            </p:column>
                            <p:column headerText="Mz"  width="5%" style="text-align: center;" filterBy="#{pt.mz}" sortBy="#{pt.mz}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.mz}"/>
                            </p:column>
                            <p:column headerText="Lote"  width="5%" style="text-align: center;" filterBy="#{pt.solar}"  sortBy="#{pt.solar}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.solar}"/>
                            </p:column>
                            <p:column headerText="Bloque"  width="7%" style="text-align: center;" filterBy="#{pt.bloque}"  sortBy="#{pt.bloque}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.bloque}"/>
                            </p:column>
                            <p:column headerText="Piso"  width="5%" style="text-align: center;" filterBy="#{pt.piso}"  sortBy="#{pt.piso}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.piso}"/>
                            </p:column>
                            <p:column headerText="Unidad"  width="7%" style="text-align: center;" filterBy="#{pt.unidad}"  sortBy="#{pt.unidad}" filterStyle="width: 50%">
                                <h:outputText value="#{pt.unidad}"/>
                            </p:column>
                            <p:column headerText="Nombres" style="text-align: center; width: 20%"  >
                                <p:outputLabel id="props" value="#{gestionPredios.nombresPropietarios(pt)}" style="font-size: 10px;"/>
                                <p:tooltip for="props" value="#{gestionPredios.nombresPropietarios(pt)}"  style="font-size: 10px; color : #0066cc; background-color : #000"/>
                            </p:column>
                            <p:column headerText="Calle Princ." style="text-align: center; width: 10%" filterBy="#{pt.calle}" filterStyle="width: 90%">
                                <p:outputLabel id="calle" value="#{pt.calle}" style="font-size: 10px; "/>
                                <p:tooltip for="calle" value="Calle Principal: #{pt.calle} - Calle Secundaria: #{pt.calleS}"  style="font-size: 10px; color : #0066cc; background-color : #000"/>
                            </p:column>
                            <!--                        <p:column headerText="Total Avalúo" style="text-align: center; width: 10%" >
                                                        <p:outputLabel id="avaluo" value="#{pt.avaluoMunicipal}"/>
                                                        <p:tooltip for="avaluo" value=" #{pt.avaluoMunicipal}"  style="color : #0066cc; background-color : #000"/>
                                                    </p:column>-->
                        </p:dataTable>
                    </p:fieldset>

                </div>
            </p:fieldset>
            <script>
                document.getElementById("dtPredios:coltipo:filter").classList.add('dataTableSelect');
                document.getElementById("dtPrediosGeneral:coltipo1:filter").classList.add('dataTableSelect');
            </script>
        </h:panelGroup>
    </h:panelGroup>


</html>