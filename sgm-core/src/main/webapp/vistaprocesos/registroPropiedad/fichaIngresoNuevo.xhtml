<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pe="http://primefaces.org/ui/extensions">
    <body>
        <ui:composition template="/template/template.xhtml">
            <ui:define name="top">
                <h3>Ingreso de Ficha</h3>
            </ui:define>
            <ui:define name="content">
                <h:form id="formFichIng">
                    <p:panel header="Informacion de Ficha" style="width: 100%">
                        <p:panelGrid styleClass="noBorder" columns="4" style="margin: 0 auto">
                            <p:outputLabel value="Tipo de Ficha:" style="font-weight: bolder;font-size: 14px;"/>
                            <p:selectOneMenu value="#{fichaIngresoNuevo.tipoFicha}" disabled="true">
                                <f:selectItems value="#{fichaIngresoNuevo.listTipoFicha}" var="f" itemValue="#{f}" itemLabel="#{f.nombre}"/>
                            </p:selectOneMenu>
                            <p:outputLabel value="Tipo de Trabajo:" style="font-weight: bolder;font-size: 14px;"/>
                            <p:selectOneMenu value="#{fichaIngresoNuevo.ingreso.variasFichas}" >
                                <f:selectItem itemValue="#{false}" itemLabel="Una Ficha"/>
                                <f:selectItem itemValue="#{true}" itemLabel="Varias Fichas"/>
                                <p:ajax listener="#{fichaIngresoNuevo.actualizarInmobiliario()}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>
                        <!-- Varias Fichas -->
                        <p:panel id="pgVariasFichas" header="Duplicar Fichas" style="width: 100%"
                                 rendered="#{fichaIngresoNuevo.ingreso.variasFichas}" >
                            <p:panelGrid styleClass="noBorder" columns="5">
                                <p:outputLabel value="Ficha Principal:"/>
                                <pe:inputNumber value="#{fichaIngresoNuevo.ingreso.numeroFicha}" decimalPlaces="0"/>
                                <p:commandButton actionListener="#{fichaIngresoNuevo.buscarFicha()}" update="pgVariasFichas" icon="ui-icon-search"
                                                 value="Buscar" styleClass="btnStyle"/>
                                <p:outputLabel value="Cantidad de Fichas a Generar:"/>
                                <p:inputText value="#{fichaIngresoNuevo.ingreso.cantidadFichas}"/>
                            </p:panelGrid>
                            <p:tabView id="tabMov">
                                <p:tab title="Linderos Registrales">
                                    <p:inputTextarea style="width: 100%" value="#{fichaIngresoNuevo.ingreso.linderos}" cols="100" rows="14" 
                                                     autoResize="false" scrollHeight="200"/>
                                </p:tab>
                                <p:tab title="Movimientos Registrales">
                                    <p:commandButton value="Agregar Movs." icon="ui-icon-plus" styleClass="btnStyle"
                                                     style="float: right" actionListener="#{fichaIngresoNuevo.showDlgMovimientos()}"/><br/><br/>
                                    <p:dataTable id="dtMov" value="#{fichaIngresoNuevo.movimientos}" emptyMessage="No hay movimientos agregados..." var="mImob" rowIndexVar="rowIndex"
                                                 scrollHeight="300" scrollable="true" reflow="true" style="text-align: center" >
                                        <p:column headerText="No" width="60">
                                            #{rowIndex + 1}
                                        </p:column>
                                        <p:column headerText="Libro">
                                            <p:outputLabel value="#{mImob.libro.nombre}" />
                                        </p:column>
                                        <p:column headerText="Inscripcion" width="100">
                                            <p:outputLabel value="#{mImob.numInscripcion}"/>
                                        </p:column>
                                        <p:column headerText="Fec.Inscripcion" width="120">
                                            <p:outputLabel value="#{mImob.fechaInscripcion}" >
                                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </p:outputLabel>
                                            <!--p:calendar value="# {mImob.fechaInscripcion}" disabled="true" style="font-size: 13px; font-weight: bold"/-->
                                        </p:column>
                                        <p:column headerText="Repertorio" width="100">
                                            <p:outputLabel value="#{mImob.numRepertorio}" />
                                        </p:column>
                                        <p:column headerText="Elim." width="50">
                                            <p:commandLink actionListener="#{fichaIngresoNuevo.eliminarMovimiento(rowIndex)}" update="dtMov">
                                                <p:graphicImage value="/css/homeIconsImages/delete.png" height="16"/>   
                                            </p:commandLink>
                                        </p:column>
                                    </p:dataTable>
                                </p:tab>
                            </p:tabView>
                            <p:panelGrid id="pnlButtons" styleClass="noBorder" style="margin: 0 auto" columns="2">
                                <p:commandButton value="Guardar" actionListener="#{fichaIngresoNuevo.guardarVariasFichas()}" styleClass="btnStyle"
                                                 disabled="#{!fichaIngresoNuevo.ingreso.habilitado}" update="pnlButtons" icon="ui-icon-disk" />
                                <p:commandButton value="Nueva Ficha" actionListener="#{fichaIngresoNuevo.redirectNuevaFicha()}" styleClass="btnStyle"
                                                 disabled="#{fichaIngresoNuevo.ingreso.habilitado}" icon="ui-icon-document" />
                            </p:panelGrid>
                        </p:panel>

                        <!-- Una Ficha -->
                        <p:tabView id="tvUnaFicha" rendered="#{!fichaIngresoNuevo.ingreso.variasFichas}" style="width: 100%;">
                            <p:tab title="Informacion Catastral">
                                <p:panelGrid id="pngUnaFicha" style="width: 100%;" styleClass="noBorder" >
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="Tipo Predio:"/>
                                        </p:column>
                                        <p:column>
                                            <p:selectOneMenu value="#{fichaIngresoNuevo.ingreso.urbano}">
                                                <f:selectItem itemLabel="Urbano" itemValue="#{true}"/>
                                                <f:selectItem itemLabel="Rural" itemValue="#{false}"/>
                                                <p:ajax update="tvUnaFicha" listener="#{fichaIngresoNuevo.tipoPredioFicha()}"/>
                                            </p:selectOneMenu>
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel value="Fecha Apertura:"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText value="#{fichaIngresoNuevo.ingreso.fechaInscripcion}" readonly="true">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </p:inputText>
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel value="Propiedad Horizontal:"/>
                                        </p:column>
                                        <p:column>
                                            <p:selectOneMenu value="#{fichaIngresoNuevo.ingreso.propiedadHorz}">
                                                <f:selectItem itemLabel="NO" itemValue="#{false}"/>
                                                <f:selectItem itemLabel="SI" itemValue="#{true}"/>
                                            </p:selectOneMenu>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="Parroquia:"/>
                                        </p:column>
                                        <p:column colspan="5">
                                            <p:selectOneMenu value="#{fichaIngresoNuevo.ingreso.ficha.parroquia}" converter="entityConverter">
                                                <f:selectItem itemLabel="Seleccione..." itemValue="#{null}" />
                                                <f:selectItems value="#{fichaIngresoNuevo.listParroqia}" var="pa" itemLabel="#{pa.descripcion}" itemValue="#{pa}" />
                                                <p:ajax listener="#{fichaIngresoNuevo.actualizarCiudadelas()}" update="formFichIng:tvUnaFicha:somCd"/>
                                            </p:selectOneMenu>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="Ciudadela:"/>
                                        </p:column>
                                        <p:column colspan="5">
                                            <p:selectOneMenu id="somCd" value="#{fichaIngresoNuevo.ingreso.ficha.ciudadela}" converter="entityConverter">
                                                <f:selectItem itemLabel="Seleccione..." itemValue="#{null}" />
                                                <f:selectItems value="#{fichaIngresoNuevo.listCiudadelas}" var="cd" itemLabel="#{cd.nombre}" itemValue="#{cd}" />
                                            </p:selectOneMenu>
                                        </p:column>
                                    </p:row>
                                    <p:row rendered="#{fichaIngresoNuevo.ingreso.urbano}">
                                        <p:column>
                                            <p:outputLabel value="Numero Predio:"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText value="#{fichaIngresoNuevo.ingreso.numPredio}" readonly="true"/>
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel value="Codigo Predial:"/>
                                        </p:column>
                                        <p:column colspan="2">
                                            <p:inputText value="#{fichaIngresoNuevo.ingreso.codPredio}" style="width: 250px;"/>
                                        </p:column>
                                        <p:column>
                                            <p:commandButton icon="ui-icon-search" actionListener="#{fichaIngresoNuevo.showDlgPredios()}" styleClass="btnStyle"
                                                             value="Buscar Predio"/>
                                        </p:column>
                                    </p:row>
                                    <p:row rendered="#{!fichaIngresoNuevo.ingreso.urbano}">
                                        <p:column>
                                            <p:outputLabel value="Registro Catastral:"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText value="#{fichaIngresoNuevo.ingreso.regCatrast}"/>
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel value="Identificacion Predial:"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText value="#{fichaIngresoNuevo.ingreso.identfPredio}"/>
                                        </p:column>
                                        <p:column>
                                            <p:commandButton icon="ui-icon-search" actionListener="#{fichaIngresoNuevo.buscarCodPredio()}" 
                                                             styleClass="btnStyle" value="Buscar"/>
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                                <br/>
                                <p:panelGrid id="pngRowUrbano" columns="4" rendered="#{fichaIngresoNuevo.ingreso.mostrarUrbano}" 
                                             styleClass="noBorder" style="width: 75%;margin: 0 auto">
                                    <f:facet name="header" >Datos de Escritura Actual - Urbano</f:facet>
                                    Norte: <p:inputText value="#{fichaIngresoNuevo.ingreso.escritura.lindEscrNorte}"/>
                                    Con: <pe:inputNumber value="#{fichaIngresoNuevo.ingreso.escritura.lindEscrNorteCon}" decimalPlaces="2"/>

                                    Sur: <p:inputText value="#{fichaIngresoNuevo.ingreso.escritura.lindEscrSur}"/>
                                    Con: <pe:inputNumber value="#{fichaIngresoNuevo.ingreso.escritura.lindEscrSurCon}" decimalPlaces="2"/>

                                    Este: <p:inputText value="#{fichaIngresoNuevo.ingreso.escritura.lindEscrEste}"/>
                                    Con: <pe:inputNumber value="#{fichaIngresoNuevo.ingreso.escritura.lindEscrEsteCon}" decimalPlaces="2"/>

                                    Oeste: <p:inputText value="#{fichaIngresoNuevo.ingreso.escritura.lindEscrOeste}"/>
                                    Con: <pe:inputNumber value="#{fichaIngresoNuevo.ingreso.escritura.lindEscrOesteCon}" decimalPlaces="2"/>

                                    Area mts2: <pe:inputNumber value="#{fichaIngresoNuevo.ingreso.escritura.areaSolar}" decimalPlaces="2"/>
                                    Alicuota: <pe:inputNumber value="#{fichaIngresoNuevo.ingreso.escritura.alicuota}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid id="pngRowRural" columns="4" rendered="#{fichaIngresoNuevo.ingreso.mostrarRural}" 
                                             styleClass="noBorder" style="width: 75%;margin: 0 auto">
                                    <f:facet name="header" >Datos de Escritura - Rural</f:facet>
                                    Norte: <p:inputText value="#{fichaIngresoNuevo.ingreso.escrituraRural.lindEscrNorte}"/>
                                    Con: <pe:inputNumber value="#{fichaIngresoNuevo.ingreso.escrituraRural.lindEscrNorteCon}" decimalPlaces="2"/>

                                    Sur: <p:inputText value="#{fichaIngresoNuevo.ingreso.escrituraRural.lindEscrSur}"/>
                                    Con: <pe:inputNumber value="#{fichaIngresoNuevo.ingreso.escrituraRural.lindEscrSurCon}" decimalPlaces="2"/>

                                    Este: <p:inputText value="#{fichaIngresoNuevo.ingreso.escrituraRural.lindEscrEste}"/>
                                    Con: <pe:inputNumber value="#{fichaIngresoNuevo.ingreso.escrituraRural.lindEscrEsteCon}" decimalPlaces="2"/>

                                    Oeste: <p:inputText value="#{fichaIngresoNuevo.ingreso.escrituraRural.lindEscrOeste}"/>
                                    Con: <pe:inputNumber value="#{fichaIngresoNuevo.ingreso.escrituraRural.lindEscrOesteCon}" decimalPlaces="2"/>

                                    Area mts2: <pe:inputNumber value="#{fichaIngresoNuevo.ingreso.escrituraRural.areaSolar}" decimalPlaces="2"/>
                                    Alicuota: <pe:inputNumber value="#{fichaIngresoNuevo.ingreso.escrituraRural.alicuota}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:tab>
                            <p:tab title="Linderos Registrales">
                                <p:inputTextarea style="width: 100%" value="#{fichaIngresoNuevo.ingreso.linderos}" cols="100" rows="14" 
                                                 autoResize="false" scrollHeight="200"/>
                            </p:tab>
                            <p:tab title="Movimientos Registrales">
                                <p:panelGrid styleClass="noBorder" style="width: 100%;" columns="2">
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="Heredar Movimientos de Ficha Matriz:"/>
                                        </p:column>
                                        <p:column>
                                            <pe:inputNumber value="#{fichaIngresoNuevo.ingreso.fichaHistorico}" decimalPlaces="0"/>
                                        </p:column>
                                        <p:column>
                                            <p:commandButton value="Buscar" icon="ui-icon-search" styleClass="btnStyle" update="formFichIng:tvUnaFicha:dtMovReg"
                                                             actionListener="#{fichaIngresoNuevo.BuscarFichaMatriz()}"/>
                                        </p:column>
                                        <p:column>
                                            <p:commandButton value="Agregar Movs." actionListener="#{fichaIngresoNuevo.showDlgMovimientos()}" icon="ui-icon-plus" 
                                                             styleClass="btnStyle" style="float: right;"/>
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                                <p:dataTable id="dtMovReg" value="#{fichaIngresoNuevo.movimientos}" emptyMessage="No hay movimientos ingresados..." var="m" rowIndexVar="indMovs"
                                             scrollHeight="300" scrollable="true" reflow="true" style="text-align: center;width: 100%" >
                                    <p:column headerText="No" width="60">
                                        #{indMovs + 1}
                                    </p:column>
                                    <p:column headerText="Libro">
                                        <p:outputLabel value="#{m.libro.nombre}"/>
                                    </p:column>
                                    <p:column headerText="Inscripcion" width="120">
                                        <p:outputLabel value="#{m.numInscripcion}"/>
                                    </p:column>
                                    <p:column headerText="Fec.Inscripcion" width="120">
                                        <p:outputLabel value="#{m.fechaInscripcion}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="Repertorio" width="100">
                                        <p:outputLabel value="#{m.numRepertorio}"/>
                                    </p:column>
                                    <p:column headerText="Ver" width="50">
                                        <p:commandLink actionListener="#{fichaIngresoNuevo.verDetalleMovimiento(m)}">
                                            <p:graphicImage value="/css/homeIconsImages/abrir.png" height="16"/>   
                                        </p:commandLink>
                                    </p:column>
                                    <p:column headerText="Editar" width="50">
                                        <p:commandLink actionListener="#{fichaIngresoNuevo.editarMovimiento(m)}">
                                            <p:graphicImage value="/css/homeIconsImages/edit.png" height="16"/>   
                                        </p:commandLink>
                                    </p:column>
                                    <p:column headerText="Elim." width="50">
                                        <p:commandLink actionListener="#{fichaIngresoNuevo.eliminarMovimiento(indMovs)}" update="dtMovReg">
                                            <p:graphicImage value="/css/homeIconsImages/delete.png" height="16"/>   
                                        </p:commandLink>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="Observaciones">
                                <center>
                                    <p:inputTextarea value="#{fichaIngresoNuevo.ingreso.ficha.observacion}" cols="100" rows="7" autoResize="false"  scrollHeight="150"/>
                                    <br/><br/> 
                                    <p:commandButton value="Guardar" actionListener="#{fichaIngresoNuevo.grabarFichaNuevo()}" styleClass="btnStyle" 
                                                     disabled="#{!fichaIngresoNuevo.ingreso.habilitado}" icon="ui-icon-disk"/>
                                    <p:spacer width="30" height="1"/>
                                    <p:commandButton value="Nueva Ficha" actionListener="#{fichaIngresoNuevo.redirectNuevaFicha()}" styleClass="btnStyle" 
                                                     disabled="#{fichaIngresoNuevo.ingreso.habilitado}" icon="ui-icon-document"/>
                                </center>
                            </p:tab>
                        </p:tabView>
                    </p:panel>
                </h:form>

                <p:dialog header="Seleccionar Predio" widgetVar="selPredio" modal="true" resizable="false" width="1000" height="550">
                    <h:form id="formPredSel">
                        <p:panelGrid styleClass="noBorder" columns="2" style="margin: 0 auto">
                            <p:outputLabel value="Buscar por:"/>
                            <p:selectOneMenu value="#{fichaIngresoNuevo.ingreso.codUrban}">
                                <f:selectItem itemLabel="Codigo Urbanistico" itemValue="#{true}"/>
                                <f:selectItem itemLabel="Codigo Predial" itemValue="#{false}"/>
                                <p:ajax update="dtSelPred" event="change"/>
                            </p:selectOneMenu>
                        </p:panelGrid>
                        <p:dataTable id="dtSelPred" paginator="true" lazy="true" style="text-align: center;" emptyMessage="No se encontro Movimientos"
                                     paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                                     rows="10" value="#{fichaIngresoNuevo.predioLazy}" var="pl">
                            <p:column headerText="No Predio" filterBy="#{pl.numPredio}" sortBy="#{pl.numPredio}" 
                                      filterStyle="width: 90%" width="100">
                                <p:outputLabel value="#{pl.numPredio}"/>
                            </p:column>
                            <p:column headerText="Sector" rendered="#{!fichaIngresoNuevo.ingreso.codUrban}" 
                                      filterBy="#{pl.sector}" sortBy="#{pl.sector}" filterStyle="width: 90%" style="width: 80px;">
                                <p:outputLabel value="#{pl.sector}"/>
                            </p:column>
                            <p:column headerText="Mz." rendered="#{!fichaIngresoNuevo.ingreso.codUrban}" 
                                      filterBy="#{pl.mz}" sortBy="#{pl.mz}" filterStyle="width: 90%" style="width: 60px;">
                                <p:outputLabel value="#{pl.mz}"/>
                            </p:column>
                            <p:column headerText="Cdla." rendered="#{!fichaIngresoNuevo.ingreso.codUrban}" 
                                      filterBy="#{pl.cdla}" sortBy="#{pl.cdla}" filterStyle="width: 90%" style="width: 70px;">
                                <p:outputLabel value="#{pl.cdla}"/>
                            </p:column>
                            <p:column headerText="Mz.Div." rendered="#{!fichaIngresoNuevo.ingreso.codUrban}" 
                                      filterBy="#{pl.mzdiv}" sortBy="#{pl.mzdiv}" filterStyle="width: 90%" style="width: 90px;">
                                <p:outputLabel value="#{pl.mzdiv}"/>
                            </p:column>
                            <p:column headerText="Solar" rendered="#{!fichaIngresoNuevo.ingreso.codUrban}" 
                                      filterBy="#{pl.solar}" sortBy="#{pl.solar}" filterStyle="width: 90%" style="width: 70px;">
                                <p:outputLabel value="#{pl.solar}"/>
                            </p:column>
                            <p:column headerText="Urbanizacion" filterBy="#{pl.ciudadela.nombre}" style="width: 260px;"
                                      filterOptions="#{fichaIngresoNuevo.lisUrbanizaciones}" filterMatchMode="exact" 
                                      rendered="#{fichaIngresoNuevo.ingreso.codUrban}" >
                                <p:outputLabel value="#{pl.ciudadela.nombre}"/>
                            </p:column>
                            <p:column headerText="Mz.Urb." rendered="#{fichaIngresoNuevo.ingreso.codUrban}" filterBy="#{pl.urbMz}" 
                                      sortBy="#{pl.urbMz}" filterStyle="width: 90%" style="width: 90px;">
                                <p:outputLabel value="#{pl.urbMz}"/>
                            </p:column>
                            <p:column headerText="Sl.Urb." rendered="#{fichaIngresoNuevo.ingreso.codUrban}" filterBy="#{pl.urbSolarnew}" 
                                      sortBy="#{pl.urbSolarnew}" filterStyle="width: 90%" style="width: 80px;">
                                <p:outputLabel value="#{pl.urbSolarnew}"/>
                            </p:column>
                            <p:column headerText="Propietario" filterBy="#{pl.nomCompPago}" filterStyle="width: 90%">
                                <p:outputLabel value="#{pl.nomCompPago}"/>
                            </p:column>
                            <p:column headerText="Direccion" rendered="#{!fichaIngresoNuevo.ingreso.codUrban}" width="100">
                                <p:outputLabel value="Mz. #{pl.urbMz} Sl. #{pl.urbSolarnew}"/>
                            </p:column>
                            <p:column headerText="Selec." width="50">
                                <p:commandLink actionListener="#{fichaIngresoNuevo.selectPredio(pl)}">
                                    <p:graphicImage value="/css/homeIconsImages/ir.png" height="16"/>   
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                    </h:form>
                </p:dialog>

                <p:dialog header="Seleccione Movimientos" widgetVar="selMov" modal="true" resizable="false" 
                          width="800" height="500">
                    <h:form id="formSelecMov">
                        <p:dataTable id="dtSelMOv" paginator="true" lazy="true" scrollable="true" rows="10"
                                     paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                                     value="#{fichaIngresoNuevo.movimientosLazy}" var="movF" emptyMessage="No se encontro Movimientos"
                                     style="text-align: center">
                            <p:column headerText="Libro" filterBy="#{movF.libro.nombre}" filterStyle="width: 75%">
                                <p:outputLabel value="#{movF.libro.nombre}"/>
                            </p:column>
                            <p:column headerText="Num.Repertorio" filterBy="#{movF.numRepertorio}" 
                                      sortBy="#{movF.numRepertorio}" width="140">
                                <p:outputLabel value="#{movF.numRepertorio}"/>
                            </p:column>
                            <p:column headerText="Num.Inscripcion" filterBy="#{movF.numInscripcion}" 
                                      sortBy="#{movF.numInscripcion}" width="140">
                                <p:outputLabel value="#{movF.numInscripcion}"/>
                            </p:column>
                            <p:column headerText="Fec.Inscripcion" sortBy="#{movF.fechaInscripcion}"
                                      width="120">
                                <p:outputLabel value="#{movF.fechaInscripcion}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </p:outputLabel>
                            </p:column>
                            <p:column headerText="Secuencia" filterBy="#{movF.indice}" 
                                      sortBy="#{movF.indice}" width="140">
                                <p:outputLabel value="#{movF.indice}"/>
                            </p:column>
                            <p:column headerText="Selec." width="50">
                                <p:commandLink actionListener="#{fichaIngresoNuevo.agregarMovsVariasFicha(movF)}">
                                    <p:graphicImage value="/css/homeIconsImages/ir.png" height="16"/>   
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                    </h:form>
                </p:dialog>

                <p:dialog header="Seleccione Cliente" widgetVar="selCle" modal="true" resizable="false" width="75%" height="80%">
                    <h:form>
                        <p:dataTable id="dtSelClient" paginator="true" lazy="true" scrollable="true" scrollHeight="350" 
                                     paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rows="15" rowsPerPageTemplate="15,50,100"
                                     value="#{fichaIngresoNuevo.enteIntervinienteLazy}" var="inte"
                                     emptyMessage="No se encontró Movimientos">
                            <f:facet name="header">  Personas Juridicas y Naturales</f:facet>
                            <p:column headerText="R.U.C.">
                                <h:outputText  value="#{inte.cedRuc}"/>
                            </p:column>
                            <p:column headerText="Nombre">
                                <h:outputText value="#{inte.nombre}"/>
                            </p:column>
                            <p:column headerText="Seleccionar">
                                <p:commandLink value="::Seleccionar" actionListener="#{fichaIngresoNuevo.comprobarFichaEnte(inte)}" style="color: #0033FF;font-weight: bolder;" process="@this" />
                            </p:column>
                        </p:dataTable>
                    </h:form>
                </p:dialog>

                <p:dialog header="Nueva Compañia" widgetVar="nueComp" modal="true" resizable="false" width="50%" height="80%">
                    <h:form>
                        Tipo: <p:spacer width="28"/>
                        <p:selectOneMenu value="#{fichaIngresoNuevo.ingreso.inter.tipoInterv}">
                            <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                            <f:selectItem itemLabel="Natural" itemValue="N"/>
                            <f:selectItem itemLabel="Jurídica" itemValue="J"/>
                        </p:selectOneMenu>
                        <br/>
                        R.U.C.: <p:spacer width="18"/>
                        <p:inputText value="#{fichaIngresoNuevo.ingreso.inter.cedRuc}"/>
                        <br/>
                        Nombre: <p:spacer width="10"/>
                        <p:inputText style="width: 400px;" value="#{fichaIngresoNuevo.ingreso.inter.nombre}"/>
                        <br/>
                        <br/>
                        <center>
                            <p:commandButton value="Guardar" actionListener="#{fichaIngresoNuevo.guardarCompania()}" icon="ui-icon-disk" style="color: #ffffff; background: #616161 !important; font-weight: bold; height: 30px;"/>
                        </center>
                    </h:form>
                </p:dialog>

                <p:dialog id="dlgMensaje" closeOnEscape="true" header="Informacion" widgetVar="dlgMensajes"
                          resizable="false" modal="true" position="center">
                    <h:form id="formMensaje">
                        <center>
                            <h:outputText value="Cantidad de Fichas creadas : #{fichaIngresoNuevo.ingreso.cantidadFichas}" style="font-size: medium; font-weight: bolder"/>
                            <br/>
                            <h:outputText value="#{fichaIngresoNuevo.ingreso.mensaje}" style="font-size: medium; font-weight: bold"/>
                            <br/>
                            <br/>
                            <p:commandButton value="Aceptar" icon="ui-icon-check" styleClass="btnStyle"
                                             actionListener="#{fichaIngresoNuevo.redirectNuevaFicha()}"/>
                        </center>
                    </h:form>
                </p:dialog>
                
                <p:dialog id="dlgNuevaFicha" closeOnEscape="false" header="Informacion" widgetVar="dlgNuevaFi" closable="false"
                          resizable="false" modal="true" position="center">
                    <h:form id="formNewFic">
                        <center>
                            <h:outputText value="Se creo una nueva ficha, con el numero : #{fichaIngresoNuevo.newFicha}" style="font-size: medium; font-weight: bolder"/>
                            <br/>
                            <br/>
                            <p:commandButton value="Aceptar" icon="ui-icon-check" styleClass="btnStyle"
                                             actionListener="#{fichaIngresoNuevo.redirectNuevaFicha()}"/>
                        </center>
                    </h:form>
                </p:dialog>

                <p:dialog id="dlgMovimientoRegistral" header="Movimiento Registral Seleccionado" widgetVar="dlgMovRegSelec" 
                          resizable="false" modal="true" closeOnEscape="true" width="800" height="550">
                    <h:form id="formMovRegSelec">
                        <p:fieldset legend="Datos de la Inscripcion">
                            <p:panelGrid styleClass="noBorder" style="width: 100%;font-size: 12px;font-weight: bolder;">
                                <p:row>
                                    <p:column>
                                        Num.Inscrip.:
                                        <p:outputLabel value="#{fichaIngresoNuevo.movSelec.numInscripcion}"/>
                                    </p:column>
                                    <p:column>
                                        Fecha Inscrip.:
                                        <p:outputLabel value="#{fichaIngresoNuevo.movSelec.fechaInscripcion}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column>
                                        Num.Rep.: 
                                        <p:outputLabel  value="#{fichaIngresoNuevo.movSelec.numRepertorio}"/>
                                    </p:column>
                                    <p:column>
                                        Fecha Rep.: 
                                        <p:outputLabel value="#{fichaIngresoNuevo.movSelec.fechaRepertorio}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </p:outputLabel>
                                    </p:column>
                                </p:row>                  
                                <p:row>
                                    <p:column colspan="2">
                                        Libro: 
                                        <p:outputLabel value="#{fichaIngresoNuevo.movSelec.libro.nombre}"/>
                                    </p:column>
                                    <p:column colspan="2">
                                        Acto: 
                                        <p:outputLabel value="#{fichaIngresoNuevo.movSelec.acto.nombre}"/>
                                    </p:column>
                                </p:row>                  
                                <p:row>
                                    <p:column>
                                        Tomo: 
                                        <p:outputLabel value="#{fichaIngresoNuevo.movSelec.numTomo}"/>
                                    </p:column>
                                    <p:column>
                                        Folio Inicio: 
                                        <p:outputLabel value="#{fichaIngresoNuevo.movSelec.folioInicio}"/>
                                    </p:column>
                                    <p:column>
                                        Folio Fin: 
                                        <p:outputLabel value="#{fichaIngresoNuevo.movSelec.folioFin}"/>
                                    </p:column>
                                    <p:column>
                                        Estado/Mov: 
                                        <p:outputLabel value="#{fichaIngresoNuevo.movSelec.estado}"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column>
                                        Canton: 
                                        <p:outputLabel value="#{fichaIngresoNuevo.movSelec.codigoCan.nombre}"/>
                                    </p:column>
                                    <p:column>
                                        Fech/Otorg.:
                                        <p:outputLabel value="#{fichaIngresoNuevo.movSelec.fechaOto}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column colspan="2">
                                        Not./Juz.: 
                                        <p:outputLabel value="#{fichaIngresoNuevo.movSelec.enteJudicial.nombre}"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column colspan="3">
                                        Escri/Juicio/Resolu: 
                                        <p:outputLabel value="#{fichaIngresoNuevo.movSelec.escritJuicProvResolucion}"/>
                                    </p:column>
                                    <!--<p:column style="text-align: right">
                                        <p:commandButton value="Bitacora" icon="ui-icon-document" styleClass="btnStyle"
                                                         actionListener="# {fichaIngresoEditar.imprimirBitacora()}"/>
                                    </p:column>-->
                                </p:row>
                            </p:panelGrid>
                        </p:fieldset>
                        <p:tabView>
                            <p:tab title="Intervinientes">
                                <p:dataTable emptyMessage="No hay datos para mostrar..." var="inter" scrollable="true" 
                                             value="#{fichaIngresoNuevo.modelo.listMovCli}" scrollHeight="240">
                                    <p:column headerText="C.I/R.U.C" style="text-align: center" width="15%">
                                        <p:outputLabel value="#{inter.enteInterv.cedRuc}"/>
                                        <!-- <p:outputLabel value="# {inter.ente.catEntePersona.ci}" rendered="# {inter.ente.isPersona}"/> -->
                                    </p:column>
                                    <p:column headerText="Nombre del Cliente" style="text-align: center">
                                        <p:outputLabel value="#{inter.enteInterv.nombre}"/>
                                        <!-- <p:outputLabel value="# {inter.ente.catEntePersona.nombres} # {inter.ente.catEntePersona.apellidos}" rendered="# {inter.ente.isPersona}"/> -->
                                    </p:column>
                                    <p:column headerText="Papel" style="text-align: center" width="20%">
                                        <p:outputLabel value="#{inter.papel.papel}"/>
                                    </p:column>
                                    <p:column headerText="Domicilio" style="text-align: center">
                                        <p:outputLabel value="#{inter.domicilio.nombre}"/>
                                    </p:column>
                                    <p:column headerText="Estado" style="text-align: center">
                                        <p:outputLabel value="#{inter.estado}"/>
                                    </p:column>
                                    <p:column headerText="Relacion" style="text-align: center">
                                        <p:outputLabel value="#{inter.nombres}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <!-- SE COMENTA Representantes-Socios-Capital 09-01-2016 -->
                            <!--<p:tab title="Representantes">
                                <p:dataTable emptyMessage="No hay datos para mostrar..." var="rep" scrollable="true" 
                                             value="# {fichaIngresoNuevo.modelo.lisMovRep}" scrollHeight="250">
                                    <p:column headerText="C.I/R.U.C" style="text-align: center" width="15%">
                                        <p:outputLabel value="# {rep.enteInterv.cedRuc}"/> -->
                                        <!-- <p:outputLabel value="# {rep.ente.catEntePersona.ci}" rendered="# {rep.ente.isPersona}"/> -->
                            <!--    </p:column>
                                    <p:column headerText="Nombre del Cliente" style="text-align: center">
                                        <p:outputLabel value="# {rep.enteInterv.nombre}"/> -->
                                        <!-- <p:outputLabel value="# {rep.ente.catEntePersona.nombres} # {rep.ente.catEntePersona.apellidos}" rendered="# {rep.ente.isPersona}"/> -->
                            <!--    </p:column>
                                    <p:column headerText="Cargo" style="text-align: center" width="20%">
                                        <p:outputLabel value="# {rep.enteInterv.nombre}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab> -->
                            <!--<p:tab title="Socios">
                                <p:dataTable emptyMessage="No hay datos para mostrar..." value="# {fichaIngresoNuevo.modelo.listMovSoc}" 
                                             var="soc" scrollable="true"  scrollHeight="250">
                                    <p:column headerText="C.I/R.U.C" style="text-align: center">
                                        <p:outputLabel value="# {soc.enteInterv.cedRuc}" />
                                    </p:column>
                                    <p:column headerText="Nombre del Cliente" style="text-align: center">
                                        <p:outputLabel value="# {soc.enteInterv.nombre}" />
                                    </p:column>
                                    <p:column headerText="Tipo Participacion" style="text-align: center">
                                        <p:outputLabel value="# {soc.tipoParticipacion.nombre}"/>
                                    </p:column>
                                    <p:column headerText="Cantidad" style="text-align: center">
                                        <p:outputLabel value="# {soc.cantidad}"/>
                                    </p:column>
                                    <p:column headerText="Valor" style="text-align: center">
                                        <p:outputLabel value="# {soc.valor}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>-->
                            <!--<p:tab title="Capital">
                                <p:dataTable emptyMessage="No hay datos para mostrar..." scrollHeight="250"
                                             value="# {fichaIngresoNuevo.modelo.listMovCap}" var="cap" scrollable="true"  >
                                    <p:column headerText="Capital" style="text-align: center">
                                        <p:outputLabel value="# {cap.capital.nombre}"/>
                                    </p:column>
                                    <p:column headerText="Valor" style="text-align: center">
                                        <p:outputLabel value="# {cap.valor}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>-->
                            <p:tab title="Bienes">
                                <p:dataTable value="#{fichaIngresoNuevo.modelo.fichas}" var="fich" style="width: 100%;text-align: center" scrollable="true" 
                                             scrollHeight="250" rowIndexVar="rowIndex" emptyMessage="No se encontraron elementos...">
                                    <p:column headerText="No" width="60">
                                        #{rowIndex+1}
                                    </p:column>
                                    <p:column headerText="Num. Ficha" width="100">
                                        <p:outputLabel value="#{fich.numFicha}"/>
                                    </p:column>
                                    <p:column headerText="Tipo Ficha">
                                        <p:outputLabel value="#{fich.tipo.nombre}"/>
                                    </p:column>
                                    <p:column headerText="Codigo Predial">
                                        <p:outputLabel value="#{fich.codigoPredial}"/>
                                    </p:column>
                                    <p:column headerText="Fec.Apertura" width="100">
                                        <p:outputLabel value="#{fich.fechaApe}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </p:outputLabel>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="Observacion">
                                <p:inputTextarea value="#{fichaIngresoNuevo.movSelec.observacion}" readonly="true"
                                                 autoResize="false" scrollHeight="200" style="width: 100%; height: 250px"/>
                            </p:tab>
                        </p:tabView>
                    </h:form>
                </p:dialog>

            </ui:define>
        </ui:composition>
    </body>
</html>
