<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/template/template.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:dialog="http://java.sun.com/jsf/composite/dialog">
    <ui:define name="top"><!--<p:outputLabel value="Titulos de Credito" style="font-weight: bolder; font-size: 14px;"/>--></ui:define>
    <ui:define name="content">
        <script src="../../resources/pfJs/keyPress.js" type="text/javascript"></script>
        <style type="text/css">
            .ui-datatable thead th, .ui-datatable tbody td, .ui-datatable tfoot td, .ui-datatable tfoot th{
                height : 10px;
                padding: 5px 10px;
            }            
        </style>
        <center>
            <h1>Generación de Titulos</h1>
        </center>
        <h:form id="mainForm">
            <br></br>

            <p:tabView id="tvRecaudaciones">
                <p:ajax event="tabChange" listener="#{recaudacionesLocalesComerciales.onChangeTab}"/>
                <p:tab title="Locales Comerciales">
                    <p:dataTable id="dtLocales" lazy="true" value="#{recaudacionesLocalesComerciales.localesComercialesLazy}"
                                 var="local" rows="10" paginator="true" paginatorPosition="top"
                                 rowsPerPageTemplate="10, 20, 50, 100" filterEvent="enter" widgetVar="dtLocales" >
                        <p:column headerText="Nombre del local" filterBy="#{local.nombreLocal}" width="27%;" filterStyle="width:95%;">
                            <center><h:outputText value="#{local.nombreLocal}"/></center>
                        </p:column>
                        <p:column headerText="Número del local" filterBy="#{local.numLocal}" width="8%;"  filterStyle="width:80%;">
                            <center><h:outputText value="#{local.numLocal}"/></center>
                        </p:column>
                        <p:column headerText="Área del local" filterBy="#{local.area}" width="10%;" filterStyle="width:80%;">
                            <center><h:outputText value="#{local.area}"/></center>
                        </p:column>
                        <p:column headerText="C.I / R.U.C" filterBy="#{local.propietario.ciRuc}" width="10%;" filterStyle="width:80%;">
                            <center><h:outputText value="#{local.propietario.ciRuc}"/></center>
                        </p:column>
                        <p:column headerText="Propietario del local" width="27%;"  filterStyle="width:85%;">
                            <center><h:outputText value="#{local.propietario.nombres} #{local.propietario.apellidos}" rendered="#{local.propietario.esPersona}"/>
                                <h:outputText value="#{local.propietario.razonSocial}" rendered="#{!local.propietario.esPersona}"/></center>
                        </p:column>
                        <p:column headerText="Estado" width="11%;" filterBy="#{local.estadoLocalComercial}"
                                  filterMatchMode="contains" filterStyle="width: 95%">
                            <f:facet name="filter"  >
                                <p:selectOneMenu id="cat" onchange="PF('dtLocales').filter()" 
                                                 style="width: 75%; font-size: 10px;" >
                                    <f:selectItem itemLabel="Estado Local" itemValue="#{null}" noSelectionOption="true"/>
                                    <f:selectItem itemLabel="Habilitado" itemValue="#{1}" />
                                    <f:selectItem itemLabel="Inhabilitado" itemValue="#{2}" />
                                    <f:selectItem itemLabel="Clausurado" itemValue="#{3}" />
                                </p:selectOneMenu>
                            </f:facet>
                            <center>
                                <h:outputText value="Habilitado" rendered="#{local.estadoLocalComercial eq 1}"   />
                                <h:outputText value="Inhabilitado" rendered="#{local.estadoLocalComercial eq 2}"   />
                                <h:outputText value="Clausurado" rendered="#{local.estadoLocalComercial eq 3}" />
                            </center>
                        </p:column>

                        <p:column headerText="Seleccionar" width="15%;" >
                            <center>
                                <p:commandLink title="Seleccionar" actionListener="#{recaudacionesLocalesComerciales.loadRubroLocalComercial(local)}" styleClass="btnStyle" update="mainForm:tvRecaudaciones:localDescripcion">
                                    <p:graphicImage value="/css/homeIconsImages/ir.png"  height="25" width="25"/>
                                </p:commandLink>
                            </center>
                        </p:column>

                    </p:dataTable>
                    <br></br>
                    <center>
                        <h:outputText id="localDescripcion" value="Local : #{recaudacionesLocalesComerciales.cobrosGenerales.localComercial.nombreLocal} "  style="font-weight: bold; font-size: 20px;"/>

                    </center>

                    <br></br>

                    <!--                </p:tab>
                                    <p:tab id="cobroGenerales"  title="Cobros Generales">-->
                    <p:tree value="#{recaudacionesLocalesComerciales.root2}" var="node" dynamic="true" selectionMode="single" selection="#{recaudacionesLocalesComerciales.selectedNode}" style="float: left; width: 35%; font-weight: bold; height: 730px; overflow: auto; font-size: 13px;" rendered="#{userSession.userId ne 110}">
                        <p:ajax event="select" listener="#{recaudacionesLocalesComerciales.onNodeSelect}" update="mainForm:tvRecaudaciones:dtRubros"/>
                        <p:treeNode><h:outputText value="#{node.id}-#{node.nombreTransaccion}" /></p:treeNode>
                    </p:tree>
                    <p:dataTable id="dtRubros" var="rubro" value="#{recaudacionesLocalesComerciales.cobrosGenerales.tipoLiquidacion.renRubrosLiquidacionCollection}" selectionMode="single" rendered="#{userSession.userId ne 110}"
                                 selection="#{recaudacionesLocalesComerciales.rubroSelect}" rowKey="#{rubro.id}" style="text-align: center;float: right; width: 64%;" emptyMessage="Item no posee rubros." scrollable="true" scrollHeight="140">
                        <f:facet name="header">RUBROS POR TITULOS</f:facet>
                        <p:ajax event="rowSelect" listener="#{recaudacionesLocalesComerciales.onRowSelectLocalComercial()}"/>
                        <p:column headerText="Id" width="10%"> #{rubro.id} </p:column>
                        <p:column headerText="Descripcion" style="text-align: left; font-weight: bold;">#{rubro.descripcion} </p:column>

                        <p:column headerText="Valor" width="15%"> #{rubro.valor} </p:column>
                    </p:dataTable>
                    <p:panel id="panelDetalle" header="DETALLE DE TRANSACCION" style="float: right; width: 64%; height: 250px;" rendered="#{userSession.userId ne 110}">
                        <p:dataTable id="dtDetalle" var="det" value="#{recaudacionesLocalesComerciales.rubrosSeleccionado}" scrollable="true" scrollHeight="140" style="text-align: center;" rowIndexVar="index" emptyMessage="Sin elementos seleccionados...">
                            <p:column headerText="Descripcion" style="text-align: left;"> #{det.descripcion} </p:column>
                            <p:column headerText="Cantidad" width="75"><p:outputLabel value="#{det.cantidad}" /></p:column>
                            <p:column headerText="Valor" width="100"><h:outputText value="#{det.valor}"><f:convertNumber pattern="#0.00" locale="pt_BR"/></h:outputText></p:column>
                            <p:column headerText="Del." width="35">
                                <p:commandLink update="dtDetalle" actionListener="#{recaudacionesLocalesComerciales.deleteRubrosDetalle(index)}">
                                    <p:graphicImage value="/css/homeIconsImages/delete.png" height="16"/>   
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                        <h:panelGrid columns="2" styleClass="noBorder" style="margin: 0 auto;">
                            <p:outputLabel value="Valor Total: $" style="font-weight: bold; font-size: 14px;"/>
                            <p:inputText value="#{recaudacionesLocalesComerciales.cobrosGenerales.totalPago}" readonly="true" style="font-weight: bold; font-size: 14px;"/>
                        </h:panelGrid>
                    </p:panel>
                    <p:panel id="panelInfoAdc" header="INFORMACION ADICIONAL" style="float: right; width: 64%; height: 280px;" >

                        <p:panelGrid style="width: 100%;" columnClasses="ui-grid-col-2,ui-grid-col-10" layout="grid" styleClass="ui-panelgrid-blank" columns="2">
                            <h:panelGroup layout="block" class="Responsive100 Responsive" >
                                <p:outputLabel  value="CI/RUC:" class="DispBlock Wid100" style="font-weight: bolder !important; margin-bottom: 0px;" />
                            </h:panelGroup>
                            <h:panelGroup layout="block" class="Responsive100 Responsive">
                                <p:inputText value="#{recaudacionesLocalesComerciales.ciRucCobros}" size="20"/>
                                <p:inputText value="#{recaudacionesLocalesComerciales.cobrosGenerales.comprador.ciRuc}" rendered="false" readonly="true"/>
                                <p:spacer width="10" />
                                <p:commandLink title="Buscar" actionListener="#{recaudacionesLocalesComerciales.showDlgEntes(1)}" update="panelInfoAdc" styleClass="btnStyle">
                                    <p:graphicImage value="/css/homeIconsImages/buscar.png"  height="20" width="20"/>
                                </p:commandLink>
                                <p:commandLink title="Limpiar" actionListener="#{recaudacionesLocalesComerciales.limpiarDatosContribuyente()}" update="panelInfoAdc" styleClass="btnStyle">
                                    <p:graphicImage value="/css/homeIconsImages/refres.png"  height="20" width="20"/>
                                </p:commandLink>
                            </h:panelGroup>
                            <h:panelGroup layout="block" class="Responsive100 Responsive">
                                <p:outputLabel  value="Nombres/Razon Social: " class="DispBlock Wid100" style="font-weight: bolder !important; margin-bottom: 0px;" />
                            </h:panelGroup>
                            <h:panelGroup layout="block" class="Responsive100 Responsive">
                                <p:inputText value="#{recaudacionesLocalesComerciales.cobrosGenerales.comprador.nombreCompleto}" rendered="#{recaudacionesLocalesComerciales.cobrosGenerales.comprador != null}" style="width: 95%; font-size: 14px; font-weight: bold;" readonly="true"/>
                                <p:inputText value="#{recaudacionesLocalesComerciales.cobrosGenerales.nombreComprador}" rendered="#{recaudacionesLocalesComerciales.cobrosGenerales.comprador == null}" style="width: 95%; font-size: 14px; font-weight: bold; " readonly="true"/>
                            </h:panelGroup>
                            <h:panelGroup layout="block" class="Responsive100 Responsive">
                                <p:outputLabel  value="Observacion:" class="DispBlock Wid100" style="font-weight: bolder !important; margin-bottom: 0px;" />
                            </h:panelGroup>
                            <h:panelGroup layout="block" class="Responsive100 Responsive">
                                <p:inputTextarea value="#{recaudacionesLocalesComerciales.cobrosGenerales.observacion}" rows="3" style="width: 95%; font-size: 14px; font-weight: bold;"/>
                            </h:panelGroup>

                        </p:panelGrid>
                        <p:row>
                            <p:column colspan="4" style="text-align: center;">
                                <p:commandButton value="Ingresar" styleClass="btnStyle" icon="ui-icon-circle-arrow-e" style="font-size: 13px;" actionListener="#{recaudacionesLocalesComerciales.seleccionarLiquidacionLocalComercial()}"/>
                            </p:column>
                        </p:row>
                    </p:panel>
                    <div style="clear: both"/>
                </p:tab>
                <p:tab id="tituloCredito" title="Titulos de Credito">
                    <p:dataTable id="dtLiquidaciones" reflow="true" paginator="true" lazy="true" rows="10" rowsPerPageTemplate="10,50,100" paginatorPosition="top"
                                 paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 value="#{recaudacionesLocalesComerciales.titulosCredito}" var="titulo" emptyMessage="No se encontraron elementos..." style="text-align: center;"
                                 selectionMode="single" rowKey="#{titulo.id}" selection="#{recaudacionesLocalesComerciales.liquidacion}" filterEvent="enter">
                        <p:ajax event="rowSelect" update="mainForm:tvRecaudaciones:opLiquidaciones"/>
                        <p:column id="tipoLiquidacion" headerText="Prefijo" width="80" filterBy="#{titulo.tipoLiquidacion.prefijo}" filterStyle="width: 95%;">
                            <p:outputLabel value="#{titulo.tipoLiquidacion.prefijo}" style="font-weight: bold;"/>
                        </p:column>
                        <p:column headerText="No. Liq." width="90" filterBy="#{titulo.numLiquidacion}" sortBy="#{titulo.numLiquidacion}" filterStyle="width: 95%;">
                            <p:outputLabel value="#{titulo.numLiquidacion}" style="font-weight: bold;"/>
                        </p:column>
                        <p:column headerText="Emisión" width="80" filterBy="#{titulo.anio}" sortBy="#{titulo.anio}" filterStyle="width: 95%;">
                            <p:outputLabel value="#{titulo.mes} - #{titulo.anio}" style="font-weight: bold;"/>
                        </p:column>

                        <p:column id="identificacion" headerText="Identificacion" width="130" filterBy="#{titulo.comprador.ciRuc}" filterStyle="width: 95%;">
                            <p:outputLabel style="font-weight: bold; font-size: 13px;" value="#{titulo.comprador.ciRuc}"/>
                        </p:column>
                        <p:column headerText="Solicitante">
                            #{titulo.comprador ne null?titulo.comprador.nombreCompleto: (titulo.observacion.contains('|')?titulo.observacion.substring(0,titulo.observacion.indexOf('|')):titulo.nombreComprador)}
                        </p:column>
                        <p:column headerText="Valor" width="75"><p:outputLabel value="#{titulo.totalPago}" style="font-weight: bold;"/></p:column>
                        <p:column headerText="Saldo" width="75"><p:outputLabel value="#{titulo.saldo}" style="font-weight: bold;"/></p:column>
                        <p:column headerText="Estado" width="75"><p:outputLabel value="#{titulo.estadoLiquidacion.descripcion}" style="font-weight: bold;"/></p:column>

                        <p:column headerText="Título" width="140">
                            <p:commandButton value="Imprimir" 
                                             styleClass="btnStyle" 
                                             actionListener="#{recaudacionesLocalesComerciales.imprimirTitulo(titulo)}"
                                             />
                        </p:column>
                    </p:dataTable>
                    <p:contextMenu id="opLiquidaciones" for="dtLiquidaciones">
                        <p:menuitem value="Detalle" icon="ui-icon-comment" oncomplete="PF('dlgDetalle').show();" update="formDetEmision" rendered="#{recaudacionesLocalesComerciales.liquidacion ne null}" process="@this" actionListener="#{recaudacionesLocalesComerciales.calculosAdicionales()}"/>
                        <p:menuitem value="Procesar" icon="ui-icon-gear" oncomplete="PF('dlgProcesar').show();" update="formProcesar" rendered="#{recaudacionesLocalesComerciales.liquidacion.estadoLiquidacion.id eq 2 and userSession.userId ne 110}" process="@this" actionListener="#{recaudacionesLocalesComerciales.procesarPago()}"/>
                        <p:menuitem value="Comprobante" icon="ui-icon-document" oncomplete="PF('dlgComprobante').show();" update="frmComprobante" rendered="#{userSession.userId==140 and (recaudacionesLocalesComerciales.liquidacion.estadoLiquidacion.id eq 1 or (recaudacionesLocalesComerciales.liquidacion.estadoLiquidacion.id eq 2 and recaudacionesLocalesComerciales.liquidacion.renPagoCollection ne null and recaudacionesLocalesComerciales.liquidacion.renPagoCollection.size()>0))}" process="@this"/>
                        <p:menuitem value="Edit. Contribuyente" icon="ui-icon-person" oncomplete="PF('dlgEditContribuyente').show();" update="frmEditContribuyente" rendered="#{recaudacionesLocalesComerciales.liquidacion ne null and recaudacionesLocalesComerciales.liquidacion.comprador eq null}" process="@this"/>
                        <p:menuitem value="Anular" icon="ui-icon-close" oncomplete="PF('dlgAnulacion').show();" update="frmAnulacion" rendered="#{recaudacionesLocalesComerciales.liquidacion ne null and userSession.userId eq 144}" process="@this"/>
                    </p:contextMenu>
                </p:tab>
            </p:tabView>
            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
            </p:confirmDialog>
        </h:form>

        <p:dialog widgetVar="dlgReportesRecaudador" header="Reportes Recaudador" resizable="false" modal="true" position="center" height="350">
            <h:form id="reporteRecaudaciones">
                <h:outputText value="Fecha cierre: " style="font-weight: bolder;font-size: 14px"/>
                <p:calendar value="#{recaudacionesLocalesComerciales.fechaCierre}" navigator="true" pattern="dd/MM/yyyy HH:mm:ss" />
                <p:panelGrid styleClass="noBorder" columns="1" style="width: 100%;text-align: center">
                    <h:outputText value="#{recaudacionesLocalesComerciales.tipoReporte eq 1?'Cierre de Caja':recaudacionesLocalesComerciales.tipoReporte eq 2?'Recaudaciones Por Transaccion': recaudacionesLocalesComerciales.tipoReporte eq 3?'Resumen Cheques':''}" style="font-weight: bolder;font-size: 14px"/>
                    <h:outputText value="Fecha Reporte: " style="font-weight: bolder;font-size: 14px"/>
                    <p:calendar value="#{recaudacionesLocalesComerciales.fechaReporte}" mode="inline" />
                    <p:commandButton value="Generar Reporte" icon="ui-icon-print" styleClass="btnStyle" actionListener="#{recaudacionesLocalesComerciales.generarReporteCajero()}" style="float: end"/>
                </p:panelGrid>
            </h:form>
        </p:dialog>


        <p:dialog header="Detalle Pago" widgetVar="dlgDetallePago" resizable="false" closeOnEscape="true" modal="true" width="80%" position="center">
            <h:form id="formDetPago">
                <p:outputLabel value="Total a pagar: #{recaudacionesLocalesComerciales.liquidacion.totalPago}" style="font-size: 14px; font-weight: bold"/>
                <br/>
                <dialog:detallePago liquidacion="#{recaudacionesLocalesComerciales.liquidacion}"/>
                <center><p:commandButton value="Aceptar" oncomplete="PF('dlgDetallePago').hide();" styleClass="btnStyle"/></center>
            </h:form>
        </p:dialog>

        <p:dialog header="Detalle Emision" widgetVar="dlgDetalle" resizable="false" closeOnEscape="true" modal="true" width="80%" position="center">
            <h:form id="formDetEmision">
                <dialog:detalleLiquidacion liquidacion="#{recaudacionesLocalesComerciales.liquidacion}"/>
                <center><p:commandButton value="Aceptar" oncomplete="PF('dlgDetalle').hide();" styleClass="btnStyle"/></center>
            </h:form>
        </p:dialog>

        <p:dialog header="Procesar Pago" widgetVar="dlgProcesar" resizable="false" closeOnEscape="true" modal="true" width="95%" position="center">
            <h:form id="formProcesar">
                <p:fieldset legend="PAGO: #{recaudacionesLocalesComerciales.liquidacion.tipoLiquidacion.prefijo} - #{recaudacionesLocalesComerciales.liquidacion.tipoLiquidacion.nombreTitulo}" style="font-weight: bold; font-size: 13px;">
                    <p:panelGrid id="datoEmision" styleClass="noBorder" style="width: 100%;">
                        <p:row>
                            <p:column>
                                <p:outputLabel value="N. de Emisión"/><br/>
                                <p:inputText value="#{recaudacionesLocalesComerciales.liquidacion.numLiquidacion}" readonly="true"/>
                            </p:column>
                            <p:column>
                                <p:outputLabel value="Valor a Cobrar"/><br/>
                                <p:outputLabel value="#{recaudacionesLocalesComerciales.liquidacion.pagoFinal}" styleClass="lbStyle"/>
                            </p:column>
                            <p:column>
                                <p:outputLabel value="Saldo" style="font-weight: bolder;"/><br/>
                                <p:inputText value="#{recaudacionesLocalesComerciales.modelPago.valorSaldoPagoFinal}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px; color: blue;"/>
                            </p:column>
                            <p:column rendered="#{recaudacionesLocalesComerciales.liquidacion.interes gt 0 or recaudacionesLocalesComerciales.liquidacion.recargo gt 0}">
                                <p:outputLabel value="Valor"/><br/>
                                <p:outputLabel value="#{recaudacionesLocalesComerciales.liquidacion.saldo}" style="font-size: 20px; font-weight: bold;"/>
                            </p:column>
                            <p:column rendered="#{recaudacionesLocalesComerciales.liquidacion.interes gt 0}">
                                <p:outputLabel value="Interes"/><br/>
                                <p:outputLabel value="#{recaudacionesLocalesComerciales.liquidacion.interes}" style="font-size: 20px; font-weight: bold;"/>
                            </p:column>
                            <p:column rendered="#{recaudacionesLocalesComerciales.liquidacion.recargo gt 0}">
                                <p:outputLabel value="Multa"/><br/>
                                <p:outputLabel value="#{recaudacionesLocalesComerciales.liquidacion.recargo}" style="font-size: 20px; font-weight: bold;"/>
                            </p:column>
                            <!--<p:column>
                                <p:outputLabel value="Observaciones"/><br/>
                                <p:inputTextarea value="# {recaudacionesLocalesComerciales.liquidacion.observacion}" rows="3" cols="50" autoResize="false"/>
                            </p:column>-->
                            <p:column rendered="#{recaudacionesLocalesComerciales.liquidacion.tipoLiquidacion.id eq 13}">
                                <p:outputLabel value="Descuento"/><br/>
                                <p:outputLabel value="#{recaudacionesLocalesComerciales.liquidacion.descuento}" styleClass="lbStyle"/>
                            </p:column>
                            <p:column rendered="#{recaudacionesLocalesComerciales.liquidacion.tipoLiquidacion.id eq 13}">
                                <p:outputLabel value="Recargo"/><br/>
                                <p:outputLabel value="#{recaudacionesLocalesComerciales.liquidacion.recargo}" styleClass="lbStyle"/>
                            </p:column>
                            <p:column>
                                <p:dataTable style="width: 420px; float: right;" value="#{recaudacionesLocalesComerciales.liquidacion.renDetLiquidacionCollection}" var="rubro">
                                    <p:column headerText="Rubro">
                                        <p:outputLabel value="#{recaudacionesLocalesComerciales.getDescripcionRubro(rubro.rubro)}"/>
                                    </p:column>
                                    <p:column headerText="Valor" style="text-align: center;" width="35%">
                                        <p:outputLabel value="#{rubro.valor}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                </p:fieldset>

                <p:panelGrid styleClass="noBorder">
                    <p:row>
                        <p:column>
                            <p:outputLabel value="Datos del Solicitante:" style="font-weight: bolder; font-size: 15px; color: blue;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Identificacion: " style="font-weight: bold;"/>
                            <p:outputLabel value="#{recaudacionesLocalesComerciales.liquidacion.comprador.ciRuc}" style="font-weight: bold; font-size: 14px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Solicitante: " style="font-weight: bold;"/>
                            <p:outputLabel value="#{recaudacionesLocalesComerciales.liquidacion.comprador.apellidos} #{recaudacionesLocalesComerciales.liquidacion.comprador.nombres} #{recaudacionesLocalesComerciales.liquidacion.comprador.razonSocial} #{recaudacionesLocalesComerciales.liquidacion.comprador.nombreComercial} #{recaudacionesLocalesComerciales.liquidacion.nombreComprador} " style="font-weight: bold; font-size: 14px;"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <p:fieldset legend="Detalle de Cobro" rendered="#{userSession.userId ne 110}">
                    <p:panelGrid id="detCobro" style="width: 100%;" styleClass="noBorder">
                        <p:row>
                            <p:column style="width: 100px;"><p:outputLabel value="Contado" style="font-weight: bolder;"/></p:column>
                            <p:column style="width: 100px;"><p:inputText value="#{recaudacionesLocalesComerciales.modelPago.valorTotalEfectivo}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                            <p:column rowspan="6">
                                <p:selectBooleanCheckbox value="#{recaudacionesLocalesComerciales.variosPagos}" itemLabel="** REALIZAR VARIOS PAGOS **" style="font-weight: bold; font-size: 14px;"/>
                                <p:tabView>
                                    <p:tab title="1. EFECTIVO">
                                        <!--<p:fieldset legend="1. EFECTIVO">-->
                                        <p:panelGrid columns="2">
                                            <p:outputLabel value="Valor Recibido"/>
                                            <p:inputText value="#{recaudacionesLocalesComerciales.modelPago.valorRecibido}" style="font-weight: bolder; font-size: 12px;">
                                            </p:inputText>
                                            <p:outputLabel value="Valor a Cobrar"/>
                                            <p:inputText value="#{recaudacionesLocalesComerciales.modelPago.valorCobrar}" style="font-weight: bolder; font-size: 12px;">
                                                <p:ajax event="blur" listener="#{recaudacionesLocalesComerciales.modelPago.calcularEfectivo()}" update="formProcesar:detCobro,formProcesar:datoEmision" process="@all"/>
                                            </p:inputText>
                                            <p:outputLabel value="Cambio"/><p:inputText value="#{recaudacionesLocalesComerciales.modelPago.valorCambio}" readonly="true" style="font-weight: bolder; font-size: 12px;"/>
                                        </p:panelGrid>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                    <p:tab title="2. NOTA DE CREDITO">
                                        <!--<p:fieldset legend="2. NOTA DE CREDITO">-->
                                        <p:panelGrid>
                                            <p:row>
                                                <p:column>
                                                    <p:outputLabel value="# Credito"/><br/>
                                                    <p:inputText value="#{recaudacionesLocalesComerciales.modelPago.pagoNotaCredio.numCredito}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Fecha"/><br/>
                                                    <p:calendar value="#{recaudacionesLocalesComerciales.modelPago.pagoNotaCredio.fecha}" pattern="dd/MM/yyyy"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Valor"/><br/>
                                                    <p:inputText type="number" value="#{recaudacionesLocalesComerciales.modelPago.pagoNotaCredio.valor}"/>
                                                </p:column>
                                                <p:column><p:commandButton value="Agregar" actionListener="#{recaudacionesLocalesComerciales.modelPago.agregarPago(3)}" update="formProcesar:detCobro,formProcesar:datoEmision"/></p:column>
                                            </p:row>
                                        </p:panelGrid>
                                        <p:dataTable id="dtNC" var="nc" value="#{recaudacionesLocalesComerciales.modelPago.listPagoNotaCredio}" style="margin-bottom:0; width: 700px;">
                                            <p:column headerText="# Credito"><h:outputText value="#{nc.numCredito}" /></p:column>
                                            <p:column headerText="Fecha"><h:outputText value="#{nc.fecha}" ><f:convertDateTime pattern="dd/MM/YYYY"/></h:outputText></p:column>
                                            <p:column headerText="Valor"><h:outputText value="#{nc.valor}" /></p:column>
                                            <p:column headerText="Accion">
                                                <p:commandButton value="Eliminar" actionListener="#{recaudacionesLocalesComerciales.modelPago.eliminarPagoNC(nc)}" update="formProcesar:detCobro,formProcesar:datoEmision"/>
                                            </p:column>
                                        </p:dataTable>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                    <p:tab title="3. CHEQUE">
                                        <!--<p:fieldset legend="3. CHEQUE">-->
                                        <p:panelGrid>
                                            <p:row>
                                                <p:column>
                                                    <p:outputLabel value="Banco"/><br/>
                                                    <p:selectOneMenu value="#{recaudacionesLocalesComerciales.modelPago.pagoCheque.banco}" effect="fade" converter="entityConverter">
                                                        <f:attribute name="name" value="RenEntidadBancaria"/>
                                                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                                        <f:selectItems value="#{recaudacionesLocalesComerciales.bancos}" var="banco" itemLabel="#{banco.descripcion}" itemValue="#{banco}"/>
                                                    </p:selectOneMenu>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Cheque"/><br/>
                                                    <p:inputText value="#{recaudacionesLocalesComerciales.modelPago.pagoCheque.numCheque}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Cuenta"/><br/>
                                                    <p:inputText value="#{recaudacionesLocalesComerciales.modelPago.pagoCheque.numCuenta}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Valor"/><br/>
                                                    <p:inputText type="number" value="#{recaudacionesLocalesComerciales.modelPago.pagoCheque.valor}"/>
                                                </p:column>
                                                <p:column><p:commandButton value="Agregar" actionListener="#{recaudacionesLocalesComerciales.modelPago.agregarPago(4)}" update="formProcesar:detCobro,formProcesar:datoEmision"/></p:column>
                                            </p:row>
                                        </p:panelGrid>
                                        <p:dataTable id="dtCh" var="ch" value="#{recaudacionesLocalesComerciales.modelPago.listPagoCheque}" style="margin-bottom:0; width: 700px;">
                                            <p:column headerText="BANCO"><h:outputText value="#{ch.banco.descripcion}" /></p:column>
                                            <p:column headerText="# Cheque"><h:outputText value="#{ch.numCheque}" /></p:column>
                                            <p:column headerText="# Cuenta"><h:outputText value="#{ch.numCuenta}" /></p:column>
                                            <p:column headerText="# Valor"><h:outputText value="#{ch.valor}" /></p:column>
                                            <p:column headerText="Accion"><p:commandButton value="Eliminar" actionListener="#{recaudacionesLocalesComerciales.modelPago.eliminarPagoCh(ch)}" update="formProcesar:detCobro,formProcesar:datoEmision"/></p:column>
                                        </p:dataTable>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                    <p:tab title="4. TARJETA DE CREDITO">
                                        <!--<p:fieldset legend="4. TARJETA DE CREDITO">-->
                                        <p:panelGrid>
                                            <p:row>
                                                <p:column>
                                                    <p:outputLabel value="Banco"/><br/>
                                                    <p:selectOneMenu value="#{recaudacionesLocalesComerciales.modelPago.pagoTarjetaCredito.banco}" effect="fade" converter="entityConverter">
                                                        <f:attribute name="name" value="RenEntidadBancaria"/>
                                                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                                        <f:selectItems value="#{recaudacionesLocalesComerciales.tarjetas}" var="banco" itemLabel="#{banco.descripcion}" itemValue="#{banco}"/>
                                                    </p:selectOneMenu>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Tarjeta"/><br/>
                                                    <p:inputText value="#{recaudacionesLocalesComerciales.modelPago.pagoTarjetaCredito.numTarjeta}" size="14"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Fecha Caduca"/><br/>
                                                    <p:calendar value="#{recaudacionesLocalesComerciales.modelPago.pagoTarjetaCredito.fechaCaducidad}" pattern="dd/MM/yyyy" size="10"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Autorizacion"/><br/>
                                                    <p:inputText value="#{recaudacionesLocalesComerciales.modelPago.pagoTarjetaCredito.autorizacion}" size="14"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Baucher"/><br/>
                                                    <p:inputText value="#{recaudacionesLocalesComerciales.modelPago.pagoTarjetaCredito.baucher}" size="14"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Titular"/><br/>
                                                    <p:inputText value="#{recaudacionesLocalesComerciales.modelPago.pagoTarjetaCredito.nombreTitular}" size="14"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Valor"/><br/>
                                                    <p:inputText type="number" value="#{recaudacionesLocalesComerciales.modelPago.pagoTarjetaCredito.valor}" style="width: 90px;"/>
                                                </p:column>
                                                <p:column><br/><p:commandButton value="Agregar" actionListener="#{recaudacionesLocalesComerciales.modelPago.agregarPago(2)}" update="formProcesar:detCobro,formProcesar:datoEmision"/></p:column>
                                            </p:row>
                                        </p:panelGrid>
                                        <p:dataTable id="dtTC" var="tc" value="#{recaudacionesLocalesComerciales.modelPago.listPagoTarjetaCredito}" style="margin-bottom:0; width: 700px;">
                                            <p:column headerText="BANCO"><h:outputText value="#{tc.banco.descripcion}" /></p:column>
                                            <p:column headerText="# Tarjeta"><h:outputText value="#{tc.numTarjeta}" /></p:column>
                                            <p:column headerText="Fecha Caducidad"><h:outputText value="#{tc.fechaCaducidad}"><f:convertDateTime pattern="dd/MM/YYYY"/></h:outputText></p:column>
                                            <p:column headerText="# Autorizacion"><h:outputText value="#{tc.autorizacion}" /></p:column>
                                            <p:column headerText="Baucher"><h:outputText value="#{tc.baucher}" /></p:column>
                                            <p:column headerText="Titular"><h:outputText value="#{tc.nombreTitular}" /></p:column>
                                            <p:column headerText="Valor"><h:outputText value="#{tc.valor}" /></p:column>
                                            <p:column headerText="Accion"><p:commandButton value="Eliminar" actionListener="#{recaudacionesLocalesComerciales.modelPago.eliminarPagoTC(tc)}" update="formProcesar:detCobro,formProcesar:datoEmision"/></p:column>
                                        </p:dataTable>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                    <p:tab title="5. TRANSFERENCIA">
                                        <!--<p:fieldset legend="5. TRANSFERENCIA">-->
                                        <p:panelGrid>
                                            <p:row>
                                                <p:column>
                                                    <p:outputLabel value="Banco"/><br/>
                                                    <p:selectOneMenu value="#{recaudacionesLocalesComerciales.modelPago.pagoTransferencia.banco}" effect="fade" converter="entityConverter">
                                                        <f:attribute name="name" value="RenEntidadBancaria"/>
                                                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                                        <f:selectItems value="#{recaudacionesLocalesComerciales.tarjetas}" var="banco" itemLabel="#{banco.descripcion}" itemValue="#{banco}"/>
                                                    </p:selectOneMenu>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Transferencia"/><br/>
                                                    <p:inputText value="#{recaudacionesLocalesComerciales.modelPago.pagoTransferencia.numTransferencia}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Fecha"/><br/>
                                                    <p:calendar value="#{recaudacionesLocalesComerciales.modelPago.pagoTransferencia.fecha}" pattern="dd/MM/yyyy"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Valor"/><br/>
                                                    <p:inputText type="number" value="#{recaudacionesLocalesComerciales.modelPago.pagoTransferencia.valor}"/>
                                                </p:column>
                                                <p:column><p:commandButton value="Agregar" actionListener="#{recaudacionesLocalesComerciales.modelPago.agregarPago(5)}" update="formProcesar:detCobro,formProcesar:datoEmision"/></p:column>
                                            </p:row>
                                        </p:panelGrid>
                                        <p:dataTable id="dtT" var="t" value="#{recaudacionesLocalesComerciales.modelPago.listPagoTransferencia}" style="margin-bottom:0; width: 700px;">
                                            <p:column headerText="Banco"><h:outputText value="#{t.banco.descripcion}" /></p:column>
                                            <p:column headerText="# Transferencia"><h:outputText value="#{t.numTransferencia}" /></p:column>
                                            <p:column headerText="Fecha"><h:outputText value="#{t.fecha}"><f:convertDateTime pattern="dd/MM/YYYY"/></h:outputText></p:column>
                                            <p:column headerText="Valor"><h:outputText value="#{t.valor}" /></p:column>
                                            <p:column headerText="Accion"><p:commandButton value="Eliminar" actionListener="#{recaudacionesLocalesComerciales.modelPago.eliminarPagoTransferencia(t)}" update="formProcesar:detCobro,formProcesar:datoEmision"/></p:column>
                                        </p:dataTable>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                </p:tabView>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Notas Credito" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{recaudacionesLocalesComerciales.modelPago.valorTotalNotasCredito}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Cheque" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{recaudacionesLocalesComerciales.modelPago.valorTotalCheques}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Tarjeta" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{recaudacionesLocalesComerciales.modelPago.valorTotalTarjetas}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Transferencia" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{recaudacionesLocalesComerciales.modelPago.valorTotalTransferencias}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Total" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{recaudacionesLocalesComerciales.modelPago.valorTotal}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px; color: red;"/></p:column>
                        </p:row>
                    </p:panelGrid>           
                </p:fieldset>
                <p:panel id="botones">
                    <center>
                        <p:commandButton value="Procesar" styleClass="btnStyle" actionListener="#{recaudacionesLocalesComerciales.pago}" update="formProcesar,mainForm" icon="ui-icon-print" oncomplete="PF('dlgProcesar').hide();" style="font-size: 14px;" rendered="#{userSession.userId ne 110}">
                            <!--<p:confirm header="Confirmacion" message="Realizar Pago?" icon="ui-icon-alert" />-->
                        </p:commandButton><p:spacer width="25"/>                        
                        <p:commandButton value="Cancelar" styleClass="btnStyle" oncomplete="PF('dlgProcesar').hide();" icon="ui-icon-cancel" style="font-size: 14px;"/>
                    </center>
                </p:panel>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgSolicitante" header="Contribuyentes" width="800" height="90%" resizable="false" closable="true" closeOnEscape="true" modal="true">
            <h:form id="frmSolicitante">
                <div align="right">
                    <p:commandButton id="btnNuevo" value="Agregar" style="height: 30px" actionListener="#{recaudacionesLocalesComerciales.actualizarEnte()}" oncomplete="PF('dlgNewClient').show();" update="formNewClient"> 
                        <f:setPropertyActionListener target="#{managedEnte.tipoEnte}" value="#{1}" />
                    </p:commandButton>
                </div>
                <p:dataTable var="s" value="#{recaudacionesLocalesComerciales.solicitantes}" style="width: 100%;text-align: center;" lazy="true" 
                             paginator="true" rows="10" filterEvent="enter" paginatorPosition="top"
                             selectionMode="single" selection="#{recaudacionesLocalesComerciales.cobrosGenerales.comprador}" rowKey="#{s.id}">
                    <p:column headerText="CI/RUC" sortBy="#{s.ciRuc}" width="150" filterBy="#{s.ciRuc}" filterStyle="width: 90%;">
                        <h:outputText value="#{s.ciRuc}"/>
                    </p:column>
                    <!--<p:column headerText="Apellidos Nombre/Razon Social" filterBy="# {s.nombresCompletos}" filterStyle="width: 90%;">
                        <h:outputText value="# {s.nombreCompleto}" style="text-transform: uppercase"/>
                    </p:column>-->
                    <p:column headerText="Apellidos" filterBy="#{s.apellidos}" sortBy="#{s.apellidos}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.apellidos}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Nombres" filterBy="#{s.nombres}" sortBy="#{s.nombres}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.nombres}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Razon Social" filterBy="#{s.razonSocial}" sortBy="#{s.razonSocial}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.razonSocial}" style="text-transform: uppercase"/>
                    </p:column>
                    <f:facet name="footer">
                        <p:commandButton value="Seleccionar" icon="ui-icon-plus" actionListener="#{recaudacionesLocalesComerciales.seleccionar()}" style="height: 30px"/>
                    </f:facet>
                </p:dataTable>         
            </h:form>
        </p:dialog>

        <p:dialog id="dlgComprobante" widgetVar="dlgComprobante" header="Comprobante de Pago" appendTo="@(body)" width="75%" responsive="true" closable="true" closeOnEscape="true" position="center" modal="true" resizable="false">
            <h:form id="frmComprobante">
                <p:panelGrid style="width: 100%;">
                    <p:row>
                        <p:column>
                            <p:outputLabel value="N. Liquidacion"/><br/>
                            <p:outputLabel value="#{recaudacionesLocalesComerciales.liquidacion.numLiquidacion}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Tipo de Pago"/><br/>
                            <p:outputLabel value="#{recaudacionesLocalesComerciales.liquidacion.tipoLiquidacion.prefijo} - #{recaudacionesLocalesComerciales.liquidacion.tipoLiquidacion.nombreTitulo}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Solicitante"/><br/>
                            <p:outputLabel value="#{recaudacionesLocalesComerciales.liquidacion.comprador.ciRuc}-#{recaudacionesLocalesComerciales.liquidacion.comprador.apellidos} #{recaudacionesLocalesComerciales.liquidacion.comprador.nombres} #{recaudacionesLocalesComerciales.liquidacion.comprador.razonSocial} #{recaudacionesLocalesComerciales.liquidacion.comprador.nombreComercial}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <br/>
                <p:dataTable id="dtPagos" value="#{recaudacionesLocalesComerciales.liquidacion.renPagoCollection}" var="p" style="width: 80%; margin: 0 auto; text-align: center;">
                    <p:column headerText="Numero de comprobante"><p:outputLabel value="#{p.numComprobante}"/></p:column>
                    <p:column headerText="fecha Pago" >
                        <p:outputLabel value="#{p.fechaPago}"><f:convertDateTime pattern="dd/MM/yyyy"/></p:outputLabel>
                    </p:column>
                    <p:column headerText="Opcion"><p:commandButton value="Comprobante" styleClass="btnStyle" actionListener="#{recaudacionesLocalesComerciales.generarComprobante(p)}" icon="ui-icon-document"/></p:column>
                </p:dataTable>
                <br/>
                <center>
                    <p:commandButton value="Aceptar" styleClass="btnStyle" oncomplete="PF('dlgComprobante').hide();" icon="ui-icon-circle-close"/>
                </center>
            </h:form>
        </p:dialog>


        <p:dialog widgetVar="dlgValorRubro" header="Total a Pagar" resizable="false" modal="true">
            <h:form id="formValores">
                <h:panelGrid styleClass="noBorder" columns="3">

                    <h:panelGrid styleClass="noBorder" columns="2"> 
                        <p:outputLabel value="Año" style="font-weight: bolder;" />
                        <pe:inputNumber id="anio_liq" value="#{recaudacionesLocalesComerciales.rubroSelect.anio}" decimalPlaces="0" />
                        <p:outputLabel value="Mes:" style="font-weight: bolder;" />
                        <p:selectOneMenu id="mes_desde" value="#{recaudacionesLocalesComerciales.rubroSelect.mes}" effect="fold" style="width: 100px" >
                            <f:selectItem itemLabel="ENERO" itemValue="1"/>
                            <f:selectItem itemLabel="FEBRERO" itemValue="2"/>
                            <f:selectItem itemLabel="MARZO" itemValue="3"/>
                            <f:selectItem itemLabel="ABRIL" itemValue="4"/>
                            <f:selectItem itemLabel="MAYO" itemValue="5"/>
                            <f:selectItem itemLabel="JUNIO" itemValue="6"/>
                            <f:selectItem itemLabel="JULIO" itemValue="7"/>
                            <f:selectItem itemLabel="AGOSTO" itemValue="8"/>
                            <f:selectItem itemLabel="SEPTIEMBRE" itemValue="9"/>
                            <f:selectItem itemLabel="OCTUBRE" itemValue="10"/>
                            <f:selectItem itemLabel="NOVIEMBRE" itemValue="11"/>
                            <f:selectItem itemLabel="DICIEMBRE" itemValue="12"/>
                            <!--<f:selectItems value="# {cuentaLiquidacionView.meses()}" var="m" itemValue="# {m.value}" itemLabel="# {m.value}" />-->
                        </p:selectOneMenu>
                        <p:outputLabel value="Área Local " style="font-weight: bolder;" />
                        <pe:inputNumber value="#{recaudacionesLocalesComerciales.cobrosGenerales.localComercial.area}"
                                        decimalPlaces="2" readonly="true"/>
                        <p:outputLabel value="Total:" style="font-weight: bolder;"/>
                        <pe:inputNumber value="#{recaudacionesLocalesComerciales.rubroSelect.valor}" decimalPlaces="2" readonly="true">
                            <p:ajax event="click" listener="#{recaudacionesLocalesComerciales.encerarValor}"/>
                        </pe:inputNumber>
                    </h:panelGrid>                   
                </h:panelGrid>
                <p:commandButton value="Aceptar" styleClass="btnStyle" icon="ui-icon-check" actionListener="#{recaudacionesLocalesComerciales.guardaRubro()}"/>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgEspeciesDisp" header="Especies Disponibles" resizable="false" modal="true">
            <h:form id="formEspecies">
                <p:panelGrid styleClass="noBorder" columns="4" style="font-size: 16px;">
                    Cantidad:
                    <pe:inputNumber value="#{recaudacionesLocalesComerciales.rubroSelect.cantidad}" decimalPlaces="0">
                        <p:ajax event="change" update="formEspecies" listener="#{recaudacionesLocalesComerciales.updateValoresEspecies()}"/>
                    </pe:inputNumber>
                    Disponibles:
                    <p:inputText value="#{recaudacionesLocalesComerciales.acta.disponibles}"  readonly="true" style="background-color: #fce1b1"/>
                    Desde:
                    <p:inputText value="#{recaudacionesLocalesComerciales.acta.desdeTemp}" readonly="true" style="background-color: #fce1b1"/>
                    Hasta:
                    <p:inputText value="#{recaudacionesLocalesComerciales.acta.hastaTemp}" readonly="true" style="background-color: #fce1b1"/>
                    V.Uni.:
                    <pe:inputNumber value="#{recaudacionesLocalesComerciales.rubroSelect.valor}" decimalPlaces="2"/>
                    V.Total:
                    <pe:inputNumber value="#{recaudacionesLocalesComerciales.rubroSelect.valorTotal}" decimalPlaces="2"/>
                </p:panelGrid>
                <div align="center">
                    <p:commandButton value="Aceptar" styleClass="btnStyle" icon="ui-icon-check" actionListener="#{recaudacionesLocalesComerciales.guardaRubro()}"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog header="Seleccionar Predio" widgetVar="selPredio" modal="true" resizable="false" width="700">
            <h:form id="formPredSel">
                <p:dataTable id="dtSelPred" paginator="true" style="text-align: center;" emptyMessage="No se encontro Movimientos" filterEvent="enter"
                             rows="10" value="#{recaudacionesLocalesComerciales.propiedades}" var="pl" paginatorPosition="top">
                    <p:column headerText="No Predio" filterBy="#{pl.numPredio}" filterStyle="width: 90%" width="100">
                        <p:outputLabel value="#{pl.numPredio}"/>
                    </p:column>
                    <p:column headerText="Cod. Predial" width="200">
                        <p:outputLabel value="#{pl.codigoPredialCompleto}"/>
                    </p:column>
                    <p:column headerText="Urbanizacion">
                        <p:outputLabel value="#{pl.ciudadela.nombre}"/>
                    </p:column>
                    <p:column headerText="MZ" filterBy="#{pl.urbMz}" width="50" filterStyle="width: 95%" filterMatchMode="exact">
                        <p:outputLabel value="#{pl.urbMz}"/>
                    </p:column>
                    <p:column headerText="SL" filterBy="#{pl.urbSolarnew}" width="50" filterStyle="width: 95%" filterMatchMode="exact">
                        <p:outputLabel value="#{pl.urbSolarnew}"/>
                    </p:column>
                    <p:column headerText="Selec." width="50">
                        <p:commandLink actionListener="#{recaudacionesLocalesComerciales.seleccionaPredio(pl)}">
                            <p:graphicImage value="/css/homeIconsImages/ir.png" height="16"/>   
                        </p:commandLink>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgNuevoCliente" header="Ingreso de Cliente" widgetVar="dlgNewClient" modal="true" resizable="false" closeOnEscape="false" position="center">
            <h:form  id="formNewClient">
                <p:panelGrid styleClass="noBorder" style="width: 100%">
                    <p:row>
                        <p:column style="text-align: right"><p:outputLabel value="Tipo Persona:" style="font-weight: bolder"/></p:column>
                        <p:column>
                            <p:selectOneMenu value="#{recaudacionesLocalesComerciales.tipoEnte}" style="width: 160px;">
                                <f:selectItem itemLabel="Natural" itemValue="1" />
                                <f:selectItem itemLabel="Jurídica" itemValue="2" />
                                <f:selectItem itemLabel="Excepcionales" itemValue="3" />
                                <p:ajax update="tabNewEnte"/>
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <p:tabView id="tabNewEnte" style="width: 520px;height: 400px">
                    <p:tab title="Datos Principales">
                        <p:panelGrid styleClass="noBorder" style="width: 100%">
                            <p:row>
                                <p:column colspan="4">
                                    <p:outputLabel value="NOTA: CAMPOS OBLIGATORIOS (*)" style="font-weight: bolder;color: #0033FF"/>
                                </p:column>
                            </p:row>
                            <p:row rendered="#{recaudacionesLocalesComerciales.tipoEnte==3}">
                                <p:column colspan="4">
                                    <p:selectBooleanCheckbox value="#{recaudacionesLocalesComerciales.excepcionalEmpresa}" itemLabel="EXCEPCIONALES JURIDICO:" style="float: left; font-weight: bold; font-size: 12px;">
                                        <p:ajax update="tabNewEnte" process="@this"/>
                                    </p:selectBooleanCheckbox>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="#{recaudacionesLocalesComerciales.tipoEnte==1?'(*)Cédula:':recaudacionesLocalesComerciales.tipoEnte==2?'(*)R.U.C.:':recaudacionesLocalesComerciales.tipoEnte==3?'(*)Identificación:':''}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{recaudacionesLocalesComerciales.registroEnte.ciRuc}" rendered="#{recaudacionesLocalesComerciales.tipoEnte==1 or recaudacionesLocalesComerciales.tipoEnte==2}">
                                        <p:ajax event="blur" listener="#{recaudacionesLocalesComerciales.existeCedula()}" update="formNewClient"/>
                                    </p:inputText>
                                    <p:inputText readonly="true" value="Lo asigna el sistema" disabled="#{recaudacionesLocalesComerciales.tipoEnte==3}" rendered="#{recaudacionesLocalesComerciales.tipoEnte==3}"/>
                                </p:column>
                                <p:column>
                                    <p:outputLabel value="Fec. Nacimiento:" rendered="#{recaudacionesLocalesComerciales.tipoEnte==1 or managedEnte.tipoEnte==3}" style="font-weight: bolder"/>
                                    <p:outputLabel value="Fec. Constitución:" rendered="#{recaudacionesLocalesComerciales.tipoEnte==2}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column>
                                    <p:calendar value="#{recaudacionesLocalesComerciales.registroEnte.fechaNacimiento}" placeholder="DÍA-MES-AÑO" maxdate="sysdate" pattern="dd-MM-yyyy" mask="true" />
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="(*)Nombres:" rendered="#{recaudacionesLocalesComerciales.tipoEnte==1 or (recaudacionesLocalesComerciales.tipoEnte==3 and !recaudacionesLocalesComerciales.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                    <p:outputLabel value="(*)Razón Social:" rendered="#{recaudacionesLocalesComerciales.tipoEnte==2 or (recaudacionesLocalesComerciales.tipoEnte==3 and recaudacionesLocalesComerciales.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{recaudacionesLocalesComerciales.registroEnte.nombres}" rendered="#{recaudacionesLocalesComerciales.tipoEnte==1 or (recaudacionesLocalesComerciales.tipoEnte==3 and !recaudacionesLocalesComerciales.excepcionalEmpresa)}" style="width: 100%"/>
                                    <p:inputText value="#{recaudacionesLocalesComerciales.registroEnte.razonSocial}" rendered="#{recaudacionesLocalesComerciales.tipoEnte==2 or (recaudacionesLocalesComerciales.tipoEnte==3 and recaudacionesLocalesComerciales.excepcionalEmpresa)}" style="width: 100%"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="(*)Apellidos:" rendered="#{recaudacionesLocalesComerciales.tipoEnte==1 or (recaudacionesLocalesComerciales.tipoEnte==3 and !recaudacionesLocalesComerciales.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                    <p:outputLabel value="Nombre Comercial:" rendered="#{recaudacionesLocalesComerciales.tipoEnte==2 or (recaudacionesLocalesComerciales.tipoEnte==3 and recaudacionesLocalesComerciales.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{recaudacionesLocalesComerciales.registroEnte.apellidos}" rendered="#{recaudacionesLocalesComerciales.tipoEnte==1 or (recaudacionesLocalesComerciales.tipoEnte==3 and !recaudacionesLocalesComerciales.excepcionalEmpresa)}" style="width: 100%"/>
                                    <p:inputText value="#{recaudacionesLocalesComerciales.registroEnte.nombreComercial}" rendered="#{recaudacionesLocalesComerciales.tipoEnte==2 or (recaudacionesLocalesComerciales.tipoEnte==3 and recaudacionesLocalesComerciales.excepcionalEmpresa)}" style="width: 100%"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Dirección:" style="font-weight: bolder"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{recaudacionesLocalesComerciales.registroEnte.direccion}" style="width: 100%"/>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    </p:tab>
                </p:tabView>
                <div align="center">
                    <p:commandButton value="Guardar" icon="ui-icon-disk" actionListener="#{recaudacionesLocalesComerciales.guardarEnte()}"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgNumeroLiquidacion" header="Codigo de liquidacion generado" resizable="false" modal="true">
            <h:form id="formLiq">

                <h:panelGrid styleClass="noBorder" columns="1" >
                    <p:outputLabel value="#{recaudacionesLocalesComerciales.liquidacion.idLiquidacion} " style="font-weight: bold; font-size: 25px; text-align: center;" />
                </h:panelGrid>

                <center>
                    <p:commandButton value="Imprimir" styleClass="btnStyle" oncomplete="PF('dlgNumeroLiquidacion').hide();" actionListener="#{recaudacionesLocalesComerciales.imprimirTitulo()}" update="mainForm"/>
                </center>
            </h:form>
        </p:dialog>


        <script>
            $(document).ready(function () {
                //attach click event to button
                $("#formValores [type='reset']").click(function () {
                    $("#formValores [name='valorMain']").focus();
                });
            });
        </script>

    </ui:define>
</ui:composition>