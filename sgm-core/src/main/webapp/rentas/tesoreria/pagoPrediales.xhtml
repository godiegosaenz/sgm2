<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/template/template.xhtml"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:dialog="http://xmlns.jcp.org/jsf/composite/dialog">
    <ui:define name="head">
        <script src="../../resources/pfJs/keyPress.js" type="text/javascript"></script>
        <style type="text/css">
            .ui-selectoneradio label{
                font-size: 1.2em;
                font-weight: bold;
            }
            .ui-datatable .ui-datatable-scrollable-body .ui-datatable thead th, .ui-datatable tbody td, .ui-datatable tfoot td, .ui-datatable tfoot th{
                height : 20px;
                padding: 3px 5px;
            } 
        </style>
    </ui:define>
    <ui:define name="content">
        <center>
            <h1>Pagos Prediales</h1>
        </center>
        <h:form id="mainForm">
            <div align="right">
                <p:commandButton value="Generar Certificado de No Adeudar" oncomplete="PF('dlgSolicitanteCertificado').show()" update="frmSolicitanteCertificado">
                    <f:setPropertyActionListener target="#{pagoPrediales.tipoCertificado}" value="#{1}" />
                    <f:setPropertyActionListener target="#{pagoPrediales.tipoCert}" value="#{true}" />
                </p:commandButton>

                <br></br><br></br>
                <p:commandButton value="Registrar Clave Anterior" oncomplete="PF('dlgClaveAnterior').show()" update="formClaveAnterior">
                </p:commandButton>
            </div>

            <br></br>

            <p:tabView id="tvRecaudaciones">
                <p:ajax event="tabChange" listener="#{pagoPrediales.onChangeTab}"/>
                <p:tab id="tabPagoPredial" title="PAGO PREDIAL URBANO">
                    <dialog:consultaCodigoPredial id="consulta" tipoConsulta="#{pagoPrediales.tipoConsulta}"
                                                  changeRadio="#{pagoPrediales.onChangeRadio}"
                                                  updateConsulta="consulta, mainForm:tvRecaudaciones:datos"
                                                  predioModel="#{pagoPrediales.predioModel}"
                                                  contribuyenteConsulta="#{pagoPrediales.contribuyenteConsulta}"
                                                  nombreComprador="#{pagoPrediales.nombreComprador}"
                                                  consultaContDirecta="#{pagoPrediales.consultarPorNombreComprador(1)}"
                                                  dlgSolicitante="PF('dlgSolicitante').show()"
                                                  ciudadelas="#{pagoPrediales.ciudadelas}"
                                                  consultarEmisiones="#{pagoPrediales.consultarEmisiones()}"
                                                  updateFrmSolicitante=":frmSolicitante"
                                                  tipoPredio="true"/>

                    <p:panel id="datos">
                        <p:outputLabel value="TOT. CANCELAR:" style="font-size: 15px; font-weight: bolder;"/>
                        <p:outputLabel value="#{pagoPrediales.totalEmisiones}" style="font-size: 22px; font-weight: bolder; color: blue;"/>
                        <p:commandButton value="PROCESAR" actionListener="#{pagoPrediales.procesarPago}" process="@this" rendered="#{pagoPrediales.habilitarProcesar()}" style="font-size: 13px; font-weight: bolder; float: right;" styleClass="btnStyle" icon="ui-icon-gear" iconPos="right" /> <!--rendered="# {userSession.userId ne 110}"/-->
                        <p:commandButton value="NO ADEUDAR" action="#{pagoPrediales.openDialogCertificado()}"   rendered="#{(pagoPrediales.totalEmisionesGeneral eq null or pagoPrediales.totalEmisionesGeneral gt 0.00)?false:true}" style="font-size: 13px; font-weight: bolder; float: right;" styleClass="btnStyle" icon="ui-icon-print" iconPos="right">
                            <f:setPropertyActionListener target="#{pagoPrediales.tipoCertificado}" value="#{1}" />
                        </p:commandButton>
                        <p:commandButton value="APLICAR EXONERACIÓN" update="datos" rendered="false" style="font-size: 13px; font-weight: bolder; float: right;" styleClass="btnStyle" actionListener="#{pagoPrediales.aplicarExoneracion}"/>
                        <div style="clear: both;"/>
                        <p:tabView id="tvRecaudacionesPredios">
                            <p:tab title="Emisiones de Predios">
                                <p:dataTable id="dtEmision" value="#{pagoPrediales.emisionesPrediales}" var="emision"  selection="#{pagoPrediales.emisionesPredialesTemp}"
                                             rowKey="#{emision.id}" scrollable="true" scrollHeight="350" lazy="true" selectionMode="multiple" reflow="true" rows="100"  >
                                    <p:ajax event="rowSelect" listener="#{pagoPrediales.seleccionarEmision(1)}" update="mainForm:tvRecaudaciones:datosRural"/>
                                    <p:ajax event="rowUnselect" listener="#{pagoPrediales.seleccionarEmision(1)}" update="mainForm:tvRecaudaciones:datosRural"/>
                                    <p:ajax event="toggleSelect" listener="#{pagoPrediales.seleccionarEmision(1)}" update="mainForm:tvRecaudaciones:datos"/>
                                    <p:ajax event="rowSelectCheckbox" listener="#{pagoPrediales.seleccionarEmision(1)}" update="mainForm:tvRecaudaciones:datos"/>
                                    <p:ajax event="rowUnselectCheckbox" listener="#{pagoPrediales.seleccionarEmision(1)}" update="mainForm:tvRecaudaciones:datos"/>
                                    <p:column  selectionMode="multiple"  style="width:16px;text-align:center" rendered="#{pagoPrediales.isSanMiguel}"></p:column>
                                    <p:column headerText="*" style="width: 25px; text-align:center">
                                        <p:graphicImage value="/image/circleGreen.png" height="12" rendered="#{emision.estadoLiquidacion.id eq 1 ? true : false}" title="#{emision.estadoLiquidacion.descripcion}"/>
                                        <p:graphicImage value="/image/circleRed.png" height="12" rendered="#{emision.estadoLiquidacion.id eq 2 ? true : false}" title="#{emision.estadoLiquidacion.descripcion}"/>
                                        <p:graphicImage value="/image/circleOrange.png" height="12" rendered="#{emision.estadoLiquidacion.id eq 7 ? true : false}" title="#{emision.estadoLiquidacion.descripcion}"/>
                                    </p:column>
                                    <p:column headerText="No." style="text-align: center;"  width="80"><p:outputLabel value="#{emision.idLiquidacion}" /></p:column>
                                    <p:column headerText="Año" style="text-align: center;" width="60"><p:outputLabel value="#{emision.anio}"/></p:column>
                                    <!--<p:column id="predio" headerText="N. Predio" style="text-align: center;" width="100"><p:outputLabel value="# {emision.predio.numPredio}"/></p:column>-->
                                    <!--<p:column headerText="Mz./Sl." style="text-align: center;"  width="80"><p:outputLabel value="# {emision.predio.urbMz}/#{emision.predio.urbSolarnew}"/></p:column>-->
                                    <p:column id="codPredial" headerText="Clave Catastral" style="text-align: center" width="150" ><p:outputLabel value="#{emision.predio.claveCat}"/></p:column>
                                    <p:column headerText="Contribuyente" style="text-align: center" width="200">
                                        #{emision.comprador==null?emision.nombreComprador :emision.comprador.nombreCompleto}
                                    </p:column>
                                    <p:column headerText="Avaluo" style="text-align: center;" width="100">
                                        <h:outputText value="#{emision.avaluoMunicipal}">
                                            <f:convertNumber pattern="$ #,##0.00" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Emision" style="text-align: center;" width="100">
                                        <h:outputText value="#{emision.totalPago}">
                                            <f:convertNumber pattern="$ #,##0.00" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Descuento" style="text-align: center;" width="100">
                                        <h:outputText value="#{emision.descuento}">
                                            <f:convertNumber pattern="$ #,##0.00" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Recargo" style="text-align: center;" width="100">
                                        <h:outputText value="#{emision.recargo}">
                                            <f:convertNumber pattern="$ #,##0.00" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Interes" style="text-align: center;" width="100">
                                        <h:outputText value="#{emision.interes}">
                                            <f:convertNumber pattern="$ #,##0.00" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Coactiva" style="text-align: center;" width="100">
                                        <h:outputText value="#{emision.valorCoactiva}">
                                            <f:convertNumber pattern="$ #,##0.00" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Pago" style="text-align: center;" width="100">
                                        <h:outputText value="#{emision.pagoFinal}">
                                            <f:convertNumber pattern="$ #,##0.00" />
                                        </h:outputText>
                                    </p:column>
                                </p:dataTable>
                                <p:contextMenu id="opciones" for="dtEmision" >                            
                                    <p:menuitem value="Nada que Mostrar" update="formDetEmision" icon="ui-icon-comment" rendered="#{pagoPrediales.emisionSeleccionada eq null}" />
                                    <p:menuitem value="Detalle Emision" oncomplete="PF('dlgDetalle').show();" update="formDetEmision" icon="ui-icon-comment" rendered="#{pagoPrediales.emisionSeleccionada ne null}" process="@this"/>
                                    <p:menuitem value="Detalle Pago" oncomplete="PF('dlgDetallePago').show();" update="formDetPago" icon="ui-icon-calculator" rendered="#{pagoPrediales.emisionSeleccionada ne null and (pagoPrediales.emisionSeleccionada.estadoLiquidacion.id eq 1 or pagoPrediales.emisionSeleccionada.estadoLiquidacion.id eq 2)}" process="@this"/>
                                    <p:menuitem value="Editar nombre del contribuyente" oncomplete="PF('dlgNombCont').show();" actionListener="#{pagoPrediales.setNombreContribuyente()}" update="formNombCont" icon="ui-icon-comment" rendered="#{pagoPrediales.emisionSeleccionada ne null}" process="@this"/>
                                    <p:menuitem value="Recalculo normal" oncomplete="PF('dlgRecalculo').show();" update="frmRecalculo" actionListener="#{pagoPrediales.preCalculo(true)}" icon="ui-icon-refresh" rendered="#{pagoPrediales.liquidador}" process="@this"/>
                                    <p:menuitem value="Recalculo excepcional" oncomplete="PF('dlgRecalculo').show();" update="frmRecalculo" actionListener="#{pagoPrediales.preCalculo(false)}" icon="ui-icon-refresh" rendered="#{pagoPrediales.liquidador}" process="@this"/>
                                </p:contextMenu>
                            </p:tab>
                            <p:tab title="Cuotas de Convenio">
                                <h:panelGroup id="panelConvenios">
                                    <h:panelGrid columns="4">
                                        TOTAL A CANCELAR: $
                                        <p:inputText readonly="true" value="#{pagoPrediales.sumaTotalConv}"/>
                                        <p:spacer width="20" height="1"/>
                                        <p:commandButton value="PROCESAR" actionListener="#{pagoPrediales.procesarPagosConv()}" icon="ui-icon-gear" style="float: right;"/>
                                    </h:panelGrid>
                                    <p:dataTable id="dtConvenios" value="#{pagoPrediales.convenidos}" var="con" style="text-align: center;" selectionMode="single" 
                                                 scrollable="true" scrollHeight="350" rowKey="#{con.id}" selection="#{pagoPrediales.cpd}" resizableColumns="true">
                                        <p:ajax event="rowSelect" listener="#{pagoPrediales.onSelectCuota}"/>
                                        <p:column headerText="*" width="25">
                                            <p:graphicImage value="/image/circleGreen.png" height="12" rendered="#{con.liquidacion.estadoLiquidacion.id eq 1}" />
                                            <p:graphicImage value="/image/circleRed.png" height="12" rendered="#{con.liquidacion.estadoLiquidacion.id eq 8}" />
                                            <p:graphicImage value="/image/circleRed.png" height="12" rendered="#{con.liquidacion.estadoLiquidacion.id eq 9}" />
                                        </p:column>
                                        <p:column headerText="Liquidación"><h:outputText value="#{con.liquidacion.idLiquidacion}"/></p:column>
                                        <p:column headerText="Comprobante"><h:outputText value="#{con.liquidacion.numComprobante}"/></p:column>
                                        <p:column headerText="No Cuota"><h:outputText value="#{con.mes}" /></p:column>
                                        <p:column headerText="Fecha Max. Pago">
                                            <h:outputText value="#{con.fechaMaximaPago}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </h:outputText>                    
                                        </p:column>
                                        <p:column headerText="Descripcion"><h:outputText value="#{con.convenio.descripcion}" /></p:column>
                                        <p:column headerText="Valor Cuota">
                                            <h:outputText value="#{con.deuda}">
                                                <f:convertNumber pattern="$ #,##0.00" />
                                            </h:outputText>
                                        </p:column>
                                    </p:dataTable>
                                </h:panelGroup>

                            </p:tab>
                        </p:tabView>
                    </p:panel>
                </p:tab>
                <p:tab id="pagoPredialRural" title="PAGO PREDIAL RUSTICO" rendered="false">
                    <dialog:consultaCodigoPredial id="consultaRural" tipoConsulta="#{pagoPrediales.tipoConsultaRural}"
                                                  updateConsulta="consultaRural, mainForm:tvRecaudaciones:datosRural"
                                                  predioModel="#{pagoPrediales.predioModel}"
                                                  contribuyenteConsulta="#{pagoPrediales.contribuyenteConsulta}"
                                                  nombreComprador="#{pagoPrediales.nombreComprador}"
                                                  consultaContDirecta="#{pagoPrediales.consultarPorNombreComprador(2)}"
                                                  renderConsultaDirecta="false"
                                                  dlgSolicitante="PF('dlgSolicitanteRustico').show()"
                                                  ciudadelas="#{pagoPrediales.parroquiasRurales}"
                                                  consultarEmisiones="#{pagoPrediales.consultarEmisionesRurales()}"
                                                  updateFrmSolicitante=":frmSolicitanteRustico"
                                                  tipoPredio="false"/>

                    <p:panel id="datosRural">
                        <p:outputLabel value="REG. CATASTRAL: #{pagoPrediales.predioRuralConsulta.regCatastral}" style="font-size: 16px; font-weight: bolder;"/>
                        <p:spacer width="25"/>
                        <p:outputLabel value="ID PREDIAL: #{pagoPrediales.predioRuralConsulta.idPredial}" style="font-size: 16px; font-weight: bolder;"/>
                        <p:spacer width="25"/>
                        <p:outputLabel value="PARROQUIA: #{pagoPrediales.predioRuralConsulta.parroquia.descripcion}" style="font-size: 16px; font-weight: bolder;"/>
                        <p:spacer width="25"/>
                        <p:outputLabel value="TOTAL CANCELAR:" style="font-size: 16px; font-weight: bolder;"/>
                        <p:outputLabel value="#{pagoPrediales.totalEmisiones}" style="font-size: 18px; font-weight: bolder; color: blue;"/>
                        <p:commandButton value="PROCESAR" process="@this" style="font-size: 15px; font-weight: bolder; float: right;" styleClass="btnStyle" icon="ui-icon-gear" iconPos="right" actionListener="#{pagoPrediales.procesarPago}" rendered="#{pagoPrediales.habilitarProcesar()}" /><!--rendered="# {userSession.userId ne 110}"/-->
                        <p:commandButton value="NO ADEUDAR" style="font-size: 14px; font-weight: bolder; float: right;" styleClass="btnStyle" icon="ui-icon-print" iconPos="right" action="#{pagoPrediales.openDialogCertificado()}"   rendered="#{(pagoPrediales.totalEmisionesGeneral eq null or pagoPrediales.totalEmisionesGeneral gt 0.00)?false:true}">
                            <f:setPropertyActionListener target="#{pagoPrediales.tipoCertificado}" value="#{2}" />
                        </p:commandButton>
                        <div style="clear: both;"/>
                        <p:dataTable id="dtEmisionRural" value="#{pagoPrediales.emisionesPrediales}" var="emision"  selection="#{pagoPrediales.emisionesPredialesTemp}" 
                                     rowKey="#{emision.id}" scrollable="true" scrollHeight="350"   selectionMode="multiple" 
                                     lazy="true" reflow="true" rows="100" >
                            <p:ajax event="rowSelect" listener="#{pagoPrediales.seleccionarEmision(2)}" update="mainForm:tvRecaudaciones:datosRural"/>
                            <p:ajax event="rowUnselect" listener="#{pagoPrediales.seleccionarEmision(2)}" update="mainForm:tvRecaudaciones:datosRural"/>
                            <p:ajax event="toggleSelect" listener="#{pagoPrediales.seleccionarEmision(2)}" update="mainForm:tvRecaudaciones:datosRural"/>
                            <p:ajax event="rowSelectCheckbox" listener="#{pagoPrediales.seleccionarEmision(2)}" update="mainForm:tvRecaudaciones:datosRural"/>
                            <p:ajax event="rowUnselectCheckbox" listener="#{pagoPrediales.seleccionarEmision(2)}" update="mainForm:tvRecaudaciones:datosRural"/>
                            <p:column selectionMode="multiple" style="width:16px;text-align:center" rendered="#{pagoPrediales.isSanMiguel}"/>
                            <p:column headerText="*" style="width: 20px;">
                                <p:graphicImage value="/image/circleGreen.png" height="12" rendered="#{emision.estadoLiquidacion.id eq 1 ? true : false}" title="#{emision.estadoLiquidacion.descripcion}"/>
                                <p:graphicImage value="/image/circleRed.png" height="12" rendered="#{emision.estadoLiquidacion.id eq 2 ? true : false}" title="#{emision.estadoLiquidacion.descripcion}"/>
                                <p:graphicImage value="/image/circleOrange.png" height="12" rendered="#{emision.estadoLiquidacion.id eq 4 ? true : false}" title="#{emision.estadoLiquidacion.descripcion}"/>
                            </p:column>
                            <p:column headerText="No." style="text-align: center;"  width="60"><p:outputLabel value="#{emision.numLiquidacion}"/></p:column>
                            <p:column headerText="Año" style="text-align: center;" width="60"><p:outputLabel value="#{emision.anio}"/></p:column>
                            <p:column headerText="Sitio" style="text-align: center;" width="100"><p:outputLabel value="#{emision.predioRustico.sitio}"/></p:column>
                            <!--<p:column headerText="Identificación" style="text-align: center" width="140"><p:outputLabel value="#{emision.comprador.ciRuc}"/></p:column>-->
                            <p:column headerText="Contribuyente" style="text-align: center" width="200" >
                                <p:outputLabel value="#{emision.comprador==null?emision.nombreComprador :emision.comprador.apellidos}#{emision.comprador.nombres}#{emision.comprador.razonSocial}#{emision.comprador.nombreComercial}" title="#{emision.comprador.ciRuc}"/>
                            </p:column>
                            <p:column headerText="Avalúo Catastral" style="text-align: center;" width="100"><p:outputLabel value="#{emision.avaluoMunicipal}"/></p:column>
                            <p:column headerText="Emision" style="text-align: center;" width="100"><p:outputLabel value="#{emision.totalPago}"/></p:column>
                            <p:column headerText="Descuento" style="text-align: center;" width="5%"><p:outputLabel value="#{emision.descuento}"/></p:column>
                            <p:column headerText="Recargo" style="text-align: center;" width="5%"><p:outputLabel value="#{emision.recargo}"/></p:column>
                            <p:column headerText="Interes" style="text-align: center;" width="5%"><p:outputLabel value="#{emision.interes}"/></p:column>
                            <p:column headerText="Pago" style="text-align: center;" width="10%"><p:outputLabel value="#{emision.pagoFinal}"/></p:column>
                        </p:dataTable>
                        <p:contextMenu id="opcionesRural" for="dtEmisionRural">
                            <p:menuitem value="Detalle Emision" oncomplete="PF('dlgDetalle').show();" update="formDetEmision" icon="ui-icon-comment" rendered="#{pagoPrediales.emisionSeleccionada ne null}" process="@this"/>
                            <p:menuitem value="Detalle Pago" oncomplete="PF('dlgDetallePago').show();" update="formDetPago" icon="ui-icon-calculator" rendered="#{pagoPrediales.emisionSeleccionada ne null and (pagoPrediales.emisionSeleccionada.estadoLiquidacion.id eq 1 or pagoPrediales.emisionSeleccionada.estadoLiquidacion.id eq 2)}" process="@this"/>
                            <p:menuitem value="Editar nombre del contribuyente" oncomplete="PF('dlgNombCont').show();" actionListener="#{pagoPrediales.setNombreContribuyente()}" update="formNombCont" icon="ui-icon-comment" rendered="#{pagoPrediales.emisionSeleccionada ne null}" process="@this"/>
                        </p:contextMenu>
                    </p:panel>
                </p:tab>
                <p:tab id="pagoPredialFox" title="PAGO PREDIAL URBANO FOX">
                    <p:panel id="consultaFox">
                        <p:fieldset legend="PROPIETARIOS" style="font-size: 13px;" >
                            <h:panelGrid>
                                <p:row>
                                    <p:column><p:outputLabel value="Nombres Propietarios " style="font-size: 13px; font-weight: bolder;"/></p:column>
                                    <p:column><p:inputText value="#{pagoPrediales.predioUrbanoFox.codigoCatastral}" style="font-size: 13px; font-weight: bolder;" size="40" placeholder="APELLIDOS NOMBRES"/></p:column>
                                    <p:column><p:commandButton value="CONSULTA DIRECTA" style="height: 30px" actionListener="#{pagoPrediales.consultarPorNombreComprador(3)}" update="consultaRural, mainForm:tvRecaudaciones:datos" /></p:column>
                                    <p:column><p:commandButton value="LISTAR TODOS LOS CONTRIBUYENTES"  style="height: 30px" update="consultaFox, mainForm:tvRecaudaciones:datos" oncomplete="PF('dlgSolicitanteFox').show()"/></p:column>
                                </p:row>
                            </h:panelGrid>
                        </p:fieldset>
                        <br/>
                        <center>
                            <p:commandButton value="CONSULTAR" actionListener="#{pagoPrediales.consultarEmisionesRurales2017()}" style="font-size: 15px; font-weight: bolder;" styleClass="btnStyle" icon="ui-icon-search" iconPos="right" update="datosRural2017"/>
                        </center>
                    </p:panel>
                    <p:panel id="datosRural2017">
                        <p:outputLabel value="COD. PREDIAL : #{pagoPrediales.predioUrbanoFox.codigoCatastral}" style="font-size: 16px; font-weight: bolder;"/>
                        <p:spacer width="25"/>
                        <p:outputLabel value="DIRECCION: #{pagoPrediales.predioUrbanoFox.parroquia}- #{pagoPrediales.predioUrbanoFox.sector}" style="font-size: 16px; font-weight: bolder;"/>
                        <p:spacer width="25"/>
                        <p:outputLabel value="PROPIETARIO: #{pagoPrediales.predioUrbanoFox.apellidos} #{pagoPrediales.predioUrbanoFox.nombre}" style="font-size: 16px; font-weight: bolder;"/>
                        <p:spacer width="25"/>
                        <p:outputLabel value="TOTAL CANCELAR:" style="font-size: 16px; font-weight: bolder;"/>
                        <p:outputLabel value="#{pagoPrediales.totalEmisiones}" style="font-size: 18px; font-weight: bolder; color: blue;"/>
                        <p:commandButton value="PROCESAR" style="font-size: 15px; font-weight: bolder; float: right;" styleClass="btnStyle" icon="ui-icon-gear" iconPos="right" actionListener="#{pagoPrediales.procesarPago}" rendered="#{pagoPrediales.habilitarProcesar()}" />
                        <!--PARA NO ADEUDAR PAGO RUSTICOS 2017-->
                        <p:commandButton value="NO ADEUDAR" style="font-size: 14px; font-weight: bolder; float: right;" styleClass="btnStyle" icon="ui-icon-print" iconPos="right" oncomplete="PF('dlgCertificado').show();" update="formCertificado" rendered="#{((pagoPrediales.totalEmisionesGeneral eq null or pagoPrediales.totalEmisionesGeneral gt 0.00)?false:true) and userSession.userId eq 144}">
                            <f:setPropertyActionListener target="#{pagoPrediales.tipoCertificado}" value="#{3}" />
                        </p:commandButton>

                        <div style="clear: both;"/>
                        <p:dataTable id="dtEmisionRural2017" value="#{pagoPrediales.emisionesPrediales}" var="emision"  
                                     selection="#{pagoPrediales.emisionesPredialesTemp}" rowKey="#{emision.id}" scrollable="true" scrollHeight="350" 
                                     lazy="true" reflow="true" rows="100" selectionMode="multiple"
                                     rowStyleClass="#{emision.coactiva ? 'orange' : emision.estaExonerado ? 'exonerado' : null}">
                            <p:ajax event="rowSelect" listener="#{pagoPrediales.seleccionarEmision(3)}" update="mainForm:tvRecaudaciones:datosRural2017"/>
                            <p:column headerText="*" style="width: 20px;">
                                <p:graphicImage value="/image/circleGreen.png" height="12" rendered="#{emision.estadoLiquidacion.id eq 1 ? true : false}" title="#{emision.estadoLiquidacion.descripcion}"/>
                                <p:graphicImage value="/image/circleRed.png" height="12" rendered="#{emision.estadoLiquidacion.id eq 2 ? true : false}" title="#{emision.estadoLiquidacion.descripcion}"/>
                                <p:graphicImage value="/image/circleOrange.png" height="12" rendered="#{emision.estadoLiquidacion.id eq 4 ? true : false}" title="#{emision.estadoLiquidacion.descripcion}"/>
                            </p:column>
                            <p:column headerText="No." style="text-align: center;"  width="60"><p:outputLabel value="#{emision.numLiquidacion}"/></p:column>
                            <p:column headerText="Año" style="text-align: center;" width="60"><p:outputLabel value="#{emision.anio}"/></p:column>
                            <p:column headerText="Avalúo Catastral" style="text-align: center;" width="100"><p:outputLabel value="#{emision.avaluoMunicipal}"/></p:column>
                            <p:column headerText="Emision" style="text-align: center;" width="100"><p:outputLabel value="#{emision.totalPago}"/></p:column>
                            <p:column headerText="Descuento" style="text-align: center;" width="100"><p:outputLabel value="#{emision.descuento}"/></p:column>
                            <p:column headerText="Recargo" style="text-align: center;" width="100"><p:outputLabel value="#{emision.recargo}"/></p:column>
                            <p:column headerText="Interes" style="text-align: center;" width="100"><p:outputLabel value="#{emision.interes}"/></p:column>
                            <p:column headerText="Pago" style="text-align: center;" width="100"><p:outputLabel value="#{emision.pagoFinal}"/></p:column>
                        </p:dataTable>
                        <p:contextMenu id="opcionesRural2017" for="dtEmisionRural2017">
                            <p:menuitem value="Detalle Exoneracion" actionListener="#{exoneracionesView.verEmision(pagoPrediales.emisionSeleccionada)}" rendered="#{pagoPrediales.emisionSeleccionada.estaExonerado}" icon="ui-icon-comment"  process="@this" update="formDetEmision"/>
                            <p:menuitem value="Detalle Emision" oncomplete="PF('dlgDetalle').show();" update="formDetEmision" icon="ui-icon-comment" rendered="#{pagoPrediales.emisionSeleccionada ne null}" process="@this"/>
                            <p:menuitem value="Detalle Pago" oncomplete="PF('dlgDetallePago').show();" update="formDetPago" icon="ui-icon-calculator" rendered="#{pagoPrediales.emisionSeleccionada ne null and (pagoPrediales.emisionSeleccionada.estadoLiquidacion.id eq 1 or pagoPrediales.emisionSeleccionada.estadoLiquidacion.id eq 2)}" process="@this"/>
                            <p:menuitem value="Editar nombre del contribuyente" oncomplete="PF('dlgNombCont').show();" actionListener="#{pagoPrediales.setNombreContribuyente()}" update="formNombCont" icon="ui-icon-comment" rendered="#{pagoPrediales.emisionSeleccionada ne null}" process="@this"/>
                        </p:contextMenu>
                    </p:panel>

                </p:tab>
                <p:tab id="pagoPredialAME" title="PAGO PREDIAL URBANO AME" >
                    <p:panel id="consultaAME">
                        <p:fieldset legend="CODIGO ANTERIOR AME " style="font-size: 13px;" >
                            <h:panelGrid>
                                <p:row>
                                    <p:column><p:outputLabel value="Codigo Anterior AME " style="font-size: 13px; font-weight: bolder;"/></p:column>
                                    <p:column><p:inputText value="#{pagoPrediales.claveCatastralAnterior}" maxlength="18" style="font-size: 13px; font-weight: bolder;" size="40" /></p:column>
                                </p:row>
                            </h:panelGrid>
                        </p:fieldset>
                        <br/>
                        <center>
                            <p:commandButton value="CONSULTAR" actionListener="#{pagoPrediales.consultarEmisionesAME()}" style="font-size: 15px; font-weight: bolder;" styleClass="btnStyle" icon="ui-icon-search" iconPos="right" update="datosAME"/>
                        </center>
                    </p:panel>
                    <p:panel id="datosAME">
                        <p:outputLabel value="TOTAL CANCELAR:" style="font-size: 16px; font-weight: bolder;"/>
                        <p:outputLabel value="#{pagoPrediales.totalEmisiones}" style="font-size: 18px; font-weight: bolder; color: blue;"/>
                        <p:commandButton value="PROCESAR" style="font-size: 15px; font-weight: bolder; float: right;" styleClass="btnStyle" icon="ui-icon-gear" iconPos="right" actionListener="#{pagoPrediales.procesarPago}" rendered="#{pagoPrediales.habilitarProcesar()}" />
                        <!--PARA NO ADEUDAR PAGO RUSTICOS 2017-->
                        <p:commandButton value="NO ADEUDAR" style="font-size: 14px; font-weight: bolder; float: right;" styleClass="btnStyle" icon="ui-icon-print" iconPos="right" oncomplete="PF('dlgCertificado').show();" update="formCertificado" rendered="#{((pagoPrediales.totalEmisionesGeneral eq null or pagoPrediales.totalEmisionesGeneral gt 0.00)?false:true) and userSession.userId eq 144}">
                            <f:setPropertyActionListener target="#{pagoPrediales.tipoCertificado}" value="#{3}" />
                        </p:commandButton>

                        <div style="clear: both;"/>
                        <p:dataTable id="dtEmisionAME" value="#{pagoPrediales.emisionesPrediales}" var="emision"  
                                     selection="#{pagoPrediales.emisionesPredialesTemp}" rowKey="#{emision.id}" scrollable="true" scrollHeight="350" 
                                     lazy="true" reflow="true" rows="100" selectionMode="multiple"
                                     rowStyleClass="#{emision.coactiva ? 'orange' : emision.estaExonerado ? 'exonerado' : null}">
                            <p:ajax event="rowSelect" listener="#{pagoPrediales.seleccionarEmision(4)}" update="mainForm:tvRecaudaciones:datosRural2017"/>
                            <p:column headerText="*" style="width: 20px;">
                                <p:graphicImage value="/image/circleGreen.png" height="12" rendered="#{emision.estadoLiquidacion.id eq 1 ? true : false}" title="#{emision.estadoLiquidacion.descripcion}"/>
                                <p:graphicImage value="/image/circleRed.png" height="12" rendered="#{emision.estadoLiquidacion.id eq 2 ? true : false}" title="#{emision.estadoLiquidacion.descripcion}"/>
                                <p:graphicImage value="/image/circleOrange.png" height="12" rendered="#{emision.estadoLiquidacion.id eq 4 ? true : false}" title="#{emision.estadoLiquidacion.descripcion}"/>
                            </p:column>
                            <p:column headerText="No." style="text-align: center;"  width="60"><p:outputLabel value="#{emision.numLiquidacion}"/></p:column>
                            <p:column headerText="Año" style="text-align: center;" width="60"><p:outputLabel value="#{emision.anio}"/></p:column>
                            <p:column headerText="Contribuyente" style="text-align: center" width="200">
                                #{emision.comprador==null?emision.nombreComprador :emision.comprador.nombreCompleto}
                            </p:column>
                            <p:column headerText="Avalúo Catastral" style="text-align: center;" width="100"><p:outputLabel value="#{emision.avaluoMunicipal}"/></p:column>
                            <p:column headerText="Emision" style="text-align: center;" width="100"><p:outputLabel value="#{emision.totalPago}"/></p:column>
                            <p:column headerText="Descuento" style="text-align: center;" width="100"><p:outputLabel value="#{emision.descuento}"/></p:column>
                            <p:column headerText="Recargo" style="text-align: center;" width="100"><p:outputLabel value="#{emision.recargo}"/></p:column>
                            <p:column headerText="Interes" style="text-align: center;" width="100"><p:outputLabel value="#{emision.interes}"/></p:column>
                            <p:column headerText="Pago" style="text-align: center;" width="100"><p:outputLabel value="#{emision.pagoFinal}"/></p:column>
                        </p:dataTable>
                        <p:contextMenu id="opcionesAME" for="dtEmisionAME">
                            <p:menuitem value="Detalle Exoneracion" actionListener="#{exoneracionesView.verEmision(pagoPrediales.emisionSeleccionada)}" rendered="#{pagoPrediales.emisionSeleccionada.estaExonerado}" icon="ui-icon-comment"  process="@this" update="formDetEmision"/>
                            <p:menuitem value="Detalle Emision" oncomplete="PF('dlgDetalle').show();" update="formDetEmision" icon="ui-icon-comment" rendered="#{pagoPrediales.emisionSeleccionada ne null}" process="@this"/>
                            <p:menuitem value="Detalle Pago" oncomplete="PF('dlgDetallePago').show();" update="formDetPago" icon="ui-icon-calculator" rendered="#{pagoPrediales.emisionSeleccionada ne null and (pagoPrediales.emisionSeleccionada.estadoLiquidacion.id eq 1 or pagoPrediales.emisionSeleccionada.estadoLiquidacion.id eq 2)}" process="@this"/>
                            <p:menuitem value="Editar nombre del contribuyente" oncomplete="PF('dlgNombCont').show();" actionListener="#{pagoPrediales.setNombreContribuyente()}" update="formNombCont" icon="ui-icon-comment" rendered="#{pagoPrediales.emisionSeleccionada ne null}" process="@this"/>
                        </p:contextMenu>
                    </p:panel>

                </p:tab>
            </p:tabView>
        </h:form>

        <p:dialog widgetVar="dlgCertificado" header="DATOS" appendTo="@(body)" responsive="true" closable="true" closeOnEscape="true" modal="true" position="center">
            <h:form id="formCertificado">
                <p:panelGrid styleClass="noBorder" columns="1" style="font-size: 14px;font-weight: bolder;text-align: center;">
                    Nº Certificado:
                    <p:inputText value="#{pagoPrediales.numCertificado}"/>
                </p:panelGrid>
                <br/>
                <center>
                    <p:commandButton styleClass="btnStyle" value="Generar Reporte" icon="ui-icon-print" actionListener="#{pagoPrediales.generarCertificado()}"/>
                </center>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgCertificadoRuralSv" header="DATOS" appendTo="@(body)" responsive="true" closable="true" closeOnEscape="true" modal="true" position="center">
            <h:form id="formCertificadoRuralSv">
                <h:panelGrid styleClass="noBorder" columns="6" style="font-size: 14px;font-weight: bolder;text-align: center;">
                    Nº Certificado:
                    <p:inputText value="#{pagoPrediales.numCertificado}"/>
                    Ubicaciòn:
                    <p:inputText value="#{pagoPrediales.ubicacion}"/>
                    Clave Catastral
                    <p:inputText value="#{pagoPrediales.codCatastralRural}"/>
                </h:panelGrid>
                <br/>
                <p:editor id="eCertificado" value="#{pagoPrediales.detalle}" style="text-align: justify; width: 100%"/>
                <center>
                    <p:commandButton styleClass="btnStyle" value="Generar Reporte" icon="ui-icon-print" actionListener="#{pagoPrediales.generateCertRural()}" />
                </center>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgCertificadoSv" header="DATOS" appendTo="@(body)" responsive="true" closable="true" closeOnEscape="true" modal="true" position="center">
            <h:form id="formCertificadoSv">
                <h:panelGrid styleClass="noBorder" columns="6" style="font-size: 14px;font-weight: bolder;text-align: center;">
                    Nº Certificado:
                    <p:inputText value="#{pagoPrediales.numCertificado}"/>
                </h:panelGrid>
                <br/>
                <p:editor id="eCertificado" value="#{pagoPrediales.detalle}" style="text-align: justify; width: 100%"/>
                <center>
                    <p:commandButton styleClass="btnStyle" rendered="#{!pagoPrediales.tipoCert}" value="Generar Reporte" icon="ui-icon-print" actionListener="#{pagoPrediales.generarCertificado()}" />
                    <p:commandButton styleClass="btnStyle"  rendered="#{pagoPrediales.tipoCert}" value="Generar Reporte" icon="ui-icon-print" actionListener="#{pagoPrediales.generarCertificadoNoContribuyente()}" />
                </center>
            </h:form>
        </p:dialog>



        <p:dialog id="dlgSolicitante" widgetVar="dlgSolicitante" header="Listado de contribuyentes" appendTo="@(body)" width="700" responsive="true" closable="true" closeOnEscape="true" modal="true">
            <h:form id="frmSolicitante">
                <p:dataTable id="dtSolicitante" value="#{pagoPrediales.solicitantes}" var="s" selection="#{pagoPrediales.ente}" 
                             rowKey="#{s.id}" style="width: 100%" lazy="true" reflow="true" paginator="true" rows="10" 
                             selectionMode="single" filterEvent="enter" paginatorPosition="top">
                    <f:facet name="header">Seleccione Contribuyente</f:facet>
                    <p:column headerText="No. Identificacion" sortBy="#{s.ciRuc}" filterBy="#{s.ciRuc}" filterMatchMode="contains" filterStyle="width: 95%;">
                        <h:outputText value="#{s.ciRuc}"/>
                    </p:column>
                    <p:column headerText="Apellidos" filterBy="#{s.apellidos}" sortBy="#{s.apellidos}" filterMatchMode="contains" filterStyle="width: 95%;">
                        <h:outputText value="#{s.apellidos}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Nombres" filterBy="#{s.nombres}" sortBy="#{s.nombres}" filterMatchMode="contains" filterStyle="width: 95%;">
                        <h:outputText value="#{s.nombres}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Razon Social" filterBy="#{s.razonSocial}" sortBy="#{s.razonSocial}"  filterMatchMode="contains" filterStyle="width: 95%;">
                        <h:outputText value="#{s.razonSocial}" style="text-transform: uppercase"/>
                    </p:column>
                    <f:facet name="footer">
                        <p:commandButton id="btnSeleccionar" value="Seleccionar" update="mainForm:tvRecaudaciones:consulta" style="height: 30px" oncomplete="PF('dlgSolicitante').hide()"/>
                    </f:facet>
                </p:dataTable>         
            </h:form>
        </p:dialog>

        <p:dialog id="dlgSolicitanteRustico" widgetVar="dlgSolicitanteRustico" header="Listado de contribuyentes" appendTo="@(body)" width="700" responsive="true" closable="true" closeOnEscape="true" modal="true">
            <h:form id="frmSolicitanteRustico">
                <p:dataTable id="dtSolicitanteRustico" value="#{pagoPrediales.propietariosRustico}" var="s" selection="#{pagoPrediales.predioRustico}" 
                             rowKey="#{s.id}" style="width: 100%" lazy="true" reflow="true" paginator="true" rows="10" filterEvent="enter" paginatorPosition="top">
                    <f:facet name="header">Seleccione Contribuyente</f:facet>
                    <p:column selectionMode="single" style="width: 8%; text-align: center"  />
                    <p:column headerText="No. Identificacion" sortBy="#{s.propietario.ciRuc}" filterBy="#{s.propietario.ciRuc}" filterMatchMode="contains" filterStyle="width: 95%;">
                        <h:outputText value="#{s.propietario.ciRuc}"/>
                    </p:column>
                    <p:column headerText="Apellidos" filterBy="#{s.propietario.apellidos}" sortBy="#{s.propietario.apellidos}" filterMatchMode="contains" filterStyle="width: 95%;">
                        <h:outputText value="#{s.propietario.apellidos}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Nombres" filterBy="#{s.propietario.nombres}" sortBy="#{s.propietario.nombres}" filterMatchMode="contains" filterStyle="width: 95%;">
                        <h:outputText value="#{s.propietario.nombres}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Razon Social" filterBy="#{s.propietario.razonSocial}" sortBy="#{s.propietario.razonSocial}"  filterMatchMode="contains" filterStyle="width: 95%;">
                        <h:outputText value="#{s.propietario.razonSocial}" style="text-transform: uppercase"/>
                    </p:column>
                    <f:facet name="footer">
                        <p:commandButton id="btnSeleccionar" value="Seleccionar" update="mainForm:tvRecaudaciones:consultaRural" style="height: 30px" oncomplete="PF('dlgSolicitanteRustico').hide()"/>
                    </f:facet>
                </p:dataTable>         
            </h:form>
        </p:dialog> 

        <p:dialog id="dlgSolicitanteFox" widgetVar="dlgSolicitanteFox" header="Listado de contribuyentes" appendTo="@(body)" width="800" responsive="true" closable="true" closeOnEscape="true" modal="true">
            <h:form id="frmSolicitanteFox">
                <p:dataTable id="dtSolicitanteFox" value="#{pagoPrediales.emisionesRuralesExcelLazy}" 
                             var="s" 
                             selection="#{pagoPrediales.predioUrbanoFox}" 
                             rowKey="#{s.id}" style="width: 100%" lazy="true" paginator="true" rows="10" 
                             filterEvent="enter" >
                    <f:facet name="header">Seleccione Contribuyente</f:facet>
                    <p:column selectionMode="single" style="width:30px;text-align:center" />
                    <p:column headerText="Clave Castatral" sortBy="#{s.codigoCatastral}" filterBy="#{s.codigoCatastral}" filterMatchMode="contains" filterStyle="width: 95%;">
                        <h:outputText value="#{s.codigoCatastral}"/>
                    </p:column>
                    <p:column headerText="Apellidos - Nombres" filterBy="#{s.apellidos}" sortBy="#{s.apellidos}" filterMatchMode="contains" filterStyle="width: 95%;">
                        <h:outputText value="#{s.apellidos}" style="text-transform: uppercase"/>
                    </p:column>
                    <f:facet name="footer">
                        <p:commandButton id="btnSeleccionarFox" value="Seleccionar" update="mainForm:tvRecaudaciones:consultaFox" style="height: 30px" oncomplete="PF('dlgSolicitanteFox').hide()"/>
                    </f:facet>
                </p:dataTable>         
            </h:form>
        </p:dialog>

        <p:dialog header="Listado de Predios - Seleccione Predio" widgetVar="dlgPrediosConsulta" appendTo="@(body)" width="90%" responsive="true" closable="true" closeOnEscape="true" modal="true">
            <h:form id="frmPredios">
                <p:dataTable value="#{pagoPrediales.prediosConsulta}" var="p" selectionMode="single" selection="#{pagoPrediales.predioConsulta}" rowKey="#{p.id}" style="width: 90%; margin: 0 auto;" reflow="true" paginator="true" rows="10" filterEvent="enter" paginatorPosition="top">
                    <p:column headerText="No. Predio" sortBy="#{p.numPredio}" width="10%" filterBy="#{p.numPredio}" filterMatchMode="exact" filterStyle="width: 95%;"><h:outputText value="#{p.numPredio}"/></p:column>
                    <p:column headerText="Cod. Predial" filterBy="#{p.claveCat}" filterMatchMode="contains" filterStyle="width: 90%;"><h:outputText value="#{p.claveCat}"/></p:column>
                    <p:column headerText="Propietario" filterBy="#{p.nombrePropietarios}" filterMatchMode="contains"  filterStyle="width: 90%;"><h:outputText value="#{p.nombrePropietarios}"/></p:column>
                    <p:column headerText="Urbanizacion" filterBy="#{p.direccion}" filterMatchMode="contains" filterStyle="width: 90%;">
                        <h:outputText value="#{p.direccion}"/>
                    </p:column>
                    <p:column headerText="Mz" width="10%" filterBy="#{p.mz}" filterMatchMode="exact" filterStyle="width: 90%;"><h:outputText value="#{p.mz}"/></p:column>
                    <p:column headerText="Sl" width="10%"><h:outputText value="#{p.solar}"/></p:column>
                    <f:facet name="footer">
                        <p:commandButton value="Seleccionar" actionListener="#{pagoPrediales.seleccionarPredio(1)}" update="mainForm:tvRecaudaciones:datos"/>
                        <p:spacer width="15"/>
                        <p:commandButton value="Seleccionar Todo" actionListener="#{pagoPrediales.seleccionarPredio(3)}" update="mainForm:tvRecaudaciones:datos"/>
                    </f:facet>
                </p:dataTable>         
            </h:form>
        </p:dialog>

        <p:dialog header="Listado de Predios - Seleccione Predio" widgetVar="dlgPrediosRuralConsulta" appendTo="@(body)" width="90%" responsive="true" closable="true" closeOnEscape="true" modal="true">
            <h:form id="frmPrediosRural">
                <p:dataTable value="#{pagoPrediales.contribuyenteConsulta.catPredioRusticos}" var="pr" selectionMode="single" 
                             selection="#{pagoPrediales.predioRuralConsulta}" rowKey="#{pr.id}" style="width: 90%; margin: 0 auto;" reflow="true" paginator="true" rows="10" filterEvent="enter" paginatorPosition="top">
                    <p:column headerText="Reg. Catastral" sortBy="#{pr.regCatastral}" filterBy="#{pr.regCatastral}" filterMatchMode="exact" filterStyle="width: 95%;"><h:outputText value="#{pr.regCatastral}"/></p:column>
                    <p:column headerText="Id Predial"><h:outputText value="#{pr.idPredial}"/></p:column>
                    <p:column headerText="Parroquia"><h:outputText value="#{pr.parroquia.descripcion}"/></p:column>
                    <p:column headerText="Sitio"><h:outputText value="#{pr.sitio}"/></p:column>
                    <p:column headerText="Nombre"><h:outputText value="#{pr.nombrePredio}"/></p:column>
                    <f:facet name="footer">
                        <p:commandButton value="Seleccionar" actionListener="#{pagoPrediales.seleccionarPredio(2)}" update="mainForm:tvRecaudaciones:datosRural"/>
                    </f:facet>
                </p:dataTable>         
            </h:form>
        </p:dialog>

        <p:dialog header="Procesar Pago" widgetVar="dlgProcesar" resizable="false" closeOnEscape="true" modal="true" width="90%" height="90%" position="center">
            <h:form id="formProcesar">
                <p:fieldset legend="PAGO: #{pagoPrediales.emisionSeleccionada.tipoLiquidacion.prefijo} - #{pagoPrediales.emisionSeleccionada.tipoLiquidacion.nombreTitulo}" style="font-weight: bold; font-size: 14px;">
                    <p:dataTable value="#{pagoPrediales.emisionesACobrar}" var="emision" scrollable="true" scrollHeight="60" rowKey="#{emision.id}">
                        <p:column headerText="No." style="text-align: center;"  width="90">         <p:outputLabel value="#{emision.numLiquidacion}"/>  </p:column>
                        <p:column headerText="Año" style="text-align: center;" width="80">          <p:outputLabel value="#{emision.anio}"/>            </p:column>
                        <p:column headerText="N. Predio" style="text-align: center;" width="100">   <p:outputLabel value="#{emision.predio.numPredio}"/><p:outputLabel value="#{emision.predioRustico.numPredioRustico}"/></p:column>
                        <p:column headerText="Contribuyente" style="text-align: center" width="200">

                            <!--<p:outputLabel value="# {emision.comprador.apellidos}# {emision.comprador.nombres}# {emision.comprador.razonSocial}# {emision.comprador.nombreComercial}"/>-->
                            <p:outputLabel value="#{emision.comprador==null?emision.nombreComprador :emision.comprador.nombreCompleto}"/>
                        </p:column>
                    </p:dataTable>
                    <p:panelGrid id="infEmisiones" styleClass="noBorder" style="width: 100%;">
                        <p:row>
                            <p:column>
                                <p:outputLabel value="Valor a Cobrar" style="font-size: 14px; font-weight: bolder;"/><br/>
                                <p:outputLabel value="#{pagoPrediales.totalEmisiones}" style="font-size: 18px; font-weight: bolder; color: blue;"/>
                            </p:column>
                            <p:column>
                                <p:outputLabel value="Saldo" style="font-size: 14px; font-weight: bolder;"/><br/>
                                <p:outputLabel value="#{pagoPrediales.totalEmisiones+pagoPrediales.modelPago.valorSaldoPagoFinal}" style="font-size: 18px; font-weight: bolder; color: blue;"/>
                            </p:column>
                            <p:column>
                                <p:outputLabel value="Observaciones" style="font-size: 14px; font-weight: bolder;"/><br/>
                                <p:inputTextarea value="#{pagoPrediales.modelPago.observacion}" style="font-size: 12px; font-weight: bolder; width: 90%;"/>
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                </p:fieldset>

                <p:fieldset legend="Detalle de Cobro" >
                    <p:panelGrid id="detCobro" style="width: 100%;" styleClass="noBorder">
                        <p:row>
                            <p:column style="width: 100px;">
                                <p:outputLabel value="Contado" style="font-weight: bolder;"/>
                            </p:column>
                            <p:column style="width: 100px;">
                                <p:inputText value="#{pagoPrediales.modelPago.valorTotalEfectivo}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/>
                            </p:column>
                            <p:column rowspan="6">
                                <p:selectBooleanCheckbox value="#{pagoPrediales.variosPagos}" itemLabel="** REALIZAR VARIOS PAGOS **" style="font-weight: bold; font-size: 14px;"/>
                                <p:tabView>
                                    <p:tab title="1. EFECTIVO">
                                        <!--<p:fieldset legend="1. EFECTIVO">-->
                                        <p:panelGrid columns="2">
                                            <p:outputLabel value="Valor Recibido"/>
                                            <p:inputText type="number" value="#{pagoPrediales.modelPago.valorRecibido}" style="font-weight: bolder; font-size: 12px;">
                                            </p:inputText>
                                            <p:outputLabel value="Valor a Cobrar"/>
                                            <p:inputText type="number" value="#{pagoPrediales.modelPago.valorCobrar}" style="font-weight: bolder; font-size: 12px;">
                                                <p:ajax event="blur" listener="#{pagoPrediales.modelPago.calcularEfectivo()}" update="formProcesar:detCobro, formProcesar:infEmisiones" process="@all"/>
                                            </p:inputText>
                                            <p:outputLabel value="Cambio"/><p:inputText value="#{pagoPrediales.modelPago.valorCambio}" readonly="true" style="font-weight: bolder; font-size: 12px;"/>
                                        </p:panelGrid>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                    <p:tab title="2. NOTA DE CREDITO">
                                        <!--<p:fieldset legend="2. NOTA DE CREDITO">-->
                                        <p:panelGrid>
                                            <p:row>
                                                <p:column>
                                                    <p:outputLabel value="# Credito"/><br/>
                                                    <p:inputText value="#{pagoPrediales.modelPago.pagoNotaCredio.numCredito}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Fecha"/><br/>
                                                    <p:calendar value="#{pagoPrediales.modelPago.pagoNotaCredio.fecha}" pattern="dd/MM/yyyy"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Valor"/><br/>
                                                    <p:inputText type="number" value="#{pagoPrediales.modelPago.pagoNotaCredio.valor}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:commandButton value="Agregar" actionListener="#{pagoPrediales.modelPago.agregarPago(3)}" update="formProcesar:detCobro, formProcesar:infEmisiones"/>
                                                </p:column>
                                            </p:row>
                                        </p:panelGrid>
                                        <p:dataTable id="dtNC" var="nc" value="#{pagoPrediales.modelPago.listPagoNotaCredio}" style="margin-bottom:0; width: 700px;">
                                            <p:column headerText="# Credito"><h:outputText value="#{nc.numCredito}" /></p:column>
                                            <p:column headerText="Fecha"><h:outputText value="#{nc.fecha}" ><f:convertDateTime pattern="dd/MM/YYYY"/></h:outputText></p:column>
                                            <p:column headerText="Valor"><h:outputText value="#{nc.valor}" /></p:column>
                                            <p:column headerText="Acción">
                                                <p:commandButton value="Eliminar" actionListener="#{pagoPrediales.modelPago.eliminarPagoNC(nc)}" update="formProcesar:detCobro, formProcesar:infEmisiones"/>
                                            </p:column>
                                        </p:dataTable>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                    <p:tab title="3. CHEQUE">
                                        <!--<p:fieldset legend="3. CHEQUE">-->
                                        <p:panelGrid>
                                            <p:row>
                                                <p:column>
                                                    <p:outputLabel value="Banco"/><br/>
                                                    <p:selectOneMenu value="#{pagoPrediales.modelPago.pagoCheque.banco}" effect="fade" converter="entityConverter">
                                                        <f:attribute name="name" value="RenEntidadBancaria"/>
                                                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                                        <f:selectItems value="#{pagoPrediales.bancos}" var="banco" itemLabel="#{banco.descripcion}" itemValue="#{banco}"/>
                                                    </p:selectOneMenu>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Cheque"/><br/>
                                                    <p:inputText value="#{pagoPrediales.modelPago.pagoCheque.numCheque}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Cuenta"/><br/>
                                                    <p:inputText value="#{pagoPrediales.modelPago.pagoCheque.numCuenta}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Valor"/><br/>
                                                    <p:inputText type="number" value="#{pagoPrediales.modelPago.pagoCheque.valor}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:commandButton value="Agregar" actionListener="#{pagoPrediales.modelPago.agregarPago(4)}" update="formProcesar:detCobro, formProcesar:infEmisiones"/>
                                                </p:column>
                                            </p:row>
                                        </p:panelGrid>
                                        <p:dataTable id="dtCh" var="ch" value="#{pagoPrediales.modelPago.listPagoCheque}" style="margin-bottom:0; width: 700px;">
                                            <p:column headerText="BANCO"><h:outputText value="#{ch.banco.descripcion}" /></p:column>
                                            <p:column headerText="# Cheque"><h:outputText value="#{ch.numCheque}" /></p:column>
                                            <p:column headerText="# Cuenta"><h:outputText value="#{ch.numCuenta}" /></p:column>
                                            <p:column headerText="# Valor"><h:outputText value="#{ch.valor}" /></p:column>
                                            <p:column headerText="Acción">
                                                <p:commandButton value="Eliminar" actionListener="#{pagoPrediales.modelPago.eliminarPagoCh(ch)}" update="formProcesar:detCobro, formProcesar:infEmisiones"/>
                                            </p:column>
                                        </p:dataTable>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                    <p:tab title="4. TARJETA DE CREDITO">
                                        <!--<p:fieldset legend="4. TARJETA DE CREDITO">-->
                                        <p:panelGrid>
                                            <p:row>
                                                <p:column>
                                                    <p:outputLabel value="Banco"/><br/>
                                                    <p:selectOneMenu value="#{pagoPrediales.modelPago.pagoTarjetaCredito.banco}" effect="fade" converter="entityConverter">
                                                        <f:attribute name="name" value="RenEntidadBancaria"/>
                                                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                                        <f:selectItems value="#{pagoPrediales.tarjetas}" var="card" itemLabel="#{card.descripcion}" itemValue="#{card}"/>
                                                    </p:selectOneMenu>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Tarjeta"/><br/>
                                                    <p:inputText value="#{pagoPrediales.modelPago.pagoTarjetaCredito.numTarjeta}" size="14"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Fecha Caduca"/><br/>
                                                    <p:calendar value="#{pagoPrediales.modelPago.pagoTarjetaCredito.fechaCaducidad}" pattern="dd/MM/yyyy" size="10"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Autorización"/><br/>
                                                    <p:inputText value="#{pagoPrediales.modelPago.pagoTarjetaCredito.autorizacion}" size="14"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Baucher"/><br/>
                                                    <p:inputText value="#{pagoPrediales.modelPago.pagoTarjetaCredito.baucher}" size="14"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Titular"/><br/>
                                                    <p:inputText value="#{pagoPrediales.modelPago.pagoTarjetaCredito.nombreTitular}" size="14"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Valor"/><br/>
                                                    <p:inputText type="number" value="#{pagoPrediales.modelPago.pagoTarjetaCredito.valor}" style="width:90px; "/>
                                                </p:column>
                                                <p:column>
                                                    <br/>
                                                    <p:commandButton value="Agregar" actionListener="#{pagoPrediales.modelPago.agregarPago(2)}" update="formProcesar:detCobro, formProcesar:infEmisiones"/>
                                                </p:column>
                                            </p:row>
                                        </p:panelGrid>
                                        <p:dataTable id="dtTC" var="tc" value="#{pagoPrediales.modelPago.listPagoTarjetaCredito}" style="margin-bottom:0; width: 700px;">
                                            <p:column headerText="BANCO"><h:outputText value="#{tc.banco.descripcion}" /></p:column>
                                            <p:column headerText="# Tarjeta"><h:outputText value="#{tc.numTarjeta}" /></p:column>
                                            <p:column headerText="Fecha Caducidad"><h:outputText value="#{tc.fechaCaducidad}"><f:convertDateTime pattern="dd/MM/YYYY"/></h:outputText></p:column>
                                            <p:column headerText="# Autorización"><h:outputText value="#{tc.autorizacion}" /></p:column>
                                            <p:column headerText="Baucher"><h:outputText value="#{tc.baucher}" /></p:column>
                                            <p:column headerText="Titular"><h:outputText value="#{tc.nombreTitular}" /></p:column>
                                            <p:column headerText="Valor"><h:outputText value="#{tc.valor}" /></p:column>
                                            <p:column headerText="Acción">
                                                <p:commandButton value="Eliminar" actionListener="#{pagoPrediales.modelPago.eliminarPagoTC(tc)}" update="formProcesar:detCobro, formProcesar:infEmisiones"/>
                                            </p:column>
                                        </p:dataTable>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                    <p:tab title="5. TRANSFERENCIA">
                                        <!--<p:fieldset legend="5. TRANSFERENCIA">-->
                                        <p:panelGrid>
                                            <p:row>
                                                <p:column>
                                                    <p:outputLabel value="Banco"/><br/>
                                                    <p:selectOneMenu value="#{pagoPrediales.modelPago.pagoTransferencia.banco}" effect="fade" converter="entityConverter">
                                                        <f:attribute name="name" value="RenEntidadBancaria"/>
                                                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                                        <f:selectItems value="#{pagoPrediales.bancos}" var="banco" itemLabel="#{banco.descripcion}" itemValue="#{banco}"/>
                                                    </p:selectOneMenu>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Transferencia"/><br/>
                                                    <p:inputText value="#{pagoPrediales.modelPago.pagoTransferencia.numTransferencia}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Fecha"/><br/>
                                                    <p:calendar value="#{pagoPrediales.modelPago.pagoTransferencia.fecha}" pattern="dd/MM/yyyy" rendered="true"/>
                                                    <p:calendar value="#{pagoPrediales.modelPago.pagoTransferencia.fecha}" pattern="dd/MM/yyyy" rendered="false">
                                                        <p:ajax event="dateSelect" listener="#{pagoPrediales.actualizarValorPago}" update="formProcesar:infEmisiones"/>
                                                    </p:calendar>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Valor"/><br/>
                                                    <p:inputText type="number" value="#{pagoPrediales.modelPago.pagoTransferencia.valor}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:commandButton value="Agregar" actionListener="#{pagoPrediales.modelPago.agregarPago(5)}" update="formProcesar:detCobro, formProcesar:infEmisiones"/>
                                                </p:column>
                                            </p:row>
                                        </p:panelGrid>
                                        <p:dataTable id="dtT" var="t" value="#{pagoPrediales.modelPago.listPagoTransferencia}" style="margin-bottom:0; width: 700px;">
                                            <p:column headerText="Banco"><h:outputText value="#{t.banco.descripcion}" /></p:column>
                                            <p:column headerText="# Transferencia"><h:outputText value="#{t.numTransferencia}" /></p:column>
                                            <p:column headerText="Fecha"><h:outputText value="#{t.fecha}"><f:convertDateTime pattern="dd/MM/YYYY"/></h:outputText></p:column>
                                            <p:column headerText="Valor"><h:outputText value="#{t.valor}" /></p:column>
                                            <p:column headerText="Acción">
                                                <p:commandButton value="Eliminar" actionListener="#{pagoPrediales.modelPago.eliminarPagoTransferencia(t)}" update="formProcesar:detCobro, formProcesar:infEmisiones"/>
                                            </p:column>
                                        </p:dataTable>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                    <p:tab title="6.- COMPENSACIONES">
                                        <!--<p:fieldset legend="1. EFECTIVO">-->
                                        <p:panelGrid columns="2">
                                            <p:outputLabel value="Valor de Compensación"/>
                                            <p:inputText type="number" value="#{pagoPrediales.modelPago.valorRecibidoCompensacion}" style="font-weight: bolder; font-size: 12px;">
                                            </p:inputText>
                                            <p:outputLabel value="Valor a Cobrar"/>
                                            <p:inputText type="number" value="#{pagoPrediales.modelPago.valorCobrarCompensacion}" style="font-weight: bolder; font-size: 12px;">
                                                <p:ajax event="blur" listener="#{pagoPrediales.modelPago.calcularCompensacion()}" update="formProcesar:detCobro, formProcesar:infEmisiones" process="@all"/>
                                            </p:inputText>
                                            <p:outputLabel value="Cambio"/><p:inputText value="#{pagoPrediales.modelPago.valorCambioCompensacion}" readonly="true" style="font-weight: bolder; font-size: 12px;"/>
                                        </p:panelGrid>
                                        <!--</p:fieldset>-->
                                    </p:tab>

                                </p:tabView>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Notas Credito" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{pagoPrediales.modelPago.valorTotalNotasCredito}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Cheque" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{pagoPrediales.modelPago.valorTotalCheques}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Tarjeta" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{pagoPrediales.modelPago.valorTotalTarjetas}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Transferencia" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{pagoPrediales.modelPago.valorTotalTransferencias}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Compensaciones" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{pagoPrediales.modelPago.valorTotalCompesacion}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Total" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{pagoPrediales.modelPago.valorTotal}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px; color: red;"/></p:column>
                        </p:row>
                    </p:panelGrid>                    
                </p:fieldset>
                <p:panel id="botones">
                    <center>
                        <p:commandButton value="Procesar" styleClass="btnStyle" actionListener="#{pagoPrediales.realizarPago}" icon="ui-icon-circle-check" 
                                         rendered="#{!pagoPrediales.pagoRealizado and !pagoPrediales.esPagoCuota}" update="botones" oncomplete="PF('dlgProcesar').hide();" />
                        <p:commandButton value="Procesar" styleClass="btnStyle" actionListener="#{pagoPrediales.realizarPagoCuotas}" icon="ui-icon-circle-check" 
                                         rendered="#{!pagoPrediales.pagoRealizado and pagoPrediales.esPagoCuota}" update="botones" oncomplete="PF('dlgProcesar').hide();" />
                        
                            <!--<p:confirm header="Confirmacion" message="Realizar Pago?" icon="ui-icon-alert" />-->
                        <!--</p:commandButton>-->
                        <p:spacer width="25"/>
                        <p:commandButton value="Cancelar" styleClass="btnStyle" oncomplete="PF('dlgProcesar').hide();" icon="ui-icon-circle-close"/>
                    </center>
                </p:panel>
                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                </p:confirmDialog>
            </h:form>
        </p:dialog>

        <p:dialog header="ADVERTENCIA" widgetVar="dlgMensaje" resizable="false" closeOnEscape="true" modal="true" width="200">
            <h:form id="formMensaje">
                <p:panelGrid styleClass="noBorder" columns="1">
                    <p:outputLabel value="El predio consultado tiene Titulos de Credito en COACTIVA!!!" style="font-size: 14px;font-weight: bolder;text-align: center;color: #0033FF;"/>
                </p:panelGrid>
            </h:form>
        </p:dialog>

        <p:dialog header="Info" widgetVar="dlgMensajeExo" resizable="false" closeOnEscape="true" modal="true" width="200">
            <h:form id="formMensajeExo">
                <p:panelGrid styleClass="noBorder" columns="1">
                    <p:outputLabel value="#{pagoPrediales.mensajeExoneracion}" style="font-size: 14px;font-weight: bolder;text-align: center;color: #0033FF;"/>
                </p:panelGrid>
            </h:form>
        </p:dialog>

        <p:dialog header="Detalle Emision" widgetVar="dlgDetalle" resizable="false" closeOnEscape="true" modal="true" width="80%" position="center">
            <h:form id="formDetEmision">
                <dialog:detalleLiquidacion liquidacion="#{pagoPrediales.emisionSeleccionada}"/>
                <center><p:commandButton value="Aceptar" oncomplete="PF('dlgDetalle').hide();" styleClass="btnStyle"/></center>
            </h:form>
        </p:dialog>

        <p:dialog header="Detalle Pago" widgetVar="dlgDetallePago" resizable="false" closeOnEscape="true" modal="true" width="80%" position="center">
            <h:form id="formDetPago">
                <p:outputLabel value="Total a pagar: #{pagoPrediales.emisionSeleccionada.totalPago}" style="font-size: 14px; font-weight: bold"/>
                <br/>
                <p:outputLabel value="Saldo: #{pagoPrediales.emisionSeleccionada.pagoFinal}" style="font-size: 14px; font-weight: bold"/>
                <br/>
                <dialog:detallePago liquidacion="#{pagoPrediales.emisionSeleccionada}"/>
                <center><p:commandButton value="Aceptar" oncomplete="PF('dlgDetallePago').hide();" styleClass="btnStyle"/></center>
            </h:form>
        </p:dialog>

        <p:dialog header="Registro de Nueva Clave" widgetVar="dlgClaveAnterior" resizable="false" closeOnEscape="true" modal="true"  position="center">
            <h:form id="formClaveAnterior">
                <div align="center">
                    <p:outputLabel value="Escriba Clave Anterior" style="font-size: 14px; font-weight: bold"/>
                    <br/>
                    <p:inputText value="#{claveAnteriorRevision.anterioresRevision.clave}" maxlength="18" style="font-size: 14px; font-weight: bold"/>
                    <br/>
                    <p:outputLabel value="Nombres del Contribuyente" style="font-size: 14px; font-weight: bold"/>
                    <br/>
                    <p:inputText value="#{claveAnteriorRevision.anterioresRevision.nombresAme}" maxlength="18" style="font-size: 14px; font-weight: bold"/>
                    <br/>
                    <br/>
                    <center><p:commandButton value="Grabar" actionListener="#{claveAnteriorRevision.saveRevision(claveAnteriorRevision.anterioresRevision)}" styleClass="btnStyle"/></center>
                </div>

            </h:form>
        </p:dialog>

        <p:dialog header="Editar nombre de contribuyente" widgetVar="dlgNombCont" resizable="false" closeOnEscape="true" modal="true" width="50%" position="center">
            <h:form id="formNombCont">
                <center>
                    <p:tabView  id="tabEditEnte">
                        <p:tab title="Editar nombre">
                            <p:panelGrid columns="2" style="margin-top: 15px; margin-bottom: 15px;">
                                <h:outputText value="Nombre del contribuyente:" />
                                <p:inputText value="#{pagoPrediales.nombreContribuyente}" style="width: 450px;"/>
                            </p:panelGrid>
                            <!--                            <h:outputText value="Subir Documento:" />
                                                        <br></br>
                                                        <p:fileUpload dragDropSupport="false" fileUploadListener="#{pagoPrediales.handleFileUpload}" multiple="false"
                                                                      mode="advanced"
                                                                      fileLimit="1"
                                                                      label="Seleccionar"
                                                                      uploadLabel="Subir" cancelLabel="Cancelar"
                                                                      skinSimple="true"
                                                                      allowTypes="/(\.|\/)(pdf)$/" />-->

                            <p:commandButton value="Aceptar" update="mainForm" actionListener="#{pagoPrediales.actualizarContribuyente}" onclick="PF('dlgNombCont').hide();" styleClass="btnStyle">
                                <p:confirm header="Confirmacion" message="Está seguro/a que desea modificar el contribuyente?" icon="ui-icon-alert" />
                            </p:commandButton>
                            <p:commandButton value="Cancelar" onclick="PF('dlgNombCont').hide();" styleClass="btnStyle"/>
                        </p:tab>

                        <p:tab title="Historial de nombres">
                            <p:dataTable id="dtHistoric" value="#{pagoPrediales.modelNombresList}" var="datos" rows="5" paginator="true" paginatorPosition="top">
                                <p:column headerText="Usuario">
                                    <h:outputText value="#{datos.username}" />
                                </p:column>
                                <p:column headerText="Fecha">
                                    <h:outputText value="#{datos.fecha}" />
                                </p:column>
                                <p:column headerText="Nombre del contribuyente">
                                    <h:outputText value="#{datos.nombre}" />
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                    </p:tabView>
                </center>
            </h:form>
        </p:dialog>

        <!-- Mensaje Cuando se haya realizao pago por alguna entidad Bancaria -->
        <p:dialog header="Predio Pagado" widgetVar="dlgPagoBanco" resizable="false" closeOnEscape="true" modal="true" width="200">
            <h:form id="formPagoBanco">
                <p:panelGrid styleClass="noBorder" columns="1">
                    <p:outputLabel value="Ya se realizo el pago del predio por medio del banco" style="font-size: 14px;font-weight: bolder;text-align: center;color: #0033FF;"/>
                </p:panelGrid>
                <center>
                    <p:commandButton value="Aceptar" onclick="PF('dlgPagoBanco').hide()" styleClass="btnStyle"/>
                </center>
            </h:form>
        </p:dialog>
        <p:dialog header="Detalle del recalculo" widgetVar="dlgRecalculo" resizable="false" closeOnEscape="true" modal="true" width="40%" appendTo="@(body)">
            <h:form id="frmRecalculo">
                <p:panelGrid styleClass="noBorder" columns="2" layout="grid">
                    <p:outputLabel value="Avaluo Solar :" style="font-size: 14px;font-weight: bolder;text-align: center;"/>
                    <h:outputText value="#{pagoPrediales.valoracion.avaluoSolar}" />
                    <p:outputLabel value="Avaluo Construccion :" style="font-size: 14px;font-weight: bolder;text-align: center;"/>
                    <h:outputText value="#{pagoPrediales.valoracion.avaluoEdificacion}" />
                    <p:outputLabel value="Avaluo Municipal:" style="font-size: 14px;font-weight: bolder;text-align: center;"/>
                    <h:outputText value="#{pagoPrediales.valoracion.avaluoMunicipal}" />
                    <p:outputLabel value="Impuesto predial :" style="font-size: 14px;font-weight: bolder;text-align: center;"/>
                    <h:outputText value="#{pagoPrediales.valoracion.ipAct}" />
                    <p:outputLabel value="Tasa mantenimiento :" style="font-size: 14px;font-weight: bolder;text-align: center;"/>
                    <h:outputText value="#{pagoPrediales.valoracion.tasaMant}" />
                    <p:outputLabel value="Bomberos :" style="font-size: 14px;font-weight: bolder;text-align: center;"/>
                    <h:outputText value="#{pagoPrediales.valoracion.rbAct}" />
                    <p:outputLabel value="Recargo solar no edificado :" style="font-size: 14px;font-weight: bolder;text-align: center;"/>
                    <h:outputText value="#{pagoPrediales.valoracion.sneAct}" />
                    <p:outputLabel value="Banda Impositiva :" style="font-size: 14px;font-weight: bolder;text-align: center;"/>
                    <h:outputText value="#{pagoPrediales.valoracion.bandaImpositiva}" />
                </p:panelGrid>
                <center>
                    <p:commandButton value="Actualizar calculo" actionListener="#{pagoPrediales.recalcular()}" oncomplete="PF('dlgRecalculo').hide()" update=":mainForm:tvRecaudaciones:datos" styleClass="btnStyle"/>
                </center>
            </h:form>
        </p:dialog>


        <p:dialog widgetVar="dlgSolicitanteCertificado" header="Contribuyentes" width="900" height="90%" resizable="false" closable="true" closeOnEscape="true" modal="true">
            <h:form id="frmSolicitanteCertificado">
                <div align="right">
                    <p:commandButton id="btnNuevo" value="Agregar" style="height: 30px" actionListener="#{pagoPrediales.actualizarEnte()}" oncomplete="PF('dlgNewClient').show();" update="formNewClient"> 
                        <f:setPropertyActionListener target="#{pagoPrediales.tipoEnte}" value="#{1}" />
                    </p:commandButton>
                </div>
                <p:dataTable var="s" value="#{pagoPrediales.solicitantes}" style="width: 100%;text-align: center;" lazy="true" 
                             paginator="true" rows="10" filterEvent="enter" paginatorPosition="top"
                             selection="#{pagoPrediales.comprador}" rowKey="#{s.id}">
                    <p:column selectionMode="single" width="100" />
                    <p:column headerText="CI/RUC" sortBy="#{s.ciRuc}" width="150" filterBy="#{s.ciRuc}" filterStyle="width: 90%;">
                        <h:outputText value="#{s.ciRuc}"/>
                    </p:column>
                    <!--<p:column headerText="Apellidos Nombre/Razon Social" filterBy="# {s.nombresCompletos}" filterStyle="width: 90%;">
                        <h:outputText value="# {s.nombreCompleto}" style="text-transform: uppercase"/>
                    </p:column>-->
                    <p:column headerText="Apellidos" filterBy="#{s.apellidos}" sortBy="#{s.apellidos}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.apellidos}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Nombres" filterBy="#{s.nombres}" sortBy="#{s.nombres}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.nombres}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Razon Social" filterBy="#{s.razonSocial}" sortBy="#{s.razonSocial}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.razonSocial}" style="text-transform: uppercase"/>
                    </p:column>
                    <f:facet name="footer">
                        <p:commandButton value="Generar No Contribuyente" icon="ui-icon-plus" actionListener="#{pagoPrediales.seleccionar()}" style="height: 30px"/>
                        <p:commandButton value="Generar No Adeudar Rural" icon="ui-icon-plus" actionListener="#{pagoPrediales.seleccionarRural()}" style="height: 30px"/>
                    </f:facet>
                </p:dataTable>         
            </h:form>
        </p:dialog>

        <p:dialog id="dlgNuevoCliente" header="Ingreso de Cliente" widgetVar="dlgNewClient" modal="true" resizable="false" closeOnEscape="false" position="center">
            <h:form  id="formNewClient">
                <p:panelGrid styleClass="noBorder" style="width: 100%">
                    <p:row>
                        <p:column style="text-align: right"><p:outputLabel value="Tipo Persona:" style="font-weight: bolder"/></p:column>
                        <p:column>
                            <p:selectOneMenu value="#{pagoPrediales.tipoEnte}" style="width: 160px;">
                                <f:selectItem itemLabel="Natural" itemValue="1" />
                                <f:selectItem itemLabel="Jurídica" itemValue="2" />
                                <f:selectItem itemLabel="Excepcionales" itemValue="3" />
                                <p:ajax update="tabNewEnte"/>
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <p:tabView id="tabNewEnte" style="width: 640px;height: 400px">
                    <p:tab title="Datos Principales">
                        <p:panelGrid styleClass="noBorder" style="width: 100%">
                            <p:row>
                                <p:column colspan="4">
                                    <p:outputLabel value="NOTA: CAMPOS OBLIGATORIOS (*)" style="font-weight: bolder;color: #0033FF"/>
                                </p:column>
                            </p:row>
                            <p:row rendered="#{pagoPrediales.tipoEnte==3}">
                                <p:column colspan="4">
                                    <p:selectBooleanCheckbox value="#{pagoPrediales.excepcionalEmpresa}" itemLabel="EXCEPCIONALES JURIDICO:" style="float: left; font-weight: bold; font-size: 12px;">
                                        <p:ajax update="tabNewEnte" process="@this"/>
                                    </p:selectBooleanCheckbox>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="#{pagoPrediales.tipoEnte==1?'(*)Cédula:':pagoPrediales.tipoEnte==2?'(*)R.U.C.:':pagoPrediales.tipoEnte==3?'(*)Identificación:':''}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{pagoPrediales.registroEnte.ciRuc}" rendered="#{pagoPrediales.tipoEnte==1 or pagoPrediales.tipoEnte==2}">
                                        <p:ajax event="blur" listener="#{pagoPrediales.existeCedula()}" update="formNewClient"/>
                                    </p:inputText>
                                    <p:inputText readonly="true" value="Lo asigna el sistema" disabled="#{pagoPrediales.tipoEnte==3}" rendered="#{pagoPrediales.tipoEnte==3}"/>
                                </p:column>
                                <p:column>
                                    <p:outputLabel value="Fec. Nacimiento:" rendered="#{pagoPrediales.tipoEnte==1 or pagoPrediales.tipoEnte==3}" style="font-weight: bolder"/>
                                    <p:outputLabel value="Fec. Constitución:" rendered="#{pagoPrediales.tipoEnte==2}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column>
                                    <p:calendar value="#{pagoPrediales.registroEnte.fechaNacimiento}" placeholder="DÍA-MES-AÑO" maxdate="sysdate" pattern="dd-MM-yyyy" mask="true" />
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="(*)Nombres:" rendered="#{pagoPrediales.tipoEnte==1 or (pagoPrediales.tipoEnte==3 and !pagoPrediales.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                    <p:outputLabel value="(*)Razón Social:" rendered="#{pagoPrediales.tipoEnte==2 or (pagoPrediales.tipoEnte==3 and pagoPrediales.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{pagoPrediales.registroEnte.nombres}" rendered="#{pagoPrediales.tipoEnte==1 or (pagoPrediales.tipoEnte==3 and !pagoPrediales.excepcionalEmpresa)}" style="width: 100%"/>
                                    <p:inputText value="#{pagoPrediales.registroEnte.razonSocial}" rendered="#{pagoPrediales.tipoEnte==2 or (pagoPrediales.tipoEnte==3 and pagoPrediales.excepcionalEmpresa)}" style="width: 100%"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="(*)Apellidos:" rendered="#{pagoPrediales.tipoEnte==1 or (pagoPrediales.tipoEnte==3 and !pagoPrediales.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                    <p:outputLabel value="Nombre Comercial:" rendered="#{pagoPrediales.tipoEnte==2 or (pagoPrediales.tipoEnte==3 and pagoPrediales.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{pagoPrediales.registroEnte.apellidos}" rendered="#{pagoPrediales.tipoEnte==1 or (pagoPrediales.tipoEnte==3 and !pagoPrediales.excepcionalEmpresa)}" style="width: 100%"/>
                                    <p:inputText value="#{pagoPrediales.registroEnte.nombreComercial}" rendered="#{pagoPrediales.tipoEnte==2 or (pagoPrediales.tipoEnte==3 and pagoPrediales.excepcionalEmpresa)}" style="width: 100%"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Dirección:" style="font-weight: bolder"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{pagoPrediales.registroEnte.direccion}" style="width: 100%"/>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    </p:tab>
                </p:tabView>
                <div align="center">
                    <p:commandButton value="Guardar y Generar Cetificado No Contribuyente" icon="ui-icon-disk" actionListener="#{pagoPrediales.guardarEnte(true)}"/>
                    <p:commandButton value="Guardar y Generar Cetificado Predio Rural" icon="ui-icon-disk" actionListener="#{pagoPrediales.guardarEnte(false)}"/>
                </div>
            </h:form>
        </p:dialog>

    </ui:define>
</ui:composition>
