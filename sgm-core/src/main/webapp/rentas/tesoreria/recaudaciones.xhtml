<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/template/template.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:dialog="http://java.sun.com/jsf/composite/dialog">
    <ui:define name="top"><!--<p:outputLabel value="Titulos de Credito" style="font-weight: bolder; font-size: 14px;"/>--></ui:define>
    <ui:define name="content">
        <script src="../../resources/pfJs/keyPress.js" type="text/javascript"></script>
        <style type="text/css">
            .ui-datatable thead th, .ui-datatable tbody td, .ui-datatable tfoot td, .ui-datatable tfoot th{
                height : 10px;
                padding: 5px 10px;
            }            
        </style>
        <center>
            <h1>Recaudaciones</h1>
        </center>
        <h:form id="mainForm">
            <p:accordionPanel activeIndex="-1" rendered="#{userSession.userId ne 110}">
                <p:tab title="REPORTES - RECAUDADOR">
                    <h:panelGrid columns="3" styleClass="ui-panelgrid-blank" style="width: 100%;">
                        <h:panelGroup style="border-color: #252525; border-width: 1px; ">
                            <center>
                                <p:outputLabel value="Cierre Caja" style="font-size: 12px; font-weight: bold; padding: 0px; "/><br/>
                                <p:commandLink title="Cierre Caja" oncomplete="PF('dlgReportesRecaudador').show();" update="reporteRecaudaciones">
                                    <f:setPropertyActionListener target="#{recaudaciones.tipoReporte}" value="#{1}" />
                                    <p:graphicImage value="/css/homeIconsImages/icono_caja.png" height="40"/>
                                </p:commandLink>
                            </center>
                        </h:panelGroup>
                        <h:panelGroup style="border-color: #252525; border-width: 1px; ">
                            <center>
                                <p:outputLabel value="Recaudaciones por Transacción" style="font-size: 12px; font-weight: bold; padding: 0px; "/><br/>
                                <p:commandLink title="Recaudaciones por Transacción" oncomplete="PF('dlgReportesRecaudador').show();" update="reporteRecaudaciones">
                                    <f:setPropertyActionListener target="#{recaudaciones.tipoReporte}" value="#{2}" />
                                    <p:graphicImage value="/css/homeIconsImages/list_requirements.png" height="40"/>
                                </p:commandLink>
                            </center>
                        </h:panelGroup>
                        <h:panelGroup style="border-color: #252525; border-width: 1px; ">
                            <center>
                                <p:outputLabel value="Resumen Cheques" style="font-size: 12px; font-weight: bold; padding: 0px; "/><br/>
                                <p:commandLink title="Resumen Cheques" oncomplete="PF('dlgReportesRecaudador').show();" update="reporteRecaudaciones">
                                    <f:setPropertyActionListener target="#{recaudaciones.tipoReporte}" value="#{3}" />
                                    <p:graphicImage value="/css/homeIconsImages/format-indent-more.png" height="40"/>
                                </p:commandLink>
                            </center>
                        </h:panelGroup>
                    </h:panelGrid>
                </p:tab>
            </p:accordionPanel>
            <p:tabView id="tvRecaudaciones">
                <p:ajax event="tabChange" listener="#{recaudaciones.onChangeTab}"/>
                <p:tab id="cobroGenerales"  title="Cobros Generales">
                    <p:tree value="#{recaudaciones.root2}" var="node" dynamic="true" selectionMode="single" selection="#{recaudaciones.selectedNode}" style="float: left; width: 35%; font-weight: bold; height: 730px; overflow: auto; font-size: 13px;" rendered="#{userSession.userId ne 110}">
                        <p:ajax event="select" listener="#{recaudaciones.onNodeSelect}" update="mainForm:tvRecaudaciones:dtRubros"/>
                        <p:treeNode><h:outputText value="#{node.id}-#{node.nombreTransaccion}" /></p:treeNode>
                    </p:tree>
                    <p:dataTable id="dtRubros" var="rubro" value="#{recaudaciones.cobrosGenerales.tipoLiquidacion.renRubrosLiquidacionCollection}" selectionMode="single" rendered="#{userSession.userId ne 110}"
                                 selection="#{recaudaciones.rubroSelect}" rowKey="#{rubro.id}" style="text-align: center;float: right; width: 64%;" emptyMessage="Item no posee rubros." scrollable="true" scrollHeight="140">
                        <f:facet name="header">RUBROS POR TITULOS</f:facet>
                        <p:ajax event="rowSelect" listener="#{recaudaciones.onRowSelect()}"/>
                        <p:column headerText="Id" width="10%"> #{rubro.id} </p:column>
                        <p:column headerText="Descripcion" style="text-align: left; font-weight: bold;">#{rubro.descripcion} </p:column>

                        <p:column headerText="Valor" width="15%"> #{rubro.valor} </p:column>
                    </p:dataTable>
                    <p:panel id="panelDetalle" header="DETALLE DE TRANSACCION" style="float: right; width: 64%; height: 250px;" rendered="#{userSession.userId ne 110}">
                        <p:dataTable id="dtDetalle" var="det" value="#{recaudaciones.rubrosSeleccionado}" scrollable="true" scrollHeight="140" style="text-align: center;" rowIndexVar="index" emptyMessage="Sin elementos seleccionados...">
                            <p:column headerText="Descripcion" style="text-align: left;"> #{det.descripcion} </p:column>
                            <p:column headerText="Cantidad" width="75"><p:outputLabel value="#{det.cantidad}" /></p:column>
                            <p:column headerText="Valor" width="100"><h:outputText value="#{det.valor}"><f:convertNumber pattern="#0.00" locale="pt_BR"/></h:outputText></p:column>
                            <p:column headerText="Del." width="35">
                                <p:commandLink update="dtDetalle" actionListener="#{recaudaciones.deleteRubrosDetalle(index)}">
                                    <p:graphicImage value="/css/homeIconsImages/delete.png" height="16"/>   
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                        <h:panelGrid columns="2" styleClass="noBorder" style="margin: 0 auto;">
                            <p:outputLabel value="Valor Total: $" style="font-weight: bold; font-size: 14px;"/>
                            <p:inputText value="#{recaudaciones.cobrosGenerales.totalPago}" readonly="true" style="font-weight: bold; font-size: 14px;"/>
                        </h:panelGrid>
                    </p:panel>
                    <p:panel id="panelInfoAdc" header="INFORMACION ADICIONAL" style="float: right; width: 64%; height: 280px;" rendered="#{userSession.userId ne 110}">
                        <h:panelGrid style="width: 100%;" styleClass="noBorder">
                            <p:row>
                                <p:column style="font-weight: bolder;">CI/RUC: 
                                    <p:inputText value="#{recaudaciones.ciRucCobros}" />
                                    <p:inputText value="#{recaudaciones.cobrosGenerales.comprador.ciRuc}" rendered="false" readonly="true"/>
                                    <!--<p:inputText value="# {recaudaciones.cobrosGenerales.comprador.ciRuc}" rendered="# {recaudaciones.cobrosGenerales.comprador != null}"/>
                                    <p:inputText value="# {recaudaciones.cobrosGenerales.comprador.ciRuc}" rendered="# {recaudaciones.cobrosGenerales.comprador == null}"/>-->
                                </p:column>
                                <p:spacer width="5"/>
                                <p:column style="font-weight: bolder;">Nombres/Razon Social: 
                                    <p:inputText value="#{recaudaciones.cobrosGenerales.comprador.nombreCompleto}" rendered="#{recaudaciones.cobrosGenerales.comprador != null}" size="60" readonly="true"/>
                                    <p:inputText value="#{recaudaciones.cobrosGenerales.nombreComprador}" rendered="#{recaudaciones.cobrosGenerales.comprador == null}" size="60" readonly="false"/>
                                </p:column>

                                <p:spacer width="5"/>
                                <p:column><p:commandButton value="Buscar" styleClass="btnStyle" style="font-size: 12px;" icon="ui-icon-search" actionListener="#{recaudaciones.showDlgEntes(1)}" update="panelInfoAdc"/></p:column>
                                <p:column><p:commandButton value="Limpiar" style="font-size: 12px;" icon="ui-icon-refresh" actionListener="#{recaudaciones.limpiarDatosContribuyente()}" update="panelInfoAdc"/></p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="4"><p:outputLabel value="Observacion: " style="font-weight: bold; font-size: 14px;"/></p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="4"><p:inputTextarea value="#{recaudaciones.cobrosGenerales.observacion}" rows="3" style="width: 100%; font-size: 14px; font-weight: bold;"/></p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="4" style="text-align: center;">
                                    <p:commandButton value="Ingresar" 
                                                     styleClass="btnStyle" icon="ui-icon-circle-arrow-e" style="font-size: 13px;" 
                                                     actionListener="#{recaudaciones.seleccionarLiquidacion()}"/>
                                </p:column>
                            </p:row>
                        </h:panelGrid>
                    </p:panel>
                    <div style="clear: both"/>
                </p:tab>
                <p:tab id="tituloCredito" title="Titulos de Credito">
                    <p:dataTable id="dtLiquidaciones" reflow="true" paginator="true" lazy="true" rows="10" rowsPerPageTemplate="10,50,100" paginatorPosition="top"
                                 paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 value="#{recaudaciones.titulosCredito}" var="titulo" emptyMessage="No se encontraron elementos..." style="text-align: center;"
                                 selectionMode="single" rowKey="#{titulo.id}" selection="#{recaudaciones.liquidacion}" filterEvent="enter">
                        <p:ajax event="rowSelect" update="mainForm:tvRecaudaciones:opLiquidaciones"/>
                        <p:column id="tipoLiquidacion" headerText="Prefijo" width="80" filterBy="#{titulo.tipoLiquidacion.prefijo}" filterStyle="width: 95%;">
                            <p:outputLabel value="#{titulo.tipoLiquidacion.prefijo}" style="font-weight: bold;"/>
                        </p:column>
                        <p:column headerText="No. Liq." width="90" filterBy="#{titulo.numLiquidacion}" sortBy="#{titulo.numLiquidacion}" filterStyle="width: 95%;">
                            <p:outputLabel value="#{titulo.numLiquidacion}" style="font-weight: bold;"/>
                        </p:column>
                        <p:column headerText="Anio" width="80" filterBy="#{titulo.anio}" sortBy="#{titulo.anio}" filterStyle="width: 95%;">
                            <p:outputLabel value="#{titulo.anio}" style="font-weight: bold;"/>
                        </p:column>
                       
                        <p:column headerText="Procesar" width="140">
                            <p:commandButton value="#{userSession.userId ne 110?'Procesar':'VER DETALLE'}" icon="ui-icon-circle-arrow-e" styleClass="btnStyle" actionListener="#{recaudaciones.pagarLiquidacion(titulo)}" oncomplete="PF('dlgProcesar').show();" update="formProcesar"/>
                        </p:column>
                        <p:column id="identificacion" headerText="Identificacion" width="130" filterBy="#{titulo.comprador.ciRuc}" filterStyle="width: 95%;">
                            <p:outputLabel style="font-weight: bold; font-size: 13px;" value="#{titulo.comprador.ciRuc}"/>
                        </p:column>
                        <p:column headerText="Solicitante">
                            #{titulo.comprador ne null?titulo.comprador.nombreCompleto: (titulo.observacion.contains('|')?titulo.observacion.substring(0,titulo.observacion.indexOf('|')):titulo.nombreComprador)}
                        </p:column>
                        <p:column headerText="Valor" width="75"><p:outputLabel value="#{titulo.totalPago}" style="font-weight: bold;"/></p:column>
                        <p:column headerText="Saldo" width="75"><p:outputLabel value="#{titulo.saldo}" style="font-weight: bold;"/></p:column>
                        <p:column headerText="Estado" width="75"><p:outputLabel value="#{titulo.estadoLiquidacion.descripcion}" style="font-weight: bold;"/></p:column>
                    </p:dataTable>
                    <p:contextMenu id="opLiquidaciones" for="dtLiquidaciones">
                        <p:menuitem value="Detalle" icon="ui-icon-comment" oncomplete="PF('dlgDetalle').show();" update="formDetEmision" rendered="#{recaudaciones.liquidacion ne null}" process="@this" actionListener="#{recaudaciones.calculosAdicionales()}"/>
                        <p:menuitem value="Procesar" icon="ui-icon-gear" oncomplete="PF('dlgProcesar').show();" update="formProcesar" rendered="#{recaudaciones.liquidacion.estadoLiquidacion.id eq 2 and userSession.userId ne 110}" process="@this" actionListener="#{recaudaciones.procesarPago()}"/>
                        <p:menuitem value="Comprobante" icon="ui-icon-document" oncomplete="PF('dlgComprobante').show();" update="frmComprobante" rendered="#{userSession.userId==140 and (recaudaciones.liquidacion.estadoLiquidacion.id eq 1 or (recaudaciones.liquidacion.estadoLiquidacion.id eq 2 and recaudaciones.liquidacion.renPagoCollection ne null and recaudaciones.liquidacion.renPagoCollection.size()>0))}" process="@this"/>
                        <p:menuitem value="Edit. Contribuyente" icon="ui-icon-person" oncomplete="PF('dlgEditContribuyente').show();" update="frmEditContribuyente" rendered="#{recaudaciones.liquidacion ne null and recaudaciones.liquidacion.comprador eq null}" process="@this"/>
                        <p:menuitem value="Anular" icon="ui-icon-close" oncomplete="PF('dlgAnulacion').show();" update="frmAnulacion" rendered="#{recaudaciones.liquidacion ne null and userSession.userId eq 144}" process="@this"/>
                    </p:contextMenu>
                </p:tab>
                <p:tab id="tituloCreditoPagado" title="Titulos de Creditos - Pagados">
                    <p:dataTable id="dtLiquidacionesPagadas" reflow="true" paginator="true" lazy="true" rows="10" rowsPerPageTemplate="10,50,100" paginatorPosition="top"
                                 paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 value="#{recaudaciones.titulosCreditoPagado}" var="tituloPagado" emptyMessage="No se encontraron elementos..." style="text-align: center;"
                                 selectionMode="single" rowKey="#{tituloPagado.id}" selection="#{recaudaciones.liquidacion}" filterEvent="enter">
                        <p:ajax event="rowSelect" update="mainForm:tvRecaudaciones:opLiquidacionesPagadas"/>
                        <p:column id="tipoLiquidacionPagada" headerText="Prefijo" width="80" filterBy="#{tituloPagado.tipoLiquidacion.prefijo}" filterStyle="width: 95%;">
                            <p:outputLabel value="#{tituloPagado.tipoLiquidacion.prefijo}" style="font-weight: bold;"/>
                        </p:column>
                        <p:column headerText="No. Liq." width="90" filterBy="#{tituloPagado.numLiquidacion}" sortBy="#{titulo.numLiquidacion}" filterStyle="width: 95%;">
                            <p:outputLabel value="#{tituloPagado.numLiquidacion}" style="font-weight: bold;"/>
                        </p:column>
                        <p:column headerText="Anio" width="80" filterBy="#{titulo.anio}" sortBy="#{tituloPagado.anio}" filterStyle="width: 95%;">
                            <p:outputLabel value="#{tituloPagado.anio}" style="font-weight: bold;"/>
                        </p:column>
                        <p:column id="tramitePagado" headerText="Tramite" width="100" filterBy="#{tituloPagado.tramite.id}" filterStyle="width: 95%;">
                            <p:outputLabel value="#{tituloPagado.tramite.id}" style="font-weight: bold;"/>
                        </p:column>
                        <p:column id="predioPagado" headerText="Predio" width="100" filterBy="#{tituloPagado.predio.numPredio}" filterStyle="width: 95%;">
                            <p:outputLabel value="#{tituloPagado.predio.numPredio}" style="font-weight: bold;"/>
                        </p:column>
                        <p:column id="identificacionPagada" headerText="Identificacion" width="120" filterBy="#{tituloPagado.comprador.ciRuc}" filterStyle="width: 95%;">
                            <p:outputLabel style="font-weight: bold; font-size: 13px;" value="#{tituloPagado.comprador.ciRuc}"/>
                        </p:column>
                        <p:column headerText="Solicitante">
                            #{tituloPagado.comprador ne null?tituloPagado.comprador.nombreCompleto: (tituloPagado.observacion.contains('|')?tituloPagado.observacion.substring(0,tituloPagado.observacion.indexOf('|')):tituloPagado.nombreComprador)}
                        </p:column>
                        <p:column headerText="LOCAL">
                            #{tituloPagado.localComercial.nombreLocal}
                        </p:column>
                        <p:column headerText="DIRECCION">
                            #{tituloPagado.localComercial.numLocal}
                        </p:column>
                        <p:column headerText="Valor" width="75"><p:outputLabel value="#{tituloPagado.totalPago}" style="font-weight: bold;"/></p:column>
                        <p:column headerText="Saldo" width="75"><p:outputLabel value="#{tituloPagado.saldo}" style="font-weight: bold;"/></p:column>
                        <p:column headerText="Estado" width="75"><p:outputLabel value="#{tituloPagado.estadoLiquidacion.descripcion}" style="font-weight: bold;"/></p:column>
                    </p:dataTable>
                    <p:menuitem value="Detalle Pago" oncomplete="PF('dlgDetallePago').show();" update="formDetPago" icon="ui-icon-calculator" rendered="#{recaudaciones.liquidacion ne null}" process="@this"/>
                    <p:contextMenu id="opLiquidacionesPagadas" for="dtLiquidacionesPagadas">
                        <p:menuitem value="Detalle" icon="ui-icon-comment" oncomplete="PF('dlgDetalle').show();" update="formDetEmision" rendered="#{recaudaciones.liquidacion ne null}" process="@this" actionListener="#{recaudaciones.calculosAdicionales()}"/>
                        <p:menuitem value="Detalle Pago" oncomplete="PF('dlgDetallePago').show();" update="formDetPago" icon="ui-icon-calculator" rendered="#{recaudaciones.liquidacion ne null}" process="@this"/>  
                    </p:contextMenu>
                </p:tab>
                <p:tab title="Cobro Coactiva" rendered="false">
                    <p:outputLabel value="TIPO DE CONSULTA: " style="font-size: 13px;font-weight: bolder;"/>
                    <p:selectOneRadio value="#{recaudaciones.tipoConsulta}" style="width: 500px;">
                        <f:selectItem itemLabel="MATRICULA INMOBILIARIA" itemValue="1"/>
                        <f:selectItem itemLabel="CONTRIBUYENTE" itemValue="2"/>
                        <f:selectItem itemLabel="CODIGO PREDIAL" itemValue="3"/>
                        <p:ajax update="groupCoactiva,dtEmisionesCoactiva" listener="#{recaudaciones.cambioTipoConsulta()}"/>
                    </p:selectOneRadio>
                    <h:panelGroup id="groupCoactiva" style="font-size: 13px;">
                        <p:fieldset legend="NUMERO DE PREDIO" rendered="#{recaudaciones.tipoConsulta eq 1}">
                            <p:outputLabel value="CODIGO CORTO:" style="font-weight: bolder;"/><p:spacer width="20" height="1"/>
                            <p:inputText value="#{recaudaciones.predioModel.numPredio}"/>
                        </p:fieldset>
                        <p:fieldset legend="CONTRIBUYENTE" rendered="#{recaudaciones.tipoConsulta eq 2}">
                            <p:panelGrid styleClass="noBorder" columns="3">
                                <p:outputLabel value="C.I./R.U.C.:"/>
                                <p:outputLabel value="CONTRIBUYENTE:"/>
                                <p:spacer width="1" height="1"/>
                                <p:inputText value="#{recaudaciones.ente.ciRuc}" size="25" readonly="true"/>
                                <p:inputText value="#{recaudaciones.ente.nombreCompleto}" readonly="true" size="75" style="text-transform: uppercase;"/>
                                <p:commandButton value="Buscar/Cambiar" style="height: 30px" actionListener="#{recaudaciones.showDlgEntes(2)}"/>
                            </p:panelGrid>
                        </p:fieldset>
                        <p:fieldset legend="CODIGO PREDIAL" rendered="#{recaudaciones.tipoConsulta eq 3}">
                            <p:panelGrid columns="16">
                                <p:outputLabel value="SECTOR"/>
                                <p:outputLabel value="MZ"/>
                                <p:outputLabel value="CDLA"/>
                                <p:outputLabel value="MZ-DIV"/>
                                <p:outputLabel value="SOLAR"/>
                                <p:outputLabel value="DIV1"/>
                                <p:outputLabel value="DIV2"/>
                                <p:outputLabel value="DIV3"/>
                                <p:outputLabel value="DIV4"/>
                                <p:outputLabel value="DIV5"/>
                                <p:outputLabel value="DIV6"/>
                                <p:outputLabel value="DIV7"/>
                                <p:outputLabel value="DIV8"/>
                                <p:outputLabel value="DIV9"/>
                                <p:outputLabel value="PHV"/>
                                <p:outputLabel value="PHH"/>
                                <p:inputText value="#{recaudaciones.predioModel.sector}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.mz}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.cdla}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.mzDiv}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.solar}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.div1}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.div2}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.div3}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.div4}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.div5}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.div6}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.div7}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.div8}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.div9}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.phv}" size="3"/>
                                <p:inputText value="#{recaudaciones.predioModel.phh}" size="3"/>
                            </p:panelGrid>
                        </p:fieldset>
                    </h:panelGroup>
                    <div align="center">
                        <p:commandButton value="CONSULTAR" actionListener="#{recaudaciones.consultarPredios()}" style="font-size: 15px; font-weight: bolder;" styleClass="btnStyle" icon="ui-icon-search" iconPos="right"/>
                    </div>
                    <h:panelGroup id="dtEmisionesCoactiva">
                        <p:panelGrid styleClass="noBorder" columns="2" style="font-weight: bolder;font-size: 16px;width: 100%;text-align: right;">
                            <p:outputLabel value="Total Coactiva: $ #{recaudaciones.totalCoactiva}" style="color: #0033FF;font-weight: bolder;"/>
                            <p:commandButton value="Ingresar" styleClass="btnStyle" icon="ui-icon-circle-arrow-e" actionListener="#{recaudaciones.ingresarCoactiva()}"/>
                        </p:panelGrid>
                        <p:dataTable value="#{recaudaciones.emisiones}" emptyMessage="No se encuentran liquidaciones." var="bom" style="text-align: center;"
                                     scrollHeight="300" scrollable="true" selectionMode="single" rowKey="#{bom.id}" selection="#{recaudaciones.liqSelect}" >
                            <p:ajax event="rowSelect" listener="#{recaudaciones.seleccionarEmision()}"/>
                            <p:column headerText="Anio">
                                <p:outputLabel value="#{bom.anio}"/>
                            </p:column>
                            <p:column headerText="Valor Emision">
                                <p:outputLabel value="#{bom.totalPago}"/>
                            </p:column>
                            <p:column headerText="Recargo">
                                <p:outputLabel value="#{bom.recargo}"/>
                            </p:column>
                            <p:column headerText="Interes">
                                <p:outputLabel value="#{bom.interes}"/>
                            </p:column>
                            <p:column headerText="Total Emision">
                                <p:outputLabel value="#{bom.pagoFinal}"/>
                            </p:column>
                            <p:column headerText="Valor Coactiva" style="background-color: #FFA54E">
                                <p:outputLabel value="#{bom.valorCoactiva}"/>
                            </p:column>
                        </p:dataTable>
                    </h:panelGroup>
                </p:tab>
            </p:tabView>
            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
            </p:confirmDialog>
        </h:form>

        <p:dialog widgetVar="dlgReportesRecaudador" header="Reportes Recaudador" resizable="false" modal="true" position="center" height="350">
            <h:form id="reporteRecaudaciones">
                <h:outputText value="Fecha cierre: " style="font-weight: bolder;font-size: 14px"/>
                <p:calendar value="#{recaudaciones.fechaCierre}" navigator="true" pattern="dd/MM/yyyy HH:mm:ss" />
                <p:panelGrid styleClass="noBorder" columns="1" style="width: 100%;text-align: center">
                    <h:outputText value="#{recaudaciones.tipoReporte eq 1?'Cierre de Caja':recaudaciones.tipoReporte eq 2?'Recaudaciones Por Transaccion': recaudaciones.tipoReporte eq 3?'Resumen Cheques':''}" style="font-weight: bolder;font-size: 14px"/>
                    <h:outputText value="Fecha Reporte: " style="font-weight: bolder;font-size: 14px"/>
                    <p:calendar value="#{recaudaciones.fechaReporte}" mode="inline" />
                    <p:commandButton value="Generar Reporte" icon="ui-icon-print" styleClass="btnStyle" actionListener="#{recaudaciones.generarReporteCajero()}" style="float: end"/>
                </p:panelGrid>
            </h:form>
        </p:dialog>


        <p:dialog header="Detalle Pago" widgetVar="dlgDetallePago" resizable="false" closeOnEscape="true" modal="true" width="80%" position="center">
            <h:form id="formDetPago">
                <p:outputLabel value="Total a pagar: #{recaudaciones.liquidacion.totalPago}" style="font-size: 14px; font-weight: bold"/>
                <br/>
                <dialog:detallePago liquidacion="#{recaudaciones.liquidacion}"/>
                <center><p:commandButton value="Aceptar" oncomplete="PF('dlgDetallePago').hide();" styleClass="btnStyle"/></center>
            </h:form>
        </p:dialog>

        <p:dialog header="Detalle Emision" widgetVar="dlgDetalle" resizable="false" closeOnEscape="true" modal="true" width="80%" position="center">
            <h:form id="formDetEmision">
                <dialog:detalleLiquidacion liquidacion="#{recaudaciones.liquidacion}"/>
                <center><p:commandButton value="Aceptar" oncomplete="PF('dlgDetalle').hide();" styleClass="btnStyle"/></center>
            </h:form>
        </p:dialog>

        <p:dialog header="Procesar Pago" widgetVar="dlgProcesar" resizable="false" closeOnEscape="true" modal="true" width="95%" position="center">
            <h:form id="formProcesar">
                <p:fieldset legend="PAGO: #{recaudaciones.liquidacion.tipoLiquidacion.prefijo} - #{recaudaciones.liquidacion.tipoLiquidacion.nombreTitulo}" style="font-weight: bold; font-size: 13px;">
                    <p:panelGrid id="datoEmision" styleClass="noBorder" style="width: 100%;">
                        <p:row>
                            <p:column>
                                <p:outputLabel value="N. de Emisión"/><br/>
                                <p:inputText value="#{recaudaciones.liquidacion.numLiquidacion}" readonly="true"/>
                            </p:column>
                            <p:column>
                                <p:outputLabel value="Valor a Cobrar"/><br/>
                                <p:outputLabel value="#{recaudaciones.liquidacion.pagoFinal}" styleClass="lbStyle"/>
                            </p:column>
                            <p:column>
                                <p:outputLabel value="Saldo" style="font-weight: bolder;"/><br/>
                                <p:inputText value="#{recaudaciones.modelPago.valorSaldoPagoFinal}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px; color: blue;"/>
                            </p:column>
                            <p:column rendered="#{recaudaciones.liquidacion.interes gt 0 or recaudaciones.liquidacion.recargo gt 0}">
                                <p:outputLabel value="Valor"/><br/>
                                <p:outputLabel value="#{recaudaciones.liquidacion.saldo}" style="font-size: 20px; font-weight: bold;"/>
                            </p:column>
                            <p:column rendered="#{recaudaciones.liquidacion.interes gt 0}">
                                <p:outputLabel value="Interes"/><br/>
                                <p:outputLabel value="#{recaudaciones.liquidacion.interes}" style="font-size: 20px; font-weight: bold;"/>
                            </p:column>
                            <p:column rendered="#{recaudaciones.liquidacion.recargo gt 0}">
                                <p:outputLabel value="Multa"/><br/>
                                <p:outputLabel value="#{recaudaciones.liquidacion.recargo}" style="font-size: 20px; font-weight: bold;"/>
                            </p:column>
                            <!--<p:column>
                                <p:outputLabel value="Observaciones"/><br/>
                                <p:inputTextarea value="# {recaudaciones.liquidacion.observacion}" rows="3" cols="50" autoResize="false"/>
                            </p:column>-->
                            <p:column rendered="#{recaudaciones.liquidacion.tipoLiquidacion.id eq 13}">
                                <p:outputLabel value="Descuento"/><br/>
                                <p:outputLabel value="#{recaudaciones.liquidacion.descuento}" styleClass="lbStyle"/>
                            </p:column>
                            <p:column rendered="#{recaudaciones.liquidacion.tipoLiquidacion.id eq 13}">
                                <p:outputLabel value="Recargo"/><br/>
                                <p:outputLabel value="#{recaudaciones.liquidacion.recargo}" styleClass="lbStyle"/>
                            </p:column>
                            <p:column>
                                <p:dataTable style="width: 420px; float: right;" value="#{recaudaciones.liquidacion.renDetLiquidacionCollection}" var="rubro">
                                    <p:column headerText="Rubro">
                                        <p:outputLabel value="#{recaudaciones.getDescripcionRubro(rubro.rubro)}"/>
                                    </p:column>
                                    <p:column headerText="Valor" style="text-align: center;" width="35%">
                                        <p:outputLabel value="#{rubro.valor}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                </p:fieldset>

                <p:panelGrid styleClass="noBorder">
                    <p:row>
                        <p:column>
                            <p:outputLabel value="Datos del Solicitante:" style="font-weight: bolder; font-size: 15px; color: blue;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Identificacion: " style="font-weight: bold;"/>
                            <p:outputLabel value="#{recaudaciones.liquidacion.comprador.ciRuc}" style="font-weight: bold; font-size: 14px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Solicitante: " style="font-weight: bold;"/>
                            <p:outputLabel value="#{recaudaciones.liquidacion.comprador.apellidos} #{recaudaciones.liquidacion.comprador.nombres} #{recaudaciones.liquidacion.comprador.razonSocial} #{recaudaciones.liquidacion.comprador.nombreComercial} #{recaudaciones.liquidacion.nombreComprador} " style="font-weight: bold; font-size: 14px;"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <p:fieldset legend="Detalle de Cobro" rendered="#{userSession.userId ne 110}">
                    <p:panelGrid id="detCobro" style="width: 100%;" styleClass="noBorder">
                        <p:row>
                            <p:column style="width: 100px;"><p:outputLabel value="Contado" style="font-weight: bolder;"/></p:column>
                            <p:column style="width: 100px;"><p:inputText value="#{recaudaciones.modelPago.valorTotalEfectivo}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                            <p:column rowspan="6">
                                <p:selectBooleanCheckbox value="#{recaudaciones.variosPagos}" itemLabel="** REALIZAR VARIOS PAGOS **" style="font-weight: bold; font-size: 14px;"/>
                                <p:tabView>
                                    <p:tab title="1. EFECTIVO">
                                        <!--<p:fieldset legend="1. EFECTIVO">-->
                                        <p:panelGrid columns="2">
                                            <p:outputLabel value="Valor Recibido"/>
                                            <p:inputText value="#{recaudaciones.modelPago.valorRecibido}" style="font-weight: bolder; font-size: 12px;">
                                            </p:inputText>
                                            <p:outputLabel value="Valor a Cobrar"/>
                                            <p:inputText value="#{recaudaciones.modelPago.valorCobrar}" style="font-weight: bolder; font-size: 12px;">
                                                <p:ajax event="blur" listener="#{recaudaciones.modelPago.calcularEfectivo()}" update="formProcesar:detCobro,formProcesar:datoEmision" process="@all"/>
                                            </p:inputText>
                                            <p:outputLabel value="Cambio"/><p:inputText value="#{recaudaciones.modelPago.valorCambio}" readonly="true" style="font-weight: bolder; font-size: 12px;"/>
                                        </p:panelGrid>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                    <p:tab title="2. NOTA DE CREDITO">
                                        <!--<p:fieldset legend="2. NOTA DE CREDITO">-->
                                        <p:panelGrid>
                                            <p:row>
                                                <p:column>
                                                    <p:outputLabel value="# Credito"/><br/>
                                                    <p:inputText value="#{recaudaciones.modelPago.pagoNotaCredio.numCredito}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Fecha"/><br/>
                                                    <p:calendar value="#{recaudaciones.modelPago.pagoNotaCredio.fecha}" pattern="dd/MM/yyyy"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Valor"/><br/>
                                                    <p:inputText type="number" value="#{recaudaciones.modelPago.pagoNotaCredio.valor}"/>
                                                </p:column>
                                                <p:column><p:commandButton value="Agregar" actionListener="#{recaudaciones.modelPago.agregarPago(3)}" update="formProcesar:detCobro,formProcesar:datoEmision"/></p:column>
                                            </p:row>
                                        </p:panelGrid>
                                        <p:dataTable id="dtNC" var="nc" value="#{recaudaciones.modelPago.listPagoNotaCredio}" style="margin-bottom:0; width: 700px;">
                                            <p:column headerText="# Credito"><h:outputText value="#{nc.numCredito}" /></p:column>
                                            <p:column headerText="Fecha"><h:outputText value="#{nc.fecha}" ><f:convertDateTime pattern="dd/MM/YYYY"/></h:outputText></p:column>
                                            <p:column headerText="Valor"><h:outputText value="#{nc.valor}" /></p:column>
                                            <p:column headerText="Accion">
                                                <p:commandButton value="Eliminar" actionListener="#{recaudaciones.modelPago.eliminarPagoNC(nc)}" update="formProcesar:detCobro,formProcesar:datoEmision"/>
                                            </p:column>
                                        </p:dataTable>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                    <p:tab title="3. CHEQUE">
                                        <!--<p:fieldset legend="3. CHEQUE">-->
                                        <p:panelGrid>
                                            <p:row>
                                                <p:column>
                                                    <p:outputLabel value="Banco"/><br/>
                                                    <p:selectOneMenu value="#{recaudaciones.modelPago.pagoCheque.banco}" effect="fade" converter="entityConverter">
                                                        <f:attribute name="name" value="RenEntidadBancaria"/>
                                                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                                        <f:selectItems value="#{recaudaciones.bancos}" var="banco" itemLabel="#{banco.descripcion}" itemValue="#{banco}"/>
                                                    </p:selectOneMenu>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Cheque"/><br/>
                                                    <p:inputText value="#{recaudaciones.modelPago.pagoCheque.numCheque}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Cuenta"/><br/>
                                                    <p:inputText value="#{recaudaciones.modelPago.pagoCheque.numCuenta}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Valor"/><br/>
                                                    <p:inputText type="number" value="#{recaudaciones.modelPago.pagoCheque.valor}"/>
                                                </p:column>
                                                <p:column><p:commandButton value="Agregar" actionListener="#{recaudaciones.modelPago.agregarPago(4)}" update="formProcesar:detCobro,formProcesar:datoEmision"/></p:column>
                                            </p:row>
                                        </p:panelGrid>
                                        <p:dataTable id="dtCh" var="ch" value="#{recaudaciones.modelPago.listPagoCheque}" style="margin-bottom:0; width: 700px;">
                                            <p:column headerText="BANCO"><h:outputText value="#{ch.banco.descripcion}" /></p:column>
                                            <p:column headerText="# Cheque"><h:outputText value="#{ch.numCheque}" /></p:column>
                                            <p:column headerText="# Cuenta"><h:outputText value="#{ch.numCuenta}" /></p:column>
                                            <p:column headerText="# Valor"><h:outputText value="#{ch.valor}" /></p:column>
                                            <p:column headerText="Accion"><p:commandButton value="Eliminar" actionListener="#{recaudaciones.modelPago.eliminarPagoCh(ch)}" update="formProcesar:detCobro,formProcesar:datoEmision"/></p:column>
                                        </p:dataTable>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                    <p:tab title="4. TARJETA DE CREDITO">
                                        <!--<p:fieldset legend="4. TARJETA DE CREDITO">-->
                                        <p:panelGrid>
                                            <p:row>
                                                <p:column>
                                                    <p:outputLabel value="Banco"/><br/>
                                                    <p:selectOneMenu value="#{recaudaciones.modelPago.pagoTarjetaCredito.banco}" effect="fade" converter="entityConverter">
                                                        <f:attribute name="name" value="RenEntidadBancaria"/>
                                                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                                        <f:selectItems value="#{recaudaciones.tarjetas}" var="banco" itemLabel="#{banco.descripcion}" itemValue="#{banco}"/>
                                                    </p:selectOneMenu>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Tarjeta"/><br/>
                                                    <p:inputText value="#{recaudaciones.modelPago.pagoTarjetaCredito.numTarjeta}" size="14"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Fecha Caduca"/><br/>
                                                    <p:calendar value="#{recaudaciones.modelPago.pagoTarjetaCredito.fechaCaducidad}" pattern="dd/MM/yyyy" size="10"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Autorizacion"/><br/>
                                                    <p:inputText value="#{recaudaciones.modelPago.pagoTarjetaCredito.autorizacion}" size="14"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Baucher"/><br/>
                                                    <p:inputText value="#{recaudaciones.modelPago.pagoTarjetaCredito.baucher}" size="14"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Titular"/><br/>
                                                    <p:inputText value="#{recaudaciones.modelPago.pagoTarjetaCredito.nombreTitular}" size="14"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Valor"/><br/>
                                                    <p:inputText type="number" value="#{recaudaciones.modelPago.pagoTarjetaCredito.valor}" style="width: 90px;"/>
                                                </p:column>
                                                <p:column><br/><p:commandButton value="Agregar" actionListener="#{recaudaciones.modelPago.agregarPago(2)}" update="formProcesar:detCobro,formProcesar:datoEmision"/></p:column>
                                            </p:row>
                                        </p:panelGrid>
                                        <p:dataTable id="dtTC" var="tc" value="#{recaudaciones.modelPago.listPagoTarjetaCredito}" style="margin-bottom:0; width: 700px;">
                                            <p:column headerText="BANCO"><h:outputText value="#{tc.banco.descripcion}" /></p:column>
                                            <p:column headerText="# Tarjeta"><h:outputText value="#{tc.numTarjeta}" /></p:column>
                                            <p:column headerText="Fecha Caducidad"><h:outputText value="#{tc.fechaCaducidad}"><f:convertDateTime pattern="dd/MM/YYYY"/></h:outputText></p:column>
                                            <p:column headerText="# Autorizacion"><h:outputText value="#{tc.autorizacion}" /></p:column>
                                            <p:column headerText="Baucher"><h:outputText value="#{tc.baucher}" /></p:column>
                                            <p:column headerText="Titular"><h:outputText value="#{tc.nombreTitular}" /></p:column>
                                            <p:column headerText="Valor"><h:outputText value="#{tc.valor}" /></p:column>
                                            <p:column headerText="Accion"><p:commandButton value="Eliminar" actionListener="#{recaudaciones.modelPago.eliminarPagoTC(tc)}" update="formProcesar:detCobro,formProcesar:datoEmision"/></p:column>
                                        </p:dataTable>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                    <p:tab title="5. TRANSFERENCIA">
                                        <!--<p:fieldset legend="5. TRANSFERENCIA">-->
                                        <p:panelGrid>
                                            <p:row>
                                                <p:column>
                                                    <p:outputLabel value="Banco"/><br/>
                                                    <p:selectOneMenu value="#{recaudaciones.modelPago.pagoTransferencia.banco}" effect="fade" converter="entityConverter">
                                                        <f:attribute name="name" value="RenEntidadBancaria"/>
                                                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                                        <f:selectItems value="#{recaudaciones.tarjetas}" var="banco" itemLabel="#{banco.descripcion}" itemValue="#{banco}"/>
                                                    </p:selectOneMenu>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="# Transferencia"/><br/>
                                                    <p:inputText value="#{recaudaciones.modelPago.pagoTransferencia.numTransferencia}"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Fecha"/><br/>
                                                    <p:calendar value="#{recaudaciones.modelPago.pagoTransferencia.fecha}" pattern="dd/MM/yyyy"/>
                                                </p:column>
                                                <p:column>
                                                    <p:outputLabel value="Valor"/><br/>
                                                    <p:inputText type="number" value="#{recaudaciones.modelPago.pagoTransferencia.valor}"/>
                                                </p:column>
                                                <p:column><p:commandButton value="Agregar" actionListener="#{recaudaciones.modelPago.agregarPago(5)}" update="formProcesar:detCobro,formProcesar:datoEmision"/></p:column>
                                            </p:row>
                                        </p:panelGrid>
                                        <p:dataTable id="dtT" var="t" value="#{recaudaciones.modelPago.listPagoTransferencia}" style="margin-bottom:0; width: 700px;">
                                            <p:column headerText="Banco"><h:outputText value="#{t.banco.descripcion}" /></p:column>
                                            <p:column headerText="# Transferencia"><h:outputText value="#{t.numTransferencia}" /></p:column>
                                            <p:column headerText="Fecha"><h:outputText value="#{t.fecha}"><f:convertDateTime pattern="dd/MM/YYYY"/></h:outputText></p:column>
                                            <p:column headerText="Valor"><h:outputText value="#{t.valor}" /></p:column>
                                            <p:column headerText="Accion"><p:commandButton value="Eliminar" actionListener="#{recaudaciones.modelPago.eliminarPagoTransferencia(t)}" update="formProcesar:detCobro,formProcesar:datoEmision"/></p:column>
                                        </p:dataTable>
                                        <!--</p:fieldset>-->
                                    </p:tab>
                                </p:tabView>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Notas Credito" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{recaudaciones.modelPago.valorTotalNotasCredito}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Cheque" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{recaudaciones.modelPago.valorTotalCheques}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Tarjeta" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{recaudaciones.modelPago.valorTotalTarjetas}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Transferencia" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{recaudaciones.modelPago.valorTotalTransferencias}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column><p:outputLabel value="Total" style="font-weight: bolder;"/></p:column>
                            <p:column><p:inputText value="#{recaudaciones.modelPago.valorTotal}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px; color: red;"/></p:column>
                        </p:row>
                    </p:panelGrid>           
                </p:fieldset>
                <p:panel id="botones">
                    <center>
                        <p:commandButton value="Procesar" styleClass="btnStyle" actionListener="#{recaudaciones.pago}" update="formProcesar,mainForm" icon="ui-icon-print" oncomplete="PF('dlgProcesar').hide();" style="font-size: 14px;" rendered="#{userSession.userId ne 110}">
                            <!--<p:confirm header="Confirmacion" message="Realizar Pago?" icon="ui-icon-alert" />-->
                        </p:commandButton><p:spacer width="25"/>                        
                        <p:commandButton value="Cancelar" styleClass="btnStyle" oncomplete="PF('dlgProcesar').hide();" icon="ui-icon-cancel" style="font-size: 14px;"/>
                    </center>
                </p:panel>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgSolicitante" header="Contribuyentes" width="800" height="90%" resizable="false" closable="true" closeOnEscape="true" modal="true">
            <h:form id="frmSolicitante">
                <div align="right">
                    <p:commandButton id="btnNuevo" value="Agregar" style="height: 30px" actionListener="#{recaudaciones.actualizarEnte()}" oncomplete="PF('dlgNewClient').show();" update="formNewClient"> 
                        <f:setPropertyActionListener target="#{managedEnte.tipoEnte}" value="#{1}" />
                    </p:commandButton>
                </div>
                <p:dataTable var="s" value="#{recaudaciones.solicitantes}" style="width: 100%;text-align: center;" lazy="true" 
                             paginator="true" rows="10" filterEvent="enter" paginatorPosition="top"
                             selectionMode="single" selection="#{recaudaciones.cobrosGenerales.comprador}" rowKey="#{s.id}">
                    <p:column headerText="CI/RUC" sortBy="#{s.ciRuc}" width="150" filterBy="#{s.ciRuc}" filterStyle="width: 90%;">
                        <h:outputText value="#{s.ciRuc}"/>
                    </p:column>
                    <!--<p:column headerText="Apellidos Nombre/Razon Social" filterBy="# {s.nombresCompletos}" filterStyle="width: 90%;">
                        <h:outputText value="# {s.nombreCompleto}" style="text-transform: uppercase"/>
                    </p:column>-->
                    <p:column headerText="Apellidos" filterBy="#{s.apellidos}" sortBy="#{s.apellidos}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.apellidos}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Nombres" filterBy="#{s.nombres}" sortBy="#{s.nombres}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.nombres}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Razon Social" filterBy="#{s.razonSocial}" sortBy="#{s.razonSocial}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.razonSocial}" style="text-transform: uppercase"/>
                    </p:column>
                    <f:facet name="footer">
                        <p:commandButton value="Seleccionar" icon="ui-icon-plus" actionListener="#{recaudaciones.seleccionar()}" style="height: 30px"/>
                    </f:facet>
                </p:dataTable>         
            </h:form>
        </p:dialog>

        <p:dialog id="dlgComprobante" widgetVar="dlgComprobante" header="Comprobante de Pago" appendTo="@(body)" width="75%" responsive="true" closable="true" closeOnEscape="true" position="center" modal="true" resizable="false">
            <h:form id="frmComprobante">
                <p:panelGrid style="width: 100%;">
                    <p:row>
                        <p:column>
                            <p:outputLabel value="N. Liquidacion"/><br/>
                            <p:outputLabel value="#{recaudaciones.liquidacion.numLiquidacion}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Tipo de Pago"/><br/>
                            <p:outputLabel value="#{recaudaciones.liquidacion.tipoLiquidacion.prefijo} - #{recaudaciones.liquidacion.tipoLiquidacion.nombreTitulo}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Solicitante"/><br/>
                            <p:outputLabel value="#{recaudaciones.liquidacion.comprador.ciRuc}-#{recaudaciones.liquidacion.comprador.apellidos} #{recaudaciones.liquidacion.comprador.nombres} #{recaudaciones.liquidacion.comprador.razonSocial} #{recaudaciones.liquidacion.comprador.nombreComercial}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <br/>
                <p:dataTable id="dtPagos" value="#{recaudaciones.liquidacion.renPagoCollection}" var="p" style="width: 80%; margin: 0 auto; text-align: center;">
                    <p:column headerText="Numero de comprobante"><p:outputLabel value="#{p.numComprobante}"/></p:column>
                    <p:column headerText="fecha Pago" >
                        <p:outputLabel value="#{p.fechaPago}"><f:convertDateTime pattern="dd/MM/yyyy"/></p:outputLabel>
                    </p:column>
                    <p:column headerText="Opcion"><p:commandButton value="Comprobante" styleClass="btnStyle" actionListener="#{recaudaciones.generarComprobante(p)}" icon="ui-icon-document"/></p:column>
                </p:dataTable>
                <br/>
                <center>
                    <p:commandButton value="Aceptar" styleClass="btnStyle" oncomplete="PF('dlgComprobante').hide();" icon="ui-icon-circle-close"/>
                </center>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgEditContribuyente" widgetVar="dlgEditContribuyente" header="Edicion de Contribuyente" appendTo="@(body)" width="75%" responsive="true" closable="true" closeOnEscape="true" modal="true" resizable="false">
            <h:form id="frmEditContribuyente">
                <p:panelGrid style="width: 100%;">
                    <p:row>
                        <p:column>
                            <p:outputLabel value="N. Liquidacion"/><br/>
                            <p:outputLabel value="#{recaudaciones.liquidacion.numLiquidacion}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="N. Comprobante"/><br/>
                            <p:outputLabel value="#{recaudaciones.liquidacion.numComprobante}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Tipo de Pago"/><br/>
                            <p:outputLabel value="#{recaudaciones.liquidacion.tipoLiquidacion.prefijo} - #{recaudaciones.liquidacion.tipoLiquidacion.nombreTitulo}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Valor"/><br/>
                            <p:outputLabel value="#{recaudaciones.liquidacion.totalPago}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel value="SOLICITANTE: " style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column colspan="3">
                            <p:outputLabel value="#{recaudaciones.liquidacion.comprador.ciRuc}-#{recaudaciones.liquidacion.comprador.apellidos} #{recaudaciones.liquidacion.comprador.nombres} #{recaudaciones.liquidacion.comprador.razonSocial} #{recaudaciones.liquidacion.comprador.nombreComercial}" style="font-weight: bold; font-size: 12px;"/>
                            <p:spacer width="15"/>
                            <p:commandButton value="Buscar" oncomplete="PF('dlgSolicitante').show();" update="frmSolicitante"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <br/>
                <center>
                    <p:commandButton value="Guardar Cambios" actionListener="#{recaudaciones.actualizarLiquidacion()}" oncomplete="PF('dlgEditContribuyente').hide();" styleClass="btnStyle" update="mainForm:tvRecaudaciones:dtLiquidaciones"/>
                    <p:spacer width="25"/>
                    <p:commandButton value="Cancelar" styleClass="btnStyle" oncomplete="PF('dlgEditContribuyente').hide();"/>
                </center>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgAnulacion" widgetVar="dlgAnulacion" header="Anular Liquidacion" appendTo="@(body)" width="75%" responsive="true" closable="true" closeOnEscape="true" position="center" modal="true" resizable="false">
            <h:form id="frmAnulacion">
                <p:panelGrid style="width: 100%;">
                    <p:row>
                        <p:column colspan="4"><p:outputLabel value="DETALLE DEL TITULO DE CREDITO QUE SE VA A ANULAR" style="font-weight: bold; font-size: 12px;"/></p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel value="Liquidacion"/><br/>
                            <p:outputLabel value="#{recaudaciones.liquidacion.idLiquidacion}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Valor"/><br/>
                            <p:outputLabel value="#{recaudaciones.liquidacion.totalPago}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Tipo de Pago"/><br/>
                            <p:outputLabel value="#{recaudaciones.liquidacion.tipoLiquidacion.prefijo} - #{recaudaciones.liquidacion.tipoLiquidacion.nombreTitulo}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Solicitante"/><br/>
                            <p:outputLabel value="#{recaudaciones.liquidacion.comprador.ciRuc}-#{recaudaciones.liquidacion.comprador.apellidos} #{recaudaciones.liquidacion.comprador.nombres} #{recaudaciones.liquidacion.comprador.razonSocial} #{recaudaciones.liquidacion.comprador.nombreComercial}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                    </p:row>
                </p:panelGrid><br/>
                <center>
                    <p:commandButton value="Anular" styleClass="btnStyle" actionListener="#{recaudaciones.anularTituloReporte()}" oncomplete="PF('dlgAnulacion').hide();" update="mainForm:tvRecaudaciones:dtLiquidaciones">
                        <p:confirm header="Confirmación" message="Realizar la anulacion?" icon="ui-icon-alert" />
                    </p:commandButton>
                    <p:spacer width="25"/>
                    <p:commandButton value="Cancelar" styleClass="btnStyle" oncomplete="PF('dlgAnulacion').hide();"/>
                </center>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgValorRubro" header="Especies Disponibles" resizable="false" modal="true">
            <h:form id="formValores">
                <h:panelGrid styleClass="noBorder" columns="3">
                    <p:outputLabel value="Total:" style="font-weight: bolder;"/>

                    <pe:inputNumber value="#{recaudaciones.rubroSelect.valor}" decimalPlaces="2" >
                        <p:ajax event="click" listener="#{recaudaciones.encerarValor}"/>
                    </pe:inputNumber>
                    <p:commandButton value="Aceptar" styleClass="btnStyle" icon="ui-icon-check" actionListener="#{recaudaciones.guardaRubro()}"/>
                </h:panelGrid>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgEspeciesDisp" header="Especies Disponibles" resizable="false" modal="true">
            <h:form id="formEspecies">
                <p:panelGrid styleClass="noBorder" columns="4" style="font-size: 16px;">
                    Cantidad:
                    <pe:inputNumber value="#{recaudaciones.rubroSelect.cantidad}" decimalPlaces="0">
                        <p:ajax event="change" update="formEspecies" listener="#{recaudaciones.updateValoresEspecies()}"/>
                    </pe:inputNumber>
                    Disponibles:
                    <p:inputText value="#{recaudaciones.acta.disponibles}"  readonly="true" style="background-color: #fce1b1"/>
                    Desde:
                    <p:inputText value="#{recaudaciones.acta.desdeTemp}" readonly="true" style="background-color: #fce1b1"/>
                    Hasta:
                    <p:inputText value="#{recaudaciones.acta.hastaTemp}" readonly="true" style="background-color: #fce1b1"/>
                    V.Uni.:
                    <pe:inputNumber value="#{recaudaciones.rubroSelect.valor}" decimalPlaces="2"/>
                    V.Total:
                    <pe:inputNumber value="#{recaudaciones.rubroSelect.valorTotal}" decimalPlaces="2"/>
                </p:panelGrid>
                <div align="center">
                    <p:commandButton value="Aceptar" styleClass="btnStyle" icon="ui-icon-check" actionListener="#{recaudaciones.guardaRubro()}"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog header="Seleccionar Predio" widgetVar="selPredio" modal="true" resizable="false" width="700">
            <h:form id="formPredSel">
                <p:dataTable id="dtSelPred" paginator="true" style="text-align: center;" emptyMessage="No se encontro Movimientos" filterEvent="enter"
                             rows="10" value="#{recaudaciones.propiedades}" var="pl" paginatorPosition="top">
                    <p:column headerText="No Predio" filterBy="#{pl.numPredio}" filterStyle="width: 90%" width="100">
                        <p:outputLabel value="#{pl.numPredio}"/>
                    </p:column>
                    <p:column headerText="Cod. Predial" width="200">
                        <p:outputLabel value="#{pl.codigoPredialCompleto}"/>
                    </p:column>
                    <p:column headerText="Urbanizacion">
                        <p:outputLabel value="#{pl.ciudadela.nombre}"/>
                    </p:column>
                    <p:column headerText="MZ" filterBy="#{pl.urbMz}" width="50" filterStyle="width: 95%" filterMatchMode="exact">
                        <p:outputLabel value="#{pl.urbMz}"/>
                    </p:column>
                    <p:column headerText="SL" filterBy="#{pl.urbSolarnew}" width="50" filterStyle="width: 95%" filterMatchMode="exact">
                        <p:outputLabel value="#{pl.urbSolarnew}"/>
                    </p:column>
                    <p:column headerText="Selec." width="50">
                        <p:commandLink actionListener="#{recaudaciones.seleccionaPredio(pl)}">
                            <p:graphicImage value="/css/homeIconsImages/ir.png" height="16"/>   
                        </p:commandLink>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgNuevoCliente" header="Ingreso de Cliente" widgetVar="dlgNewClient" modal="true" resizable="false" closeOnEscape="false" position="center">
            <h:form  id="formNewClient">
                <p:panelGrid styleClass="noBorder" style="width: 100%">
                    <p:row>
                        <p:column style="text-align: right"><p:outputLabel value="Tipo Persona:" style="font-weight: bolder"/></p:column>
                        <p:column>
                            <p:selectOneMenu value="#{recaudaciones.tipoEnte}" style="width: 160px;">
                                <f:selectItem itemLabel="Natural" itemValue="1" />
                                <f:selectItem itemLabel="Jurídica" itemValue="2" />
                                <f:selectItem itemLabel="Excepcionales" itemValue="3" />
                                <p:ajax update="tabNewEnte"/>
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <p:tabView id="tabNewEnte" style="width: 520px;height: 400px">
                    <p:tab title="Datos Principales">
                        <p:panelGrid styleClass="noBorder" style="width: 100%">
                            <p:row>
                                <p:column colspan="4">
                                    <p:outputLabel value="NOTA: CAMPOS OBLIGATORIOS (*)" style="font-weight: bolder;color: #0033FF"/>
                                </p:column>
                            </p:row>
                            <p:row rendered="#{recaudaciones.tipoEnte==3}">
                                <p:column colspan="4">
                                    <p:selectBooleanCheckbox value="#{recaudaciones.excepcionalEmpresa}" itemLabel="EXCEPCIONALES JURIDICO:" style="float: left; font-weight: bold; font-size: 12px;">
                                        <p:ajax update="tabNewEnte" process="@this"/>
                                    </p:selectBooleanCheckbox>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="#{recaudaciones.tipoEnte==1?'(*)Cédula:':recaudaciones.tipoEnte==2?'(*)R.U.C.:':recaudaciones.tipoEnte==3?'(*)Identificación:':''}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{recaudaciones.registroEnte.ciRuc}" rendered="#{recaudaciones.tipoEnte==1 or recaudaciones.tipoEnte==2}">
                                        <p:ajax event="blur" listener="#{recaudaciones.existeCedula()}" update="formNewClient"/>
                                    </p:inputText>
                                    <p:inputText readonly="true" value="Lo asigna el sistema" disabled="#{recaudaciones.tipoEnte==3}" rendered="#{recaudaciones.tipoEnte==3}"/>
                                </p:column>
                                <p:column>
                                    <p:outputLabel value="Fec. Nacimiento:" rendered="#{recaudaciones.tipoEnte==1 or managedEnte.tipoEnte==3}" style="font-weight: bolder"/>
                                    <p:outputLabel value="Fec. Constitución:" rendered="#{recaudaciones.tipoEnte==2}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column>
                                    <p:calendar value="#{recaudaciones.registroEnte.fechaNacimiento}" placeholder="DÍA-MES-AÑO" maxdate="sysdate" pattern="dd-MM-yyyy" mask="true" />
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="(*)Nombres:" rendered="#{recaudaciones.tipoEnte==1 or (recaudaciones.tipoEnte==3 and !recaudaciones.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                    <p:outputLabel value="(*)Razón Social:" rendered="#{recaudaciones.tipoEnte==2 or (recaudaciones.tipoEnte==3 and recaudaciones.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{recaudaciones.registroEnte.nombres}" rendered="#{recaudaciones.tipoEnte==1 or (recaudaciones.tipoEnte==3 and !recaudaciones.excepcionalEmpresa)}" style="width: 100%"/>
                                    <p:inputText value="#{recaudaciones.registroEnte.razonSocial}" rendered="#{recaudaciones.tipoEnte==2 or (recaudaciones.tipoEnte==3 and recaudaciones.excepcionalEmpresa)}" style="width: 100%"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="(*)Apellidos:" rendered="#{recaudaciones.tipoEnte==1 or (recaudaciones.tipoEnte==3 and !recaudaciones.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                    <p:outputLabel value="Nombre Comercial:" rendered="#{recaudaciones.tipoEnte==2 or (recaudaciones.tipoEnte==3 and recaudaciones.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{recaudaciones.registroEnte.apellidos}" rendered="#{recaudaciones.tipoEnte==1 or (recaudaciones.tipoEnte==3 and !recaudaciones.excepcionalEmpresa)}" style="width: 100%"/>
                                    <p:inputText value="#{recaudaciones.registroEnte.nombreComercial}" rendered="#{recaudaciones.tipoEnte==2 or (recaudaciones.tipoEnte==3 and recaudaciones.excepcionalEmpresa)}" style="width: 100%"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Dirección:" style="font-weight: bolder"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{recaudaciones.registroEnte.direccion}" style="width: 100%"/>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    </p:tab>
                </p:tabView>
                <div align="center">
                    <p:commandButton value="Guardar" icon="ui-icon-disk" actionListener="#{recaudaciones.guardarEnte()}"/>
                </div>
            </h:form>
        </p:dialog>
        <script>
            $(document).ready(function () {
                //attach click event to button
                $("#formValores [type='reset']").click(function () {
                    $("#formValores [name='valorMain']").focus();
                });
            });
        </script>

    </ui:define>
</ui:composition>