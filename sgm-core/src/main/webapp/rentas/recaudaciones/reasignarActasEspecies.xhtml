<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/template/template.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="metadata">
        <f:metadata>
            <f:event type="preRenderView" listener="#{reasignarActasEspecies.doPreRenderView()}"/>
        </f:metadata>
    </ui:define>
    <ui:define name="top"><h3>Re-Asignacion Especies</h3></ui:define>
    <ui:define name="content">
        <h:form id="mainForm">
            <p:panel header="Datos Reasignacion" style="margin: 0 auto;">
                <p:panelGrid styleClass="noBorder" columns="3">
                    Usuario:
                    <p:selectOneMenu  value="#{reasignarActasEspecies.recSel}" converter="entityConverter">  
                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}" />  
                        <f:selectItems value="#{reasignarActasEspecies.recaudadores}" var="rec" itemLabel="#{rec.usuario}" itemValue="#{rec}"/>  
                    </p:selectOneMenu>
                    <p:commandButton value="Re-Asignar" styleClass="btnStyle" icon="ui-icon-refresh" actionListener="#{reasignarActasEspecies.reasignarEspecies()}">
                        <p:confirm header="Confirmacion" message="Guardar Acta?" icon="ui-icon-alert" />
                    </p:commandButton>
                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                        <p:commandButton value="SI" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                        <p:commandButton value="NO" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                    </p:confirmDialog>
                </p:panelGrid>
            </p:panel>
            <p:dataTable paginator="true" rows="20" var="det" value="#{reasignarActasEspecies.detalles}" rowKey="#{det.id}"
                         style="text-align: center;margin: 0 auto;" selection="#{reasignarActasEspecies.seleccionados}">
                <p:column selectionMode="multiple" width="40"/>
                <p:column headerText="No.Acta" width="60">
                    <p:outputLabel value="#{det.acta.numActa}"/>
                </p:column>
                <p:column headerText="Anio Acta" width="75">
                    <p:outputLabel value="#{det.acta.anio}"/>
                </p:column>
                <p:column headerText="Fech.Ingreso" width="100">
                    <p:outputLabel value="#{det.acta.fechaIngreso}"><f:convertDateTime pattern="dd-MM-yyyy"/></p:outputLabel>
                </p:column>
                <p:column headerText="Especie">
                    <p:outputLabel value="#{det.especie.nombre}"/>
                </p:column>
                <p:column headerText="Cantidad" width="75">
                    <p:outputLabel value="#{det.cantidad}"/>
                </p:column>
                <p:column headerText="Desde" width="75">
                    <p:outputLabel value="#{det.desde}"/>
                </p:column>
                <p:column headerText="Hasta" width="75">
                    <p:outputLabel value="#{det.hasta}"/>
                </p:column>
                <p:column headerText="Ult.Vend." width="75">
                    <p:outputLabel value="#{det.ultimoVendido}"/>
                </p:column>
                <p:column headerText="Dispon." width="75">
                    <p:outputLabel value="#{det.disponibles}"/>
                </p:column>
                <p:column headerText="Usuario Actual" width="100">
                    <p:outputLabel value="#{reasignarActasEspecies.getNameUser(det.acta.usuarioAsignado)}"/>
                </p:column>
            </p:dataTable>
        </h:form>
    </ui:define>
</ui:composition>

